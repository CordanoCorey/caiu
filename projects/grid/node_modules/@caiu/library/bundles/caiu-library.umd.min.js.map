{"version":3,"sources":["ng://@caiu/library/lib/library.service.ts","ng://@caiu/library/lib/library.component.ts","ng://@caiu/library/lib/components/accordion/accordion.component.ts","ng://@caiu/library/lib/shared/shared.module.ts","ng://@caiu/library/lib/components/accordion/accordion.module.ts","null","ng://@caiu/library/lib/shared/models.ts","ng://@caiu/library/lib/components/tile/tile.model.ts","ng://@caiu/library/lib/shared/utils.ts","ng://@caiu/library/lib/components/collage/collage.model.ts","ng://@caiu/library/lib/components/collage/collage.component.ts","ng://@caiu/library/lib/components/tile/tile.component.ts","ng://@caiu/library/lib/components/tile/tile.module.ts","ng://@caiu/library/lib/components/collage/collage.module.ts","ng://@caiu/library/lib/shared/date.ts","ng://@caiu/library/lib/components/datepicker/datepicker.component.ts","ng://@caiu/library/lib/components/datepicker/daterange/daterange.component.ts","ng://@caiu/library/lib/components/datepicker/datepicker.module.ts","ng://@caiu/library/lib/components/dialog/dialog.model.ts","ng://@caiu/library/lib/components/dialog/dialog.component.ts","ng://@caiu/library/lib/components/dialog/dialog.module.ts","ng://@caiu/library/lib/components/file-upload/file-upload.model.ts","ng://@caiu/library/lib/shared/ordering.ts","ng://@caiu/library/lib/components/file-upload/file-upload.component.ts","ng://@caiu/library/lib/components/file-upload/file-preview/file-preview.component.ts","ng://@caiu/library/lib/components/file-upload/upload/upload.component.ts","ng://@caiu/library/lib/components/file-upload/uploads/uploads.component.ts","ng://@caiu/library/lib/components/file-upload/file-upload.module.ts","ng://@caiu/library/lib/shared/collection.ts","ng://@caiu/library/lib/components/grid/grid.model.ts","ng://@caiu/library/lib/components/grid/grid-column/grid-column.component.ts","ng://@caiu/library/lib/components/grid/grid.component.ts","ng://@caiu/library/lib/components/grid/grid-cell/grid-cell.component.ts","ng://@caiu/library/lib/components/grid/grid-column/grid-column.model.ts","ng://@caiu/library/lib/components/grid/simple-grid/simple-grid.component.ts","ng://@caiu/library/lib/components/grid/grid.module.ts","ng://@caiu/library/lib/components/not-found/not-found.component.ts","ng://@caiu/library/lib/components/not-found/not-found.module.ts","ng://@caiu/library/lib/components/wallpaper/wallpaper.component.ts","ng://@caiu/library/lib/components/wallpaper/wallpaper.module.ts","ng://@caiu/library/lib/pipes/list.pipe.ts","ng://@caiu/library/lib/pipes/phone-number.pipe.ts","ng://@caiu/library/lib/pipes/time-ago.pipe.ts","ng://@caiu/library/lib/pipes/yes-no.pipe.ts","ng://@caiu/library/lib/library.module.ts","ng://@caiu/library/lib/animations/animations.module.ts","ng://@caiu/library/lib/components/editor/editor-window/editor-window.component.ts","ng://@caiu/library/lib/components/editor/editor.component.ts","ng://@caiu/library/lib/components/editor/editor.module.ts","ng://@caiu/library/lib/effects/effects.module.ts","ng://@caiu/library/lib/errors/errors.actions.ts","ng://@caiu/library/lib/errors/errors.service.ts","ng://@caiu/library/lib/errors/errors.effects.ts","ng://@caiu/library/lib/errors/global-errors.service.ts","ng://@caiu/library/lib/errors/errors.module.ts","ng://@caiu/library/lib/errors/errors.models.ts","ng://@caiu/library/lib/errors/errors.selectors.ts","ng://@caiu/library/lib/events/events.models.ts","ng://@caiu/library/lib/events/events.actions.ts","ng://@caiu/library/lib/events/events.effects.ts","ng://@caiu/library/lib/events/events.selectors.ts","ng://@caiu/library/lib/events/events.service.ts","ng://@caiu/library/lib/events/events.module.ts","ng://@caiu/library/lib/forms/forms.module.ts","ng://@caiu/library/lib/forms/actions.ts","ng://@caiu/library/lib/forms/models.ts","ng://@caiu/library/lib/forms/utils.ts","ng://@caiu/library/lib/http/http.models.ts","ng://@caiu/library/lib/http/http.actions.ts","ng://@caiu/library/lib/http/http.service.ts","ng://@caiu/library/lib/shared/base-entity.ts","ng://@caiu/library/lib/shared/decorators.ts","ng://@caiu/library/lib/http/http.commands.ts","ng://@caiu/library/lib/http/http.effects.ts","ng://@caiu/library/lib/http/http.module.ts","ng://@caiu/library/lib/lookup/lookup.actions.ts","ng://@caiu/library/lib/lookup/lookup.models.ts","ng://@caiu/library/lib/lookup/lookup.service.ts","ng://@caiu/library/lib/lookup/lookup.module.ts","ng://@caiu/library/lib/store/actions.ts","ng://@caiu/library/lib/lookup/lookup.selectors.ts","ng://@caiu/library/lib/router/actions.ts","ng://@caiu/library/lib/router/router.service.ts","ng://@caiu/library/lib/router/router.effects.ts","ng://@caiu/library/lib/router/router.module.ts","ng://@caiu/library/lib/router/models.ts","ng://@caiu/library/lib/router/selectors.ts","ng://@caiu/library/lib/shared/token.ts","ng://@caiu/library/lib/shared/window.ts","ng://@caiu/library/lib/store/selectors.ts","ng://@caiu/library/lib/router/guards/authenticated.guard.ts","ng://@caiu/library/lib/shared/component.ts","ng://@caiu/library/lib/shared/config.ts","ng://@caiu/library/lib/shared/question.ts","ng://@caiu/library/lib/shared/tree.ts","ng://@caiu/library/lib/shared/user.ts","ng://@caiu/library/lib/storage/storage.actions.ts","ng://@caiu/library/lib/storage/storage.models.ts","ng://@caiu/library/lib/storage/storage.service.ts","ng://@caiu/library/lib/storage/storage.effects.ts","ng://@caiu/library/lib/storage/storage.module.ts","ng://@caiu/library/lib/store/store.module.ts","ng://@caiu/library/lib/errors/errors.reducer.ts","ng://@caiu/library/lib/events/events.reducer.ts","ng://@caiu/library/lib/forms/decorators.ts","ng://@caiu/library/lib/lookup/lookup.reducer.ts","ng://@caiu/library/lib/router/router.reducer.ts","ng://@caiu/library/lib/store/reducers.ts"],"names":["LibraryService","Injectable","args","providedIn","LibraryComponent","prototype","ngOnInit","Component","selector","template","styles","AccordionComponent","EventEmitter","toggle","this","opened","open","close","onStart","e","openStart","emit","closeStart","onDone","openDone","closeDone","onClickTrigger","active","animations","trigger","state","style","height","transition","animate","Input","Output","SharedModule","NgModule","imports","CommonModule","RouterModule","FlexLayoutModule","declarations","exports","AccordionModule","extendStatics","Object","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__extends","__","constructor","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__metadata","metadataKey","metadataValue","metadata","__read","o","n","m","Symbol","iterator","call","ar","next","done","push","value","error","__spread","concat","Address","streetAddress","address2","city","stateId","zipCode","hasCityStateZip","firstName","lastName","hasStreetAddress","Alert","Coordinates","Dimensions","rows","columns","width","Email","Date","Filters","Image","orientation","vertical","Metadata","PropertyMetadata","QueryItem","QueryModel","totalParams","keys","params","AppendQueryString","query","obj","BuildQueryObject","reduce","acc","str","AppendToQueryString","path","BuildQueryString","assign","skip","QuerySkip","take","QueryTake","term","QueryTerm","QueryParams","FormatDate","date","month","getMonth","day","getDate","year","getFullYear","join","ParseQuery","queryString","pairs","substr","split","pair","decodeURIComponent","_a","Search","StyleModel","s","backgroundColor","border","borderRadius","color","cursor","display","fontSize","lineHeight","padding","paddingTop","paddingBottom","paddingLeft","paddingRight","textDecoration","Tile","_coordinates","_dimensions","_image","cellHeight","cellWidth","image","src","scale","dimensions","startRow","startColumn","ratio","heightScale","widthScale","coordinates","row","column","arrayUnion","array1","array2","a","j","splice","assignProps","props","forEach","build","ctor","_i","instance","ret","console","warn","compareNumbers","equals","x1","x2","undefined","isArray","findIndex","x","index","falsy","filterState","removeCycles","removeProps","format7DigitPhoneNumber","number","substring","format10DigitPhoneNumber","getAllProps","mapped","getGetters","filter","name","getValue","model","ignoreKey","map","val","guid","s4","Math","floor","random","toString","inArray","arr","item","integerArray","from","isCyclic","seenObjects","detect","indexOf","positiveIntegerArray","serialize","str2CharCode","charCodeAt","str2Id","toInt","str2int","parseInt","throwException","errorName","errorMessage","level","message","htmlMessage","toArray","toPayload","action","payload","toPx","truthy","Collage","AvailableColumns","maxColumns","cells","totalColumns","max","apply","k","AvailableRows","maxRows","totalRows","AvailableDimensions","availableRows","availableColumns","Build","images","canvasHeight","canvasWidth","collage","BuildEmptyCells","cols","y","BuildTiles","FindDimensions","tileDimensions","id","ChooseTileId","tileIds","FindCoordinates","remainder","FindCoordinatesNested","closestMatch","sort","abs","FindNextTileId","tiles","FindNextMatchId","FindBestMatchId","diff","tile","find","FindBestMatch","FindNextTile","tile_1","dim","GetTileDimensions","MarkCellsAsFilled","startIndex","start","PositionTiles","totalCells","availableDimensions","_images","_tiles","CollageComponent","changeDetection","ChangeDetectionStrategy","OnPush","TileComponent","imageHeight","imageWidth","positionLeft","positionTop","TileModule","CollageModule","DateRange","DateHelper","BuildStartTime","startDate","startHours","startMinutes","startMeridian","startTime","hours","setHours","setMinutes","BuildEndTime","dHours","dMinutes","endTime","getHours","getMinutes","FormatDateDashes","FormatDateSlashes","TimeAgo","seconds","getTime","interval","ToMonthName","MonthNames","ToMonthNumber","ToMonthNumberFromMonthYear","monthYear","ToMonthNumberFromMonthYearName","parts","MonthNumbers","ToMonthYear","monthNumber","ToMonthYearName","ToYearNumberFromMonthYear","FromMonthYear","IsDate","IsValidDate","dateWrapper","isNaN","Today","Month","Year","SchoolYearStart","NextSchoolYear","SchoolYearEnd","PreviousSchoolYear","AddDays","SubtractDays","days","setDate","BuildDate","setFullYear","setMonth","DateChanged","d1","d2","date1","date2","IsSameDay","BuildDateRange","dateRangeId","endDate","YearStartDate","YearEndDate","FutureDate","PreviousYearStartDate","PreviousYearEndDate","DATEPICKER_ACCESSOR","provide","NG_VALUE_ACCESSOR","useExisting","forwardRef","DatepickerComponent","multi","_value","registerOnChange","fn","onModelChange","registerOnTouched","onTouch","writeValue","onChange","onBlur","input","changeSelected","datepicker","startAt","selectedChanged","providers","ViewChild","DATERANGE_ACCESSOR","DaterangeComponent","changeDetectorRef","detectChanges","startDatepicker","endDatepicker","changeStartDate","changeEndDate","startDateChanged","closeStartDate","openStateDate","endDateChanged","closeEndDate","openEndDate","onFocus","focused","ChangeDetectorRef","DatepickerModule","MatDatepickerModule","MatNativeDateModule","MatInputModule","DialogModel","viewContainerRef","role","panelClass","hasBackdrop","backdropClass","disableClose","position","data","direction","DialogAction","DialogComponent","actions","title","encapsulation","ViewEncapsulation","None","DialogModule","MatDialogModule","MatIconModule","MatToolbarModule","FileUpload","BuildFromFile","file","fileName","size","fileSize","type","mimeType","order","GetReadyState","reader","readyState","pop","File","BuildFromFileUpload","upload","fileBinary","replace","GetSrcPrefix","fileExtension","extension","GetImageBinarySrc","img","defaultSrc","Permutation","_timestamp","rank","OrderedItem","Ordering","_items","orderKey","idKey","items","_history","_this","getItemOrder","count","permutation","ranks","getItemId","maxIndex","addItem","addItemAtPosition","nextPosition","pos","newItemId","tslib_1.__spread","archive","getPermutation","move","to","itemId","moveDown","moveUp","removeItem","removeItemAtPosition","updateItems","FILE_UPLOAD_ACCESSOR","FileUploadComponent","ref","BehaviorSubject","hasUploads","uploads","preview","multiple","ordering","changes$","subscribe","onUpload","add","f","remove","removeFile","activeFile","update","uploadAll","every","onInputChange","files","event","setupReader","FileReader","lastModified","lastModifiedDate","webkitRelativePath","onload","result","readAsDataURL","FilePreviewComponent","ordered","loading","isImage","graphic","first","last","onMoveUp","onMoveDown","onRemove","UploadComponent","UploadsComponent","FileUploadModule","MatCardModule","MatProgressBarModule","MatProgressSpinnerModule","Collection","AddItem","newState","BuildCollection","findByKey","dictionary","BuildItems","BuildDictionaryFromArray","BuildFromArray","Filter","FilterAnd","paths","FilterOr","some","RemoveItem","activeId","_ctor","lastUpdated","collection","asArray","activate","copyItems","_b","addItems","newItems","existingItem","matches","newItem","buildItem","existing","buildItems","factory","get","delete","removeAt","filterBy","filterItems","findBy","defaultItem","queryAnd","queryOr","removeItems","removeKeys","itemsArray","replaceItems","setValue","updateItem","updatedItem","existingItems","updatedItems","Grid","mode","ApplyFilter","operator","field","Contains","MatchDate","BuildSort","dir","toLowerCase","includes","FilterRows","filters","PageRows","SortRows","orderBy","grid","GridColumnComponent","view","ViewContainerRef","GridComponent","_elementRef","_renderer","logic","pageSizes","_color","_updateColor","newColor","_setElementColor","isAdd","element","nativeElement","addClass","removeClass","pageRows","filterRows","sortRows","rowHeightMax","autoCalculateHeight","activeRows","numericHeight","headerHeight","pagerHeight","toolbarHeight","min","computedRowHeight","total","filterable","pageable","pager","filtering","pageSize","export","ngOnChanges","buttonCount","info","pagerInfo","pagerType","previousNext","ngAfterContentInit","contentChildren","dataStateChange","filterChange","pageChange","sortChange","changes","save","component","options","workbookOptions","sheets","altIdx","cell","background","ElementRef","Renderer2","ContentChildren","GridCellComponent","createEmbeddedView","templateRef","dataItem","GridColumn","label","_class","_field","_title","_width","col","class","editable","editor","footerClass","footerStyle","format","headerClass","headerStyle","hidden","locked","media","sortable","SimpleGridComponent","_metadata","columnKeys","columnLabel","GridModule","ExcelExportModule","KendoGridModule","PDFModule","NotFoundComponent","NotFoundModule","WallpaperComponent","elementRef","windowWidth","elementHeight","elementWidth","WallpaperModule","ListPipe","transform","Pipe","PhoneNumberPipe","TimeAgoPipe","YesNoPipe","LibraryModule","MatButtonModule","MatCheckboxModule","MatRadioModule","MatSelectModule","MatTabsModule","AnimationsModule","EditorWindowComponent","dialogRef","Inject","MAT_DIALOG_DATA","MatDialogRef","EDITOR_ACCESSOR","EditorComponent","dialog","content","setContent","configBasic","configFull","elementId","menubar","skin_url","skinUrl","theme","plugins","toolbar","content_css","setup","editorRef","on","preventDefault","getContent","onKeyup","templates","toolbar1","toolbar2","image_advtab","full","expanded","ngAfterViewInit","tinymce","init","config","ngOnDestroy","clear","expand","openDialog","onUpdate","afterClosed","closeDialog","unsubscribe","MatDialog","EditorModule","FormsModule","entryComponents","EffectsModule","forFeature","featureEffects","NgrxEffectsModule","forRoot","rootEffects","ErrorActions","addAtOutlet","outlet","handler","addError","ADD","REMOVE","ErrorsService","ErrorEffects","actions$","service","pipe","THROW_ERROR","HANDLE_ERROR","Actions","Effect","Observable","GlobalErrorsService","handleError","alert","ErrorsModule","ngModule","ErrorHandler","useClass","Error","errorsSelector","store","select","Event","Events","_super","tslib_1.__extends","addValues","onAction","actionType","addEvent","getActionEvents","eventsByAction","removeEvent","replaceEvents","events","triggerEvent","updateValue","UpdateValuePayload","EventActions","ADD_EVENT","REMOVE_EVENT","TRIGGER_EVENT","UPDATE_VALUE","EventEffects","Store","eventsSelector","eventSelector","eventValueSelector","EventsService","eventIndex","actionWithKey","dispatch","dispatchHttpAction","successAction","onSuccess","errorAction","onError","success","takeOne","obs","combineLatest","eventKey","takeFrom","of","EventsModule","Ng2FormsModule","ReactiveFormsModule","FormActions","addForm","control","changeStatus","STATUS_CHANGES","changeValue","VALUE_CHANGES","navigateToForm","route","NAVIGATE","resetForms","forms","RESET","FormArray","fb","controls","validator","asyncValidator","BuildWithType","fa","BuildWithTypeAndValue","BuildWithValue","GetValue","buildControls","buildAbstractControl","resetValue","removeAll","addControls","setLength","findControlById","removeIndexes","indexes","group","buildControlsConfig","setAll","Ng2FormArray","isGroupValue","buildArrayFromType","FormBuilder","buildControl","isFormGroup","isFormArray","buildFormArray","hasValidators","buildControlFromModel","controlsConfig","hasGroupValidators","findFormArrayType","buildFormArrayControls","isArrayValue","isFormControl","HttpDeletePayload","HttpOptions","HttpGetPayload","HttpPutPayload","HttpPostPayload","HttpActions","addPath","existingMatches","matchPath","results","buildError","buildErrorPayload","handleErrorOutlet","handleErrorDefault","DELETE_ERROR","onSuccessPayload","DELETE_SUCCESS","httpDelete","DELETE","deleteSuccess","deleteError","GET_SUCCESS","GET_ERROR","httpGet","GET","getSuccess","response","getError","post","POST_SUCCESS","POST_ERROR","httpPost","POST","postFormUrlEncoded","POST_FORM_URL_ENCODED","postSuccess","postError","put","PUT_SUCCESS","PUT_ERROR","httpPut","PUT","putSuccess","putError","search","SEARCH_SUCCESS","SEARCH_ERROR","SEARCH","searchSuccess","HttpService","http","baseUrl$","authToken$","authTokenChanges","authToken","baseUrlChanges","baseUrl","_authToken","_baseUrl","headers","HttpHeaders","append","useDefaultHeaders","defaultHeaders","appendHeaders","requestHeaders","relativePath","url","prependBaseUrl","formatUrl","httpHeaders","res","catchError","err","finalize","onComplete","autocomplete","debounceTime","distinctUntilChanged","json","body","content-type","getPromise","toPromise","then","errorBody","JSON","parse","_body","statusCode","status","throwError","method","logEvents","log","HttpClient","BaseEntity","ignore","getSetters","Command","propertySignature","HttpCommands","delete$","get$","post$","postFormUrlEncoded$","put$","HttpEffects","commands","ofType","mergeMap","search$","InjectionToken","baseUrlFactory","baseUrlSelector","authTokenFactory","authTokenSelector","httpServiceFactory","provideHttpContext","urlSelector","useFactory","deps","useValue","HttpModule","HttpClientModule","LookupActions","addKey","ADD_KEY","ADD_VALUES","removeKey","REMOVE_KEY","Lookup","_key","typeName","values","LookupValue","_label","description","Lookups","AddLookups","lookups","lookup","AddLookup","BuildLookupValues","names","FindLookupIdByName","FindLookupNameById","RemoveLookup","AddLookupPayload","LookupService","lookupPath","lookupKeys","_keys","load","loadValues","loadKeys","buildQueryString","ADD_KEYS","LOOKUP_PATH","LOOKUP_KEYS","lookupServiceFactory","provideLookup","LookupModule","forRootWithPath","forRootWithKeys","forRootWithPathAndKeys","AppActions","noAction","NO_ACTION","ConfigActions","initialize","INITIALIZE","SidenavActions","CLOSE","OPEN","TOGGLE","WindowActions","resize","RESIZE","lookupSelector","lookupKeySelector","lookupValuesSelector","RouterActions","routeName","parent","ACTIVATE","navigate","navigateSuccess","NAVIGATE_SUCCESS","navigateError","NAVIGATE_ERROR","navCancel","NAVIGATION_CANCEL","navEnd","NAVIGATION_END","navError","NAVIGATION_ERROR","navStart","NAVIGATION_START","routesRecognized","ROUTES_RECOGNIZED","RouterService","_router","_route","NavigationCancel","onNavigationCancel","NavigationEnd","onNavigationEnd","NavigationError","onNavigationError","NavigationStart","onNavigationStart","RoutesRecognized","onRoutesRecognized","activatedRoute","router","extras","promise","navigateByUrl","Router","ActivatedRoute","RouterEffects","switchMap","navigate$","NGRouterModule","ActivatedRoutePayload","Breadcrumbs","segments","CustomRoute","_path","children","lazyChildren","LazyRoute","RouteSegment","pathFromRoot","segment","RouterState","BuildUrlSegment","NavigationStatus","Default","BuildRoute","BuildLazyRoute","GetActivatedOutlets","root","currentIndex","GetRouteName","GetRouteSegment","GetActivatedRoute","GetAllParams","queryParams","GetRouteData","fragment","routeLabel","rootRoute","history","link","addRouterEvent","eventType","newEvent","navigationCancel","navigationStatus","reason","navigationEnd","urlAfterRedirects","navigationError","navigationStart","VisitedRoute","routeSelector","routeParamsSelector","lazyRouteParamsSelector","routeParamSelector","defaultValue","routeParamIntSelector","Token","expired","expiresIn","expiresInDate","t","setSeconds","getSeconds","now","access_token","expirationDate","Window","windowWidthSmall","WindowResize","currentUserSelector","authenticatedSelector","user","authenticated","configSelector","windowSelector","w","windowHeightSelector","window","windowHeight","windowWidthSelector","AuthenticatedGuard","authenticated$","canActivate","DumbComponent","requestState","inErrorState","inSuccessState","removeSubscriptions","addSubscription","subscription","subscriptions","flashErrorMessage","duration","toErrorState","setTimeout","resetRequestState","flashSuccessMessage","toSucessState","form","FormComponent","valid","markAsSubmitted","markAsTouched","SmartComponent","dispatchAndSubscribe","f1","f2","Config","ViewConfig","Question","Questions","AnswerQuestions","questions","answers","question","AnswerQuestion","answerData","answer","answerQuestions","QuestionsModel","TreeItem","parentId","treeId","Tree","_treeItems","FindParent","FindParentOrder","sortOrder","treeItem","_activeId","_activeIndex","getIndexById","getIdByIndex","getNext","activeIndex","getPrevious","previous","treeItems","trees","subitems","subtrees","tree","getItemByIndex","getItemById","getNextId","getPreviousId","User","CurrentUser","token","UserRoles","Login","ResetPassword","StorageActions","initStore","localStore","sessionStore","INIT_STORE","ActionStore","lastAction","Storage","StorageService","storeKey","localStorage","getItem","sessionStorage","localStorageMapper","sessionStorageMapper","localStorageActions","sessionStorageActions","initLocalStore","initSessionStore","ls","ss","inLocalStorage","inSessionStorage","storeLocal","filteredState","serializedState","stringify","setItem","storeSession","STORE_KEY","StorageEffects","state$","UPDATE_LOCAL_STORAGE","UPDATE_SESSION_STORAGE","withLatestFrom","storageServiceFactory","provideStorage","StorageModule","StoreModule","reducers","NgrxStoreModule","forFeatures","featureName","reducer","errors","decoratedProperty","outlets","activatedOutlets","skip$","take$","term$","descriptor","parameterIndex","propertyName","derived","baseCtors","baseCtor","getOwnPropertyNames","derivedCtor","dest","sources","TypeError","sources_1","tslib_1.__values","sources_1_1","source","flattenKeys","parents","pathToRoot","l","toFixed","el","styleProp","defaultView","ownerDocument","getComputedStyle","getPropertyValue","letter","toUpperCase","currentValue","previousValue","prop","dateFrom","dateTo","dateCheck","toLocaleDateString","check","fromState","dState","overriddenName","newLineIndex","strArray","retObj","currentKey","formValue","h","apiBaseUrl"],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LibraryService {\n\n  constructor() { }\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'iu-library',\n  template: `\n    <p>\n      library works!\n    </p>\n  `,\n  styles: []\n})\nexport class LibraryComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { trigger, state, style, transition, animate } from '@angular/animations';\r\n\r\n@Component({\r\n  selector: 'iu-accordion',\r\n  template: `<div class=\"accordion\">\r\n  <div class=\"trigger-wrapper\" (click)=\"onClickTrigger()\" [class.active]=\"active\">\r\n    <ng-content select=\".accordion-trigger\"></ng-content>\r\n  </div>\r\n  <div class=\"content-wrapper\" [@toggle]=\"opened ? 'show' : 'hide'\" (@toggle.start)=\"onStart($event)\" (@toggle.done)=\"onDone($event)\">\r\n    <ng-content select=\".accordion-content\"></ng-content>\r\n  </div>\r\n</div>`,\r\n  styles: [`.trigger-wrapper{position:relative;padding:0}.trigger-wrapper.active{cursor:pointer}.content-wrapper{overflow:hidden;clear:both}.mat-icon{position:absolute;right:2%;top:25%;color:#fff;font-size:32px;height:50%;font-weight:700}`],\r\n  animations: [\r\n    trigger('toggle', [\r\n      state('*', style({ height: '0px' })),\r\n      state('show', style({ height: '*' })),\r\n      state('hide', style({ height: '0px' })),\r\n      transition('show <=> hide', [\r\n        animate('300ms ease-out')\r\n      ])\r\n    ])\r\n  ]\r\n})\r\nexport class AccordionComponent implements OnInit {\r\n\r\n  @Input() active = true;\r\n  @Input() opened = true;\r\n  @Input() showArrow = false;\r\n  @Output() closeStart = new EventEmitter();\r\n  @Output() closeDone = new EventEmitter();\r\n  @Output() openStart = new EventEmitter();\r\n  @Output() openDone = new EventEmitter();\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  toggle() {\r\n    this.opened = !this.opened;\r\n  }\r\n\r\n  open() {\r\n    this.opened = true;\r\n  }\r\n\r\n  close() {\r\n    this.opened = false;\r\n  }\r\n\r\n  onStart(e: any) {\r\n    if (this.opened) {\r\n      this.openStart.emit();\r\n    } else {\r\n      this.closeStart.emit();\r\n    }\r\n  }\r\n\r\n  onDone(e: any) {\r\n    if (this.opened) {\r\n      this.openDone.emit();\r\n    } else {\r\n      this.closeDone.emit();\r\n    }\r\n  }\r\n\r\n  onClickTrigger() {\r\n    if (this.active) {\r\n      this.toggle();\r\n    }\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FlexLayoutModule } from '@angular/flex-layout';\r\nimport { RouterModule } from '@angular/router';\r\nimport 'hammerjs';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule,\r\n    FlexLayoutModule,\r\n  ],\r\n  declarations: [],\r\n  exports: [\r\n    CommonModule,\r\n    RouterModule,\r\n    FlexLayoutModule,\r\n  ]\r\n})\r\nexport class SharedModule { }\r\n","import { NgModule } from '@angular/core';\r\n\r\nimport { AccordionComponent } from './accordion.component';\r\nimport { SharedModule } from '../../shared/shared.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    SharedModule,\r\n  ],\r\n  declarations: [\r\n    AccordionComponent,\r\n  ],\r\n  exports: [\r\n    AccordionComponent,\r\n  ]\r\n})\r\nexport class AccordionModule { }\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export class Address {\r\n    firstName = '';\r\n    lastName = '';\r\n    streetAddress = '';\r\n    address2 = '';\r\n    city = '';\r\n    state = '';\r\n    stateId = 45;\r\n    zipCode = 0;\r\n    metadata: Metadata = {\r\n        streetAddress: {},\r\n        address2: {},\r\n        city: {},\r\n        stateId: {},\r\n        zipCode: {}\r\n    };\r\n\r\n    get cityStateZip(): string {\r\n        return this.hasCityStateZip ?\r\n            `${this.city}, ${this.state} ${this.zipCode} ` : '';\r\n    }\r\n\r\n    set cityStateZip(value: string) {\r\n    }\r\n\r\n    get fullName(): string {\r\n        return this.firstName && this.lastName ? `${this.firstName} ${this.lastName}` : '';\r\n    }\r\n\r\n    set fullName(value: string) {\r\n    }\r\n\r\n    get hasAddress(): boolean {\r\n        return this.hasStreetAddress && this.hasCityStateZip;\r\n    }\r\n\r\n    get hasCityStateZip(): boolean {\r\n        return this.city !== '' && (this.state !== '' || this.stateId !== 0) && this.zipCode !== 0;\r\n    }\r\n\r\n    get hasStreetAddress(): boolean {\r\n        return this.streetAddress !== '';\r\n    }\r\n\r\n}\r\n\r\nexport class Alert {\r\n    message = '';\r\n    type: 'ERROR' | 'SUCCESS';\r\n}\r\n\r\nexport class Coordinates {\r\n    row = 0;\r\n    column = 0;\r\n}\r\n\r\nexport interface Dictionary<T> {\r\n    [id: string]: T;\r\n}\r\n\r\nexport class Dimensions {\r\n    height = 0;\r\n    width = 0;\r\n    rows = 0;\r\n    columns = 0;\r\n\r\n    get approxRatio(): number {\r\n        return this.rows / this.columns;\r\n    }\r\n\r\n    get ratio(): number {\r\n        return this.height / this.width;\r\n    }\r\n\r\n}\r\n\r\nexport class Email {\r\n    id = 0;\r\n    bcc = '';\r\n    body = '';\r\n    cc = '';\r\n    failed = '';\r\n    from = '';\r\n    sent = false;\r\n    sentDate: Date = new Date();\r\n    subject = '';\r\n    to = '';\r\n    createdById = null;\r\n    createdDate: Date = new Date();\r\n\r\n    createdBy: any;\r\n    attachments = [];\r\n}\r\n\r\nexport const EMAIL_REGEX = /^[a-zA-Z0-9.!#$%&*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/;\r\n\r\nexport class Filters {\r\n    skip = 0;\r\n    sortBy = '';\r\n    take = 0;\r\n}\r\n\r\nexport type Func<T, TResult> = (item: T) => TResult;\r\n\r\nexport interface HasId {\r\n    id: string | number;\r\n}\r\n\r\nexport interface HasMetadata {\r\n    metadata: Metadata;\r\n}\r\n\r\nexport class Image {\r\n    src = '';\r\n    orientation: 'h' | 'v';\r\n    height = 0;\r\n    width = 0;\r\n\r\n    get horizontal(): boolean {\r\n        return this.orientation === 'h';\r\n    }\r\n\r\n    get vertical(): boolean {\r\n        return this.orientation === 'v';\r\n    }\r\n\r\n    get colspan() {\r\n        return this.vertical ? 1 : 1;\r\n    }\r\n\r\n    get rowspan() {\r\n        return this.vertical ? 2 : 1;\r\n    }\r\n}\r\n\r\nexport class Metadata {\r\n    controls?: string[] = [];\r\n    ignore?: string[] = [];\r\n    label ?= '';\r\n    name ?= '';\r\n    value?: any;\r\n    [key: string]: any;\r\n}\r\n\r\nexport enum MetadataType {\r\n    CLASS,\r\n    METHOD,\r\n    PROPERTY,\r\n    PARAMETER,\r\n    STATIC_METHOD,\r\n    STATIC_PROPERTY\r\n}\r\n\r\nexport class PropertyMetadata<T> {\r\n    ignore?: string[] = [];\r\n    label ?= '';\r\n    name ?= '';\r\n    value?: T;\r\n}\r\n\r\nexport class QueryItem {\r\n    label = '';\r\n    value: any;\r\n}\r\n\r\nexport class QueryModel<T> {\r\n\r\n    userId = 0;\r\n    accountId = 0;\r\n    fields: string[] = [];\r\n    filterBy: (x: T) => boolean;\r\n    filters: string[] = [];\r\n    groupBy: (x: T) => any;\r\n    groups: string[] = [];\r\n    include: (x: T) => any;\r\n    map: (x: T) => any;\r\n    orderBy: (x: T) => any;\r\n    params = {};\r\n    skip = 0;\r\n    sort: string[] = [];\r\n    take = 0;\r\n    term = '';\r\n\r\n    get hasParams(): boolean {\r\n        return this.totalParams > 0;\r\n    }\r\n\r\n    get keys(): string[] {\r\n        return Object.keys(new QueryModel<T>());\r\n    }\r\n\r\n    get totalParams(): number {\r\n        return Object.keys(this.params).length;\r\n    }\r\n\r\n    static AppendQueryString(query: QueryModel<any>): string {\r\n        const obj = QueryModel.BuildQueryObject(query);\r\n        return Object.keys(obj).reduce((acc, key) => {\r\n            const str = obj[key];\r\n            return str ? QueryModel.AppendToQueryString(acc, str) : acc;\r\n        }, '');\r\n    }\r\n\r\n    static AppendToQueryString(path: string, str: string): string {\r\n        return path ? `${path}&${str}` : str;\r\n    }\r\n\r\n    static BuildQueryString(query: QueryModel<any>): string {\r\n        const path = QueryModel.AppendQueryString(query);\r\n        return path ? `?${path}` : '';\r\n    }\r\n\r\n    static BuildQueryObject(query: QueryModel<any>): any {\r\n        return Object.assign({\r\n            skip: QueryModel.QuerySkip(query),\r\n            take: QueryModel.QueryTake(query),\r\n            term: QueryModel.QueryTerm(query)\r\n        }, QueryModel.QueryParams(query));\r\n    }\r\n\r\n    static FormatDate(date: Date): string {\r\n        const d = new Date(date);\r\n        let month = '' + (d.getMonth() + 1);\r\n        let day = '' + d.getDate();\r\n        const year = d.getFullYear();\r\n\r\n        if (month.length < 2) {\r\n            month = '0' + month;\r\n        }\r\n        if (day.length < 2) {\r\n            day = '0' + day;\r\n        }\r\n\r\n        return [year, month, day].join('-');\r\n    }\r\n\r\n    static ParseQuery(queryString) {\r\n        const query = {};\r\n        const pairs = (queryString[0] === '?' ? queryString.substr(1) : queryString).split('&');\r\n        for (let i = 0; i < pairs.length; i++) {\r\n            const pair = pairs[i].split('=');\r\n            query[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1] || '');\r\n        }\r\n        return query;\r\n    }\r\n\r\n    static QueryParams(query: QueryModel<any>): any {\r\n        return Object.keys(query.params)\r\n            .reduce((acc, key) => Object.assign({}, acc, { [key]: `${key}=${query.params[key]}` }), {});\r\n    }\r\n\r\n    static QuerySkip(query: QueryModel<any>): string {\r\n        return query.skip ? `skip=${query.skip}` : '';\r\n    }\r\n\r\n    static QueryTake(query: QueryModel<any>): string {\r\n        return query.take ? `take=${query.take}` : '';\r\n    }\r\n\r\n    static QueryTerm(query: QueryModel<any>): string {\r\n        return query.term ? `term=${query.term}` : '';\r\n    }\r\n\r\n    get queryParams(): any {\r\n        return QueryModel.QueryParams(this);\r\n    }\r\n\r\n    get queryString(): string {\r\n        return QueryModel.BuildQueryString(this);\r\n    }\r\n\r\n    get queryObject(): any {\r\n        return QueryModel.BuildQueryObject(this);\r\n    }\r\n\r\n    get querySkip(): string {\r\n        return this.skip ? `skip=${this.skip}` : '';\r\n    }\r\n\r\n    get queryTake(): string {\r\n        return this.take ? `take=${this.take}` : '';\r\n    }\r\n\r\n    get queryTerm(): string {\r\n        return this.term ? `term=${this.term}` : '';\r\n    }\r\n}\r\n\r\nexport class Search<T> {\r\n    query: QueryModel<T> = new QueryModel<T>();\r\n    results: T[] = [];\r\n    total = 0;\r\n}\r\n\r\nexport class StyleModel {\r\n    backgroundColor: string;\r\n    border: string;\r\n    borderRadius: number | string;\r\n    color: string;\r\n    cursor: string;\r\n    display: string;\r\n    fontSize: number | string;\r\n    height: number | string;\r\n    lineHeight: number | string;\r\n    padding: number | string;\r\n    paddingTop: number | string;\r\n    paddingBottom: number | string;\r\n    paddingLeft: number | string;\r\n    paddingRight: number | string;\r\n    textDecoration: string;\r\n    width: number;\r\n\r\n    get styles(): any {\r\n        const s = {};\r\n        if (this.backgroundColor) { s['backgroundColor'] = this.backgroundColor; }\r\n        if (this.border) { s['border'] = this.border; }\r\n        if (this.borderRadius) { s['borderRadius.px'] = this.borderRadius; }\r\n        if (this.color) { s['color'] = this.color; }\r\n        if (this.cursor) { s['color'] = this.cursor; }\r\n        if (this.display) { s['display'] = this.display; }\r\n        if (this.fontSize) { s['fontSize'] = this.fontSize; }\r\n        if (this.height) { s['height.px'] = this.height; }\r\n        if (this.lineHeight) { s['line-height.px'] = this.lineHeight; }\r\n        if (this.padding) { s['padding.px'] = this.padding; }\r\n        if (this.paddingTop) { s['padding-top.px'] = this.paddingTop; }\r\n        if (this.paddingBottom) { s['padding-bottom.px'] = this.paddingBottom; }\r\n        if (this.paddingLeft) { s['padding-left.px'] = this.paddingLeft; }\r\n        if (this.paddingRight) { s['padding-right.px'] = this.paddingRight; }\r\n        if (this.textDecoration) { s['textDecoration'] = this.textDecoration; }\r\n        if (this.width) { s['width.px'] = this.width; }\r\n        return s;\r\n    }\r\n}\r\n\r\nexport interface Type<T> extends Function { new(...args: any[]): T; }\r\n\r\nexport interface TypeConstructor<T> {\r\n    new(): T;\r\n}\r\n","import { Dimensions, Image, Coordinates } from '../../shared/models';\r\n\r\nexport class Tile {\r\n    id = 0;\r\n    cellHeight = 0;\r\n    cellWidth = 0;\r\n    color = '#fff';\r\n    name = '';\r\n    src = '';\r\n    text = '';\r\n\r\n    _coordinates: Coordinates = new Coordinates();\r\n    _dimensions: Dimensions = new Dimensions();\r\n    _image: Image = new Image();\r\n\r\n    get coordinates(): Coordinates {\r\n        return this._coordinates || new Coordinates();\r\n    }\r\n\r\n    set coordinates(value: Coordinates) {\r\n        this._coordinates = value;\r\n    }\r\n\r\n    get dimensions(): Dimensions {\r\n        return this._dimensions || new Dimensions();\r\n    }\r\n\r\n    set dimensions(value: Dimensions) {\r\n        this._dimensions = value;\r\n    }\r\n\r\n    get image(): Image {\r\n        return this._image || new Image();\r\n    }\r\n\r\n    set image(value: Image) {\r\n        this._image = value;\r\n    }\r\n\r\n    get height(): number {\r\n        return this.rows * this.cellHeight;\r\n    }\r\n\r\n    get width(): number {\r\n        return this.columns * this.cellWidth;\r\n    }\r\n\r\n    get imageSrc(): string {\r\n        return this.image.src;\r\n    }\r\n\r\n    get imageHeight(): number {\r\n        return this.image.height * this.scale;\r\n    }\r\n\r\n    get imageWidth(): number {\r\n        return this.image.width * this.scale;\r\n    }\r\n\r\n    get rows(): number {\r\n        return this.dimensions.rows;\r\n    }\r\n\r\n    get columns(): number {\r\n        return this.dimensions.columns;\r\n    }\r\n\r\n    get positionTop(): number {\r\n        return this.startRow * this.cellHeight;\r\n    }\r\n\r\n    get positionLeft(): number {\r\n        return this.startColumn * this.cellWidth;\r\n    }\r\n\r\n    get approxRatio(): number {\r\n        return this.rows * this.cellHeight / this.columns * this.cellWidth;\r\n    }\r\n\r\n    get ratio(): number {\r\n        return this.dimensions.ratio;\r\n    }\r\n\r\n    get scale(): number {\r\n        return this.heightScale >= this.widthScale ? this.heightScale : this.widthScale;\r\n    }\r\n\r\n    get heightScale(): number {\r\n        return (this.rows * this.cellHeight) / this.image.height;\r\n    }\r\n\r\n    get widthScale(): number {\r\n        return (this.columns * this.cellWidth) / this.image.width;\r\n    }\r\n\r\n    get startRow(): number {\r\n        return this.coordinates.row;\r\n    }\r\n\r\n    get startColumn(): number {\r\n        return this.coordinates.column;\r\n    }\r\n\r\n}\r\n","import { SimpleChanges } from '@angular/core';\r\n\r\nimport { Metadata, Dictionary, TypeConstructor, HasMetadata } from './models';\r\nimport { Action } from '../store/models';\r\n\r\n/**\r\n * @param derivedCtor The clas Constructor\r\n * @param baseCtor The mixins to apply\r\n * Example Usage: applyMixins(UniversityProfessor, [Employee, Researcher])\r\n */\r\nexport function applyDecorators(derived: any, baseCtors: any[]) {\r\n    baseCtors.forEach(baseCtor => {\r\n        Object.getOwnPropertyNames(baseCtor.prototype).forEach(name => {\r\n            derived[name] = baseCtor.prototype[name];\r\n        });\r\n    });\r\n}\r\n\r\n/**\r\n * @param derivedCtor The clas Constructor\r\n * @param baseCtor The mixins to apply\r\n * Example Usage: applyMixins(UniversityProfessor, [Employee, Researcher])\r\n */\r\nexport function applyMixins(derivedCtor: any, baseCtors: any[]) {\r\n    baseCtors.forEach(baseCtor => {\r\n        Object.getOwnPropertyNames(baseCtor.prototype).forEach(name => {\r\n            derivedCtor.prototype[name] = baseCtor.prototype[name];\r\n        });\r\n    });\r\n}\r\n\r\n/**\r\n * Find distinct elements in the union of 2 arrays.\r\n * @param array1\r\n * @param array2\r\n */\r\nexport function arrayUnion(array1, array2) {\r\n    const a = [...array1, ...array2];\r\n    for (let i = 0; i < a.length; ++i) {\r\n        for (let j = i + 1; j < a.length; ++j) {\r\n            if (a[i] === a[j]) {\r\n                a.splice(j--, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    return a;\r\n}\r\n\r\nexport function assignProps(target: any, props: Dictionary<any>) {\r\n    Object.keys(props).forEach(key => {\r\n        if (target[key]) {\r\n            target[key] = props[key];\r\n        }\r\n    });\r\n}\r\n\r\nexport function build<T>(ctor: TypeConstructor<T>, ...args): T {\r\n    const instance = new ctor();\r\n    return args.reduce((acc, next) => {\r\n        let ret;\r\n        try {\r\n            ret = Object.assign(acc, next);\r\n        } catch (e) {\r\n            console.warn(e);\r\n            ret = acc;\r\n        }\r\n        finally {\r\n            return ret;\r\n        }\r\n    }, instance);\r\n}\r\n\r\nexport function compareDates(a: Date, b: Date) {\r\n    return new Date(b).getTime() - new Date(a).getTime();\r\n}\r\n\r\nexport function compareNumbers(a: number, b: number) {\r\n    return a - b;\r\n}\r\n\r\nexport function compareStrings(a: string, b: string) {\r\n    const x = a.toLowerCase();\r\n    const y = b.toLowerCase();\r\n    if (x < y) {\r\n        return -1;\r\n    } else if (x > y) {\r\n        return 1;\r\n    }\r\n    return 0;\r\n}\r\n\r\nexport function distinct(arr: any[], key = ''): any[] {\r\n    return key ? arr.reduce((acc, x) => acc.findIndex(y => y[key] === x[key]) === -1 ? [...acc, x] : acc, [])\r\n        : arr.reduce((acc, x) => acc.indexOf(x) === -1 ? [...acc, x] : acc, []);\r\n}\r\n\r\nexport function equals(x1: any, x2: any): boolean {\r\n\r\n    // check whether x1 and x2 have the same type\r\n    if (typeof (x1) !== typeof (x2)) {\r\n        return false;\r\n    }\r\n\r\n    // check whether x1 and x2 are both null or both undefined\r\n    if ((x1 === null && x2 === null) || (x1 === undefined && x2 === undefined)) {\r\n        return true;\r\n    }\r\n\r\n    // account for non-matching null and undefined values\r\n    if (((x1 === null || x1 === undefined) && x2 !== null && x2 !== undefined)\r\n        || ((x2 === null || x2 === undefined) && x1 !== null && x1 !== undefined)) {\r\n        return false;\r\n    }\r\n\r\n    // compare two arrays\r\n    if (Array.isArray(x1) && Array.isArray(x2) && x1.length === x2.length) {\r\n\r\n        return x1.findIndex((x, index) => !equals(x, x2[index])) === -1 ? true : false;\r\n    }\r\n\r\n    // compare two objects\r\n    if (x1 && typeof (x1) === 'object' && typeof (x2) === 'object'\r\n        && Object.keys(x1).length === Object.keys(x2).length\r\n        && Object.keys(x2).length === arrayUnion(Object.keys(x1), Object.keys(x2)).length) {\r\n\r\n        return Object.keys(x1).findIndex(key => !equals(x1[key], x2[key])) === -1;\r\n    }\r\n\r\n    // compare two primitives with the same type\r\n    return x1 === x2;\r\n}\r\n\r\n/**\r\n * Extends an object with the *enumerable* and *own* properties of one or more source objects,\r\n * similar to Object.assign.\r\n *\r\n * @param dest The object which will have properties copied to it.\r\n * @param sources The source objects from which properties will be copied.\r\n */\r\nexport function extendObject(dest: any, ...sources: any[]): any {\r\n    if (dest == null) {\r\n        throw TypeError('Cannot convert undefined or null to object');\r\n    }\r\n\r\n    for (const source of sources) {\r\n        if (source != null) {\r\n            for (const key in source) {\r\n                if (source.hasOwnProperty(key)) {\r\n                    dest[key] = source[key];\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    return dest;\r\n}\r\n\r\nexport function falsy(value: any): boolean {\r\n    return value === null || value === 0 || value === '' || value === undefined;\r\n}\r\n\r\n/**\r\n   * Remove problematic or undesired store properties.\r\n   */\r\nexport function filterState(obj: any): any {\r\n    return removeCycles(removeProps(obj));\r\n}\r\n\r\nexport function findMetadata(ctor: TypeConstructor<HasMetadata | any>) {\r\n    const instance = new ctor();\r\n    return instance && instance.metadata ? instance.metadata : new Metadata();\r\n}\r\n\r\nexport function findSchoolYear(): string {\r\n    const date = new Date();\r\n    const year = date.getFullYear();\r\n    const month = date.getMonth();\r\n    return month >= 7 ? `${year}-${year + 1}` : `${year - 1}-${year}`;\r\n}\r\n\r\n\r\nexport function flattenKeys(obj: Object, parents: string[]): any[] {\r\n    return Object.keys(obj).reduce((acc, key) => {\r\n        const pathToRoot = [...parents, key];\r\n        const val = obj[key];\r\n        if (!Array.isArray(val) && Object.keys(val).length > 0) {\r\n            return [...acc, ...flattenKeys(val, pathToRoot)];\r\n        }\r\n        return [...acc, ...pathToRoot];\r\n    }, []);\r\n}\r\n\r\nexport function formatPhoneNumber(number = ''): string {\r\n    if (!number) {\r\n        return '000-000-0000';\r\n    }\r\n    const l = number.length;\r\n    return number && (l === 7 || l === 10) ?\r\n        l === 7 ? format7DigitPhoneNumber(number)\r\n            : format10DigitPhoneNumber(number)\r\n        : '000-000-0000';\r\n}\r\n\r\nexport function format7DigitPhoneNumber(number = '0000000'): string {\r\n    const first3 = number.substring(0, 3);\r\n    const last4 = number.substring(3, 7);\r\n    return `${first3} -${last4} `;\r\n}\r\n\r\nexport function format10DigitPhoneNumber(number = '0000000000'): string {\r\n    const first3 = number.substring(0, 3);\r\n    const last7 = format7DigitPhoneNumber(number.substring(3, 10));\r\n    return `${first3} -${last7} `;\r\n}\r\n\r\nexport function formatPrice(total: number): string {\r\n    const dollars = total.toFixed(2).replace(/./g, function (c, i, a) {\r\n        return i && c !== '.' && ((a.length - i) % 3 === 0) ? ',' + c : c;\r\n    });\r\n    return `$${dollars}`;\r\n}\r\n\r\nexport function getTypeNameForDebugging(type: any): string {\r\n    return type['name'] || typeof type;\r\n}\r\n\r\nexport function getAllProps(obj: any): string[] {\r\n    const mapped = obj['metadata'] && obj['metadata']['include'] && Array.isArray(obj['metadata']['include']) ?\r\n        obj['metadata']['include'].reduce((acc, key) => Object.assign({}, acc, { [key]: obj[key] }), {}) : obj;\r\n\r\n    if (obj['metadata'] && obj['metadata']['exclude'] && Array.isArray(obj['metadata']['exclude'])) {\r\n        obj['metadata']['exclude'].forEach(key => {\r\n            delete mapped[key];\r\n        });\r\n    }\r\n\r\n    return [...Object.keys(mapped), ...getGetters(mapped)];\r\n}\r\n\r\nexport function getGetters(obj: any): string[] {\r\n    return Object.keys(obj.constructor.prototype).filter(name => {\r\n        return typeof Object.getOwnPropertyDescriptor(obj.constructor.prototype, name)['get'] === 'function';\r\n    });\r\n}\r\n\r\nexport function getKeyValues(model: any): any {\r\n    const keys = getAllProps(model);\r\n    return model['metadata'] && model['metadata']['include'] ?\r\n        toArray(model['metadata']['include']).reduce((acc, key) => Object.assign({}, acc, { [key]: model[key] }), {})\r\n        : keys.reduce((acc, key) => Object.assign({}, acc, { [key]: model[key] }), {});\r\n}\r\n\r\nexport function getSetters(obj: any): string[] {\r\n    return Object.keys(obj.prototype).filter(name => {\r\n        return typeof Object.getOwnPropertyDescriptor(obj.prototype, name)['set'] === 'function';\r\n    });\r\n}\r\n\r\n// Gist adapted from: https://gist.github.com/cms/369133\r\nexport function getStyle(el: Element, styleProp: string): string {\r\n    let value;\r\n    const defaultView = el.ownerDocument.defaultView;\r\n    // W3C standard way:\r\n    if (defaultView && defaultView.getComputedStyle) {\r\n        // sanitize property name to css notation (hypen separated words eg. font-Size)\r\n        styleProp = styleProp.replace(/([A-Z])/g, '-$1').toLowerCase();\r\n        return defaultView.getComputedStyle(el, null).getPropertyValue(styleProp);\r\n    } else if (el['currentStyle']) { // IE\r\n        // sanitize property name to camelCase\r\n        styleProp = styleProp.replace(/\\-(\\w)/g, function (str, letter) {\r\n            return letter.toUpperCase();\r\n        });\r\n        value = el['currentStyle'][styleProp];\r\n        return value;\r\n    }\r\n\r\n    return '';\r\n}\r\n\r\nexport function getValue(model: any): any {\r\n    if (model === null || typeof (model) === 'string' || typeof (model) === 'string' || model instanceof Date) {\r\n        return model;\r\n    }\r\n    const keys = getAllProps(model);\r\n    const props = keys.filter(key => key !== 'metadata' && !ignoreKey(model, key))\r\n        .map(key => {\r\n            const obj = {};\r\n            obj[key] = model[key] && typeof model[key] === 'object' ?\r\n                (Array.isArray(model[key]) ?\r\n                    (model[key].length > 0 ?\r\n                        model[key].map(x => (typeof x === 'object' ? getValue(x) : x)) : [])\r\n                    : getValue(model[key])) : model[key];\r\n            return obj;\r\n        });\r\n    return props.reduce((acc, val) => {\r\n        return Object.assign({}, acc, val);\r\n    }, {});\r\n}\r\n\r\nexport function guid() {\r\n    function s4() {\r\n        return Math.floor((1 + Math.random()) * 0x10000)\r\n            .toString(16)\r\n            .substring(1);\r\n    }\r\n    return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\r\n        s4() + '-' + s4() + s4() + s4();\r\n}\r\n\r\nexport function hasChanged(changes: SimpleChanges, key: string, props: string[]) {\r\n    const currentValue = changes[key] && changes[key].currentValue ? changes[key].currentValue : {};\r\n    const previousValue = changes[key] && changes[key].previousValue ? changes[key].previousValue : {};\r\n    return props.reduce((acc, prop) => {\r\n        return acc ? true : currentValue[prop] !== previousValue[prop];\r\n    }, false);\r\n}\r\n\r\nexport function idChanged(changes: SimpleChanges, key: string) {\r\n    const newId = changes[key].currentValue ? changes[key].currentValue['id'] || 0 : 0;\r\n    const oldId = changes[key].previousValue ? changes[key].previousValue['id'] || 0 : 0;\r\n    return newId !== oldId;\r\n}\r\n\r\nexport function ignoreKey(model: any, key: string): boolean {\r\n    if (model['metadata'] && model['metadata']['ignore']) {\r\n        return inArray(model['metadata']['ignore'], key);\r\n    }\r\n    return false;\r\n}\r\n\r\nexport function inArray(arr: any[], val: any) {\r\n    return arr.filter(item => item === val).length > 0;\r\n}\r\n\r\nexport function inArrayByKey(arr: any[], val: any, key: string | number) {\r\n    return arr.findIndex(item => item[key] === val) !== -1;\r\n}\r\n\r\nexport function integerArray(n: number): number[] {\r\n    return Array.from(Array(n).keys());\r\n}\r\n\r\nexport function isBetweenDates(dateFrom, dateTo, dateCheck) {\r\n    const d1 = dateFrom.toLocaleDateString().split('/');\r\n    const d2 = dateTo.toLocaleDateString().split('/');\r\n    const c = dateCheck.toLocaleDateString().split('/');\r\n\r\n    const from = new Date(d1[2], toInt(d1[1]) - 1, d1[0]);  // -1 because months are from 0 to 11\r\n    const to = new Date(d2[2], toInt(d2[1]) - 1, d2[0]);\r\n    const check = new Date(c[2], toInt(c[1]) - 1, c[0]);\r\n\r\n    return (check >= from && check <= to);\r\n}\r\n\r\n/**\r\n * Detects cycles in an object.\r\n * @param obj\r\n */\r\nexport function isCyclic(obj: any) {\r\n    const seenObjects: any[] = [];\r\n\r\n    const detect = (x: any) => {\r\n        if (x && typeof x === 'object') {\r\n            if (seenObjects.indexOf(x) !== -1) {\r\n                return true;\r\n            }\r\n            seenObjects.push(x);\r\n            for (const key in x) {\r\n                if (x.hasOwnProperty(key) && detect(x[key])) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n\r\n    return detect(obj);\r\n}\r\n\r\n/**\r\n * @param fromState The last state object from the store\r\n * @param dState A partial class containing all properties that have changed wrt fromState\r\n * @return The current/updated state of the application (toState)\r\n */\r\nexport function nextState(fromState: any, dState: any): any {\r\n    const toState: any = Object.assign({}, fromState, dState);\r\n    return toState;\r\n}\r\n\r\nexport function positiveIntegerArray(n: number): number[] {\r\n    return integerArray(n).map(x => x + 1);\r\n}\r\n\r\n/**\r\n * Remove store props that contain cycles.\r\n */\r\nexport function removeCycles(obj: any): any {\r\n    if (obj && typeof obj === 'object') {\r\n        for (const key in obj) {\r\n            if (obj.hasOwnProperty(key) && isCyclic(obj[key])) {\r\n                delete obj[key];\r\n            }\r\n        }\r\n    }\r\n    return obj;\r\n}\r\n\r\n/**\r\n * Remove any props that should not appear in the store.\r\n */\r\nexport function removeProps(obj: any): any {\r\n    return obj;\r\n}\r\n\r\nexport function serialize(model: any) {\r\n    if (Array.isArray(model)) {\r\n        return model.map(x => serialize(x));\r\n    }\r\n    if (model.serialize && typeof model.serialize === 'function') {\r\n        return serialize(model.serialize());\r\n    }\r\n    if (model === null || typeof (model) === 'number' || typeof (model) === 'string' || model instanceof Date) {\r\n        return model;\r\n    }\r\n    const keys = getAllProps(model);\r\n    if (keys.length === 0) {\r\n        return model;\r\n    }\r\n    return keys.reduce((acc, key) => {\r\n        let val = null;\r\n        if (model[key] !== null && typeof (model[key]) === 'object' && !(model[key] instanceof Date)) {\r\n            if (model[key].serialize && typeof model[key].serialize === 'function') {\r\n                val = model[key].serialize();\r\n            } else {\r\n                val = serialize(model[key]);\r\n            }\r\n        } else {\r\n            val = model[key];\r\n        }\r\n        return Object.assign({}, acc, {\r\n            [key]: val\r\n        });\r\n    }, {});\r\n}\r\n\r\nexport function stringify(token: any): string {\r\n    if (typeof token === 'string') {\r\n        return token;\r\n    }\r\n\r\n    if (token == null) {\r\n        return '' + token;\r\n    }\r\n\r\n    if (token.overriddenName) {\r\n        return `${token.overriddenName}`;\r\n    }\r\n\r\n    if (token.name) {\r\n        return `${token.name}`;\r\n    }\r\n\r\n    const res = token.toString();\r\n    const newLineIndex = res.indexOf('\\n');\r\n    return newLineIndex === -1 ? res : res.substring(0, newLineIndex);\r\n}\r\n\r\nexport function str2CharCode(str: string): number {\r\n    return str.charCodeAt(0);\r\n}\r\n\r\nexport function str2Id(str: string): number {\r\n    const charCodes = str ? str.split('').reduce((acc, x) => `${acc}${str2CharCode(x)}`, '') : '';\r\n    return toInt(charCodes);\r\n}\r\n\r\nexport function str2int(str: string): number {\r\n    return parseInt(str, 10);\r\n}\r\n\r\nexport function strArray2Id(strArray: string[]) {\r\n    const str = strArray.reduce((acc, x) => `${acc}${x}`, '');\r\n    return str2Id(str);\r\n}\r\n\r\nexport function throwException(errorName: string, errorMessage: string) {\r\n    throw {\r\n        name: errorName,\r\n        level: 'Show Stopper',\r\n        message: errorMessage,\r\n        htmlMessage: 'Error detected. Please contact the <a href=\\'mailto:agendamanager@caiu.com\\'>system administrator</a>.',\r\n        toString: function () { return errorName + ': ' + errorMessage; }\r\n    };\r\n}\r\n\r\nexport function throwNotImplementedException() {\r\n    throwException('Not Implemented', 'Not Implemented');\r\n}\r\n\r\nexport function toArray(val: any): any[] {\r\n    return val ? (Array.isArray(val) ? val : [val]) : [];\r\n}\r\n\r\nexport function toInt(val: string | number): number {\r\n    return val && val.toString ? str2int(val.toString()) : 0;\r\n}\r\n\r\nexport function toPayload(action: Action): any {\r\n    return action ? action.payload : null;\r\n}\r\n\r\nexport function toPx(n: number): string {\r\n    return `${n}px`;\r\n}\r\n\r\nexport function truthy(value: any): boolean {\r\n    return !falsy(value);\r\n}\r\n\r\nexport function tryCast(obj: any, type: any): any {\r\n    const retObj = new type();\r\n    for (const key in obj) {\r\n        if (typeof (retObj[key]) !== 'undefined') {\r\n            retObj[key] = obj[key];\r\n        }\r\n    }\r\n    return retObj;\r\n}\r\n\r\nexport function valueChanged(changes: SimpleChanges, key = '') {\r\n    return key ? changes[key].currentValue !== changes[key].previousValue\r\n        : Object.keys(changes).reduce((acc, currentKey) => {\r\n            return acc ? true : changes[currentKey].currentValue !== changes[currentKey].previousValue;\r\n        }, false);\r\n}\r\n\r\nexport function valueEquals(value, formValue) {\r\n    return equals(getValue(value), formValue);\r\n}\r\n","import { Tile } from '../tile/tile.model';\r\nimport { Image, Dimensions, Coordinates } from '../../shared/models';\r\nimport { integerArray, positiveIntegerArray } from '../../shared/utils';\r\n\r\nexport class Collage {\r\n    canvasHeight = 0;\r\n    canvasWidth = 0;\r\n    maxColumns = 4;\r\n    maxRows = 4;\r\n    totalColumns = 0;\r\n    totalRows = 0;\r\n    _images: Image[] = [];\r\n    _tiles: Tile[] = [];\r\n\r\n    static AvailableColumns(startRow: number, startColumn: number, maxColumns: number, cells: boolean[][]): number {\r\n        const totalColumns = cells[0].length;\r\n        return Math.max(...positiveIntegerArray(maxColumns)\r\n            .map(k => k <= maxColumns && startColumn + k <= totalColumns && cells[startRow] && cells[startRow][startColumn + k] ? k : 1));\r\n    }\r\n\r\n    static AvailableRows(startRow: number, startColumn: number, maxRows: number, cells: boolean[][]): number {\r\n        const totalRows = cells[0].length;\r\n        return Math.max(...positiveIntegerArray(maxRows)\r\n            .map(k => k <= maxRows && startRow + k <= totalRows && cells[startRow + k] && cells[startRow + k][startColumn] ? k : 1));\r\n    }\r\n\r\n    static AvailableDimensions(\r\n        dimensions: Dimensions[],\r\n        startRow: number,\r\n        startColumn: number,\r\n        maxRows: number,\r\n        maxColumns: number,\r\n        cells: boolean[][]): Dimensions[] {\r\n        const availableRows = Collage.AvailableRows(startRow, startColumn, maxRows, cells);\r\n        const availableColumns = Collage.AvailableColumns(startRow, startColumn, maxColumns, cells);\r\n        return dimensions.filter(x => x.rows <= availableRows && x.columns <= availableColumns);\r\n    }\r\n\r\n    static Build(images: Image[], canvasHeight, canvasWidth, totalRows = 0, totalColumns = 0, maxRows = 0, maxColumns = 0): Collage {\r\n        const collage = Object.assign(new Collage(), {\r\n            canvasHeight,\r\n            canvasWidth,\r\n            totalRows,\r\n            totalColumns,\r\n            maxRows,\r\n            maxColumns\r\n        });\r\n        collage.images = images;\r\n        return collage;\r\n    }\r\n\r\n    static BuildEmptyCells(rows: number, cols: number): boolean[][] {\r\n        return integerArray(rows).map(x => integerArray(cols).map(y => true));\r\n    }\r\n\r\n    static BuildTiles(collage: Collage): Tile[] {\r\n        return collage.images.map((image, index) => {\r\n            const dimensions = Collage.FindDimensions(image.height, image.width, collage.tileDimensions, collage.cellHeight, collage.cellWidth);\r\n            return Object.assign(new Tile(), {\r\n                image,\r\n                dimensions,\r\n                id: index + 1,\r\n                cellHeight: collage.cellHeight,\r\n                cellWidth: collage.cellWidth\r\n            });\r\n        }\r\n        );\r\n    }\r\n\r\n    static ChooseTileId(id: number, tileIds: number[]): number[] {\r\n        return [...tileIds.filter(x => x !== id), id];\r\n    }\r\n\r\n    static FindCoordinates(index: number, totalRows: number, totalColumns: number): Coordinates {\r\n        const remainder = (index + totalColumns) % totalColumns;\r\n        return {\r\n            row: (index - remainder) / totalColumns,\r\n            column: remainder\r\n        };\r\n    }\r\n\r\n    static FindCoordinatesNested(\r\n        index: number, totalRows: number, totalColumns: number, startRow: number, startColumn: number): Coordinates {\r\n        const coordinates = Collage.FindCoordinates(index, totalRows, totalColumns);\r\n        coordinates.column += startColumn;\r\n        coordinates.row += startRow;\r\n        return coordinates;\r\n    }\r\n\r\n    static FindDimensions(height: number, width: number, dimensions: Dimensions[], cellHeight: number, cellWidth: number): Dimensions {\r\n        const filtered = dimensions.filter(x => x.rows * cellHeight <= height && x.columns * cellWidth <= width);\r\n        const ordered = filtered.sort((a, b) => Math.abs(height / width - a.ratio) - Math.abs(height / width - b.ratio));\r\n        const closestMatch = ordered[0];\r\n        const rows = closestMatch && closestMatch.rows ? closestMatch.rows : [];\r\n        const columns = closestMatch && closestMatch.columns ? closestMatch.columns : [];\r\n        return Object.assign(new Dimensions(), {\r\n            rows,\r\n            columns,\r\n            height,\r\n            width\r\n        });\r\n    }\r\n\r\n    static FindNextTileId(tiles: Tile[], tileIds: number[], dimensions: Dimensions): number {\r\n        const nextMatch = Collage.FindNextMatchId(tiles, tileIds, dimensions);\r\n        return nextMatch || Collage.FindBestMatchId(tiles, tileIds, dimensions);\r\n    }\r\n\r\n    static FindBestMatchId(tiles: Tile[], tileIds: number[], dimensions: Dimensions): number {\r\n        let diff = 999;\r\n        return tileIds.reduce((acc, id) => {\r\n            const tile = tiles.find(x => x.id === id);\r\n            diff = Math.abs(tile.ratio - dimensions.ratio);\r\n            return acc === 0 || diff < acc ? id : acc;\r\n        }, 0);\r\n    }\r\n\r\n    static FindNextMatchId(tiles: Tile[], tileIds: number[], dimensions: Dimensions): number {\r\n        return tileIds.reduce((acc, id) => {\r\n            if (acc !== 0) {\r\n                return acc;\r\n            }\r\n            const tile = tiles.find(x => x.id === id);\r\n            return tile && tile.rows === dimensions.rows && tile.columns === dimensions.columns ? tile.id : 0;\r\n        }, 0);\r\n    }\r\n\r\n    static FindBestMatch(tiles: Tile[], tileIds: number[], dimensions: Dimensions): Tile {\r\n        const id = Collage.FindBestMatchId(tiles, tileIds, dimensions);\r\n        return tiles.find(x => x.id === id);\r\n    }\r\n\r\n    static FindNextTile(tiles: Tile[], tileIds: number[], dimensions: Dimensions[]): Tile {\r\n        return tileIds.reduce((acc, id) => {\r\n            if (acc === null || acc.id === 0) {\r\n                const tile = tiles.find(x => x.id === id);\r\n                const dim = dimensions.find(x => tile.rows === x.rows && tile.columns === x.columns);\r\n                return dim ? Object.assign(new Tile(), tile, {\r\n                    dimensions: Object.assign(new Dimensions(), tile.dimensions, {\r\n                        rows: dim.rows,\r\n                        columns: dim.columns\r\n                    })\r\n                }) : null;\r\n            }\r\n            return acc;\r\n        }, new Tile()) || Collage.FindBestMatch(tiles, tileIds, dimensions[0]);\r\n    }\r\n\r\n    static GetTileDimensions(cellHeight: number, cellWidth: number, maxRows: number, maxColumns: number): Dimensions[] {\r\n        return positiveIntegerArray(maxRows).reduce((acc, x) => {\r\n            const dimensions = positiveIntegerArray(maxColumns)\r\n                .map(y => Object.assign(new Dimensions(), {\r\n                    rows: x,\r\n                    columns: y,\r\n                    height: x * cellHeight,\r\n                    width: y * cellWidth\r\n                }));\r\n            return [...acc, ...dimensions];\r\n        }, []);\r\n    }\r\n\r\n    static MarkCellsAsFilled(cells: boolean[][], startIndex: number, dimensions: Dimensions, totalRows: number, totalColumns: number): boolean[][] {\r\n        const start = Collage.FindCoordinates(startIndex, totalRows, totalColumns);\r\n        return integerArray(dimensions.rows * dimensions.columns).reduce((acc, i) => {\r\n            const coordinates = Collage.FindCoordinatesNested(i, dimensions.rows, dimensions.columns, start.row, start.column);\r\n            cells[coordinates.row][coordinates.column] = false;\r\n            return cells;\r\n        }, cells);\r\n    }\r\n\r\n    static PositionTiles(tiles: Tile[], collage: Collage): Tile[] {\r\n        let cells = Collage.BuildEmptyCells(collage.totalRows, collage.totalColumns);\r\n        let tileIds = tiles.map(x => x.id);\r\n\r\n        return integerArray(collage.totalCells).reduce((acc, i) => {\r\n            const coordinates = Collage.FindCoordinates(i, collage.totalRows, collage.totalColumns);\r\n            if (!cells[coordinates.row][coordinates.column]) {\r\n                return acc;\r\n            }\r\n            const availableDimensions = Collage.AvailableDimensions(collage.tileDimensions, coordinates.row, coordinates.column, collage.maxRows, collage.maxColumns, cells);\r\n            const tile = Collage.FindNextTile(tiles, tileIds, availableDimensions);\r\n            tile.coordinates = coordinates;\r\n            cells = Collage.MarkCellsAsFilled(cells, i, tile.dimensions, collage.totalRows, collage.totalColumns);\r\n            tileIds = Collage.ChooseTileId(tile.id, tileIds);\r\n            return [...acc, tile];\r\n        }, []);\r\n    }\r\n\r\n    get cellHeight(): number {\r\n        return this.canvasHeight / this.totalRows;\r\n    }\r\n\r\n    get cellWidth(): number {\r\n        return this.canvasWidth / this.totalColumns;\r\n    }\r\n\r\n    get emptyCells(): boolean[][] {\r\n        return Collage.BuildEmptyCells(this.totalRows, this.totalColumns);\r\n    }\r\n\r\n    get images(): Image[] {\r\n        return this._images;\r\n    }\r\n\r\n    set images(value: Image[]) {\r\n        this._images = value;\r\n        this.tiles = Collage.BuildTiles(this);\r\n    }\r\n\r\n    get tileDimensions(): Dimensions[] {\r\n        return Collage.GetTileDimensions(this.cellHeight, this.cellWidth, this.maxRows, this.maxColumns);\r\n    }\r\n\r\n    get tiles(): Tile[] {\r\n        return this._tiles;\r\n    }\r\n\r\n    set tiles(value: Tile[]) {\r\n        this._tiles = Collage.PositionTiles(value, this);\r\n    }\r\n\r\n    get totalCells(): number {\r\n        return this.totalRows * this.totalColumns;\r\n    }\r\n\r\n}\r\n","import { Component, OnInit, ChangeDetectionStrategy, Input } from '@angular/core';\r\n\r\nimport { Collage } from './collage.model';\r\nimport { Tile } from '../tile/tile.model';\r\nimport { Image } from '../../shared/models';\r\n\r\n@Component({\r\n  selector: 'iu-collage',\r\n  template: `<iu-tile *ngFor=\"let tile of tiles\" [tile]=\"tile\"></iu-tile>`,\r\n  styles: [``],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class CollageComponent implements OnInit {\r\n\r\n  @Input() images: Image[] = [];\r\n  @Input() canvasHeight = 0;\r\n  @Input() canvasWidth = 0;\r\n  @Input() totalRows = 0;\r\n  @Input() totalColumns = 0;\r\n  @Input() maxRows = 0;\r\n  @Input() maxColumns = 0;\r\n\r\n  constructor() { }\r\n\r\n  get collage(): Collage {\r\n    return this.canvasHeight > 0 && this.canvasWidth > 0 ?\r\n      Collage.Build(this.images, this.canvasHeight, this.canvasWidth, this.totalRows, this.totalColumns, this.maxRows, this.maxColumns)\r\n      : new Collage();\r\n  }\r\n\r\n  get tiles(): Tile[] {\r\n    return this.collage.tiles;\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","import { Component, OnInit, Input, ChangeDetectionStrategy } from '@angular/core';\r\n\r\nimport { Tile } from './tile.model';\r\n\r\n@Component({\r\n  selector: 'iu-tile',\r\n  template: `<div fxLayout fxLayoutAlign=\"center center\" class=\"tile\" [style.position]=\"position\" [style.top.px]=\"positionTop\" [style.left.px]=\"positionLeft\"\r\n  [style.background-color]=\"backgroundColor\" [style.height.px]=\"height\" [style.width.px]=\"width\">\r\n  <img [src]=\"imageSrc\" [style.height.px]=\"imageHeight\" [style.width.px]=\"imageWidth\">\r\n</div>\r\n`,\r\n  styles: [``],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class TileComponent implements OnInit {\r\n\r\n  @Input() tile: Tile = new Tile();\r\n\r\n  constructor() { }\r\n\r\n  get backgroundColor(): string {\r\n    return '';\r\n  }\r\n\r\n  get height(): number {\r\n    return this.tile.height;\r\n  }\r\n\r\n  get imageHeight(): number {\r\n    return this.tile.imageHeight;\r\n  }\r\n\r\n  get imageSrc(): string {\r\n    return this.tile.image.src;\r\n  }\r\n\r\n  get imageWidth(): number {\r\n    return this.tile.imageWidth;\r\n  }\r\n\r\n  get position(): 'absolute' | 'relative' | 'fixed' {\r\n    return 'absolute';\r\n  }\r\n\r\n  get positionLeft(): number {\r\n    return this.tile.positionLeft;\r\n  }\r\n\r\n  get positionTop(): number {\r\n    return this.tile.positionTop;\r\n  }\r\n\r\n  get width(): number {\r\n    return this.tile.width;\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\n\r\nimport { TileComponent } from './tile.component';\r\nimport { SharedModule } from '../../shared/shared.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    SharedModule,\r\n  ],\r\n  declarations: [\r\n    TileComponent,\r\n  ],\r\n  exports: [\r\n    TileComponent,\r\n  ]\r\n})\r\nexport class TileModule { }\r\n","import { NgModule } from '@angular/core';\r\n\r\nimport { CollageComponent } from './collage.component';\r\nimport { TileModule } from '../tile/tile.module';\r\nimport { SharedModule } from '../../shared/shared.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    SharedModule,\r\n    TileModule,\r\n  ],\r\n  declarations: [\r\n    CollageComponent,\r\n  ],\r\n  exports: [\r\n    CollageComponent,\r\n  ]\r\n})\r\nexport class CollageModule { }\r\n","import { build, toInt } from './utils';\r\n\r\nexport class DateRange {\r\n    startDate: Date = new Date();\r\n    endDate: Date = new Date();\r\n}\r\n\r\nexport class DateHelper {\r\n\r\n    static MonthNames = [\r\n        'January',\r\n        'February',\r\n        'March',\r\n        'April',\r\n        'May',\r\n        'June',\r\n        'July',\r\n        'August',\r\n        'September',\r\n        'October',\r\n        'November',\r\n        'December'\r\n    ];\r\n\r\n    static BuildStartTime(startDate: Date, startHours: number, startMinutes: number, startMeridian: 'AM' | 'PM'): Date {\r\n        const startTime = new Date(startDate);\r\n        const hours = startMeridian === 'AM' ? startHours : startHours + 12;\r\n        startTime.setHours(hours);\r\n        startTime.setMinutes(startMinutes);\r\n        return startTime;\r\n    }\r\n\r\n    static BuildEndTime(startTime: Date, dHours: number, dMinutes: number): Date {\r\n        const endTime = new Date(startTime);\r\n        endTime.setHours(endTime.getHours() + dHours);\r\n        endTime.setMinutes(endTime.getMinutes() + dMinutes);\r\n        return endTime;\r\n    }\r\n\r\n    static FormatDate(date: Date): string {\r\n        const d = new Date(date);\r\n        const month = '' + (d.getMonth() + 1);\r\n        const day = '' + d.getDate();\r\n        const year = d.getFullYear();\r\n\r\n        return month && day && year ? [month, day, year].join('/') : null;\r\n    }\r\n\r\n    static FormatDateDashes(date: Date): string {\r\n        const d = new Date(date);\r\n        let month = '' + (d.getMonth() + 1);\r\n        let day = '' + d.getDate();\r\n        const year = d.getFullYear();\r\n\r\n        if (month.length < 2) {\r\n            month = '0' + month;\r\n        }\r\n        if (day.length < 2) {\r\n            day = '0' + day;\r\n        }\r\n\r\n        return [year, month, day].join('-');\r\n    }\r\n\r\n    static FormatDateSlashes(date: Date): string {\r\n        const d = new Date(date);\r\n        let month = '' + (d.getMonth() + 1);\r\n        let day = '' + d.getDate();\r\n        const year = d.getFullYear();\r\n\r\n        if (month.length < 2) {\r\n            month = '0' + month;\r\n        }\r\n        if (day.length < 2) {\r\n            day = '0' + day;\r\n        }\r\n\r\n        return [month, day, year].join('/');\r\n    }\r\n\r\n    static TimeAgo(date: Date): string {\r\n        if (!date) {\r\n            return '';\r\n        }\r\n        const seconds = Math.floor(((new Date()).getTime() - (new Date(date)).getTime()) / 1000);\r\n    \r\n        let interval = Math.floor(seconds / 31536000);\r\n    \r\n        if (interval > 1) {\r\n            return interval + ' years';\r\n        }\r\n        interval = Math.floor(seconds / 2592000);\r\n        if (interval > 1) {\r\n            return interval + ' months';\r\n        }\r\n        interval = Math.floor(seconds / 86400);\r\n        if (interval > 1) {\r\n            return interval + ' days';\r\n        }\r\n        interval = Math.floor(seconds / 3600);\r\n        if (interval > 1) {\r\n            return interval + ' hours';\r\n        }\r\n        interval = Math.floor(seconds / 60);\r\n        if (interval > 1) {\r\n            return interval + ' minutes';\r\n        }\r\n        return Math.floor(seconds) + ' seconds';\r\n    }\r\n\r\n    static ToMonthName(d: Date): string {\r\n        const date = new Date(d);\r\n        return DateHelper.MonthNames[date.getMonth()];\r\n    }\r\n\r\n    static ToMonthNumber(d: Date): number {\r\n        const date = new Date(d);\r\n        return date.getMonth() + 1;\r\n    }\r\n\r\n    static ToMonthNumberFromMonthYear(monthYear: string): number {\r\n        const month = monthYear.substr(monthYear.length - 2);\r\n        return toInt(month) - 1;\r\n    }\r\n\r\n    static ToMonthNumberFromMonthYearName(monthYear: string): number {\r\n        const parts = monthYear.split(/\\s*,\\s*/);\r\n        const month = DateHelper.MonthNumbers[parts[0]];\r\n        return month;\r\n    }\r\n\r\n    static ToMonthYear(d: Date): string {\r\n        const date = new Date(d);\r\n        const monthNumber = DateHelper.ToMonthNumber(date);\r\n        const month = monthNumber < 10 ? `0${monthNumber}` : monthNumber;\r\n        return `${date.getFullYear()}-${month}`;\r\n    }\r\n\r\n    static ToMonthYearName(d: Date): string {\r\n        const date = new Date(d);\r\n        const month = DateHelper.ToMonthName(date);\r\n        const year = date.getFullYear();\r\n        return month && year ? `${month} ${year}` : '';\r\n    }\r\n\r\n    static ToYearNumberFromMonthYear(monthYear: string): number {\r\n        const year = monthYear.substring(0, 4);\r\n        return toInt(year);\r\n    }\r\n\r\n    static FromMonthYear(monthYear: string): Date {\r\n        const year = DateHelper.ToYearNumberFromMonthYear(monthYear);\r\n        const month = DateHelper.ToMonthNumberFromMonthYear(monthYear);\r\n        return year && month ? new Date(year, month) : new Date();\r\n    }\r\n\r\n    static IsDate(date: any): boolean {\r\n        return Object.prototype.toString.call(date) === '[object Date]';\r\n    }\r\n\r\n    static IsValidDate(date: any): boolean {\r\n        const dateWrapper = new Date(date);\r\n        return !isNaN(dateWrapper.getDate());\r\n    }\r\n\r\n    static get Today(): Date {\r\n        return new Date();\r\n    }\r\n\r\n    static get Month(): number {\r\n        return DateHelper.Today.getMonth();\r\n    }\r\n\r\n    static get MonthNumbers(): any {\r\n        return DateHelper.MonthNames.reduce((acc, x, i) => Object.assign({}, acc, { [x]: i }));\r\n    }\r\n\r\n    static get Year(): number {\r\n        return DateHelper.Today.getFullYear();\r\n    }\r\n\r\n    static get NextSchoolYear(): number {\r\n        return DateHelper.Month < 7 ? DateHelper.Year : DateHelper.Year + 1;\r\n    }\r\n\r\n    static get NextSchoolYearStartDate(): Date {\r\n        return new Date(DateHelper.SchoolYearStart(DateHelper.NextSchoolYear));\r\n    }\r\n\r\n    static get PreviousSchoolYear(): number {\r\n        return DateHelper.Month < 7 ? DateHelper.Year : DateHelper.Year + 1;\r\n    }\r\n\r\n    static get PreviousSchoolYearEndDate(): Date {\r\n        return new Date(DateHelper.SchoolYearEnd(DateHelper.PreviousSchoolYear));\r\n    }\r\n\r\n    static get FutureDate(): Date {\r\n        const date = DateHelper.Today;\r\n        return DateHelper.AddDays(date, 100000);\r\n    }\r\n\r\n    static get PastDate(): Date {\r\n        const date = DateHelper.Today;\r\n        return DateHelper.SubtractDays(date, 100000);\r\n    }\r\n\r\n    static AddDays(d: Date, days: number): Date {\r\n        const date = new Date(d);\r\n        date.setDate(date.getDate() + days);\r\n        return date;\r\n    }\r\n\r\n    static SubtractDays(d: Date, days: number): Date {\r\n        const date = new Date(d);\r\n        date.setDate(date.getDate() - days);\r\n        return date;\r\n    }\r\n\r\n    static BuildDate(year: number, month: number, day: number): Date {\r\n        const date = new Date();\r\n        date.setFullYear(year);\r\n        date.setMonth(month);\r\n        date.setDate(day);\r\n        return date;\r\n    }\r\n\r\n    static DateChanged(d1: Date, d2: Date): boolean {\r\n        const date1 = new Date(d1);\r\n        const date2 = new Date(d2);\r\n        return date1.getDate() !== date2.getDate() || date1.getMonth() !== date2.getMonth() || date1.getFullYear() !== date2.getFullYear();\r\n    }\r\n\r\n    static IsSameDay(d1: Date, d2: Date): boolean {\r\n        return !DateHelper.DateChanged(d1, d2);\r\n    }\r\n\r\n    static get YearStartDate(): Date {\r\n        if (DateHelper.Month < 7) {\r\n            return DateHelper.BuildDate(DateHelper.Year - 1, 6, 1);\r\n        } else {\r\n            return DateHelper.BuildDate(DateHelper.Year, 6, 1);\r\n        }\r\n    }\r\n\r\n    static get PreviousYearStartDate(): Date {\r\n        if (DateHelper.Month < 7) {\r\n            return DateHelper.BuildDate(DateHelper.Year - 2, 6, 1);\r\n        } else {\r\n            return DateHelper.BuildDate(DateHelper.Year - 1, 6, 1);\r\n        }\r\n    }\r\n\r\n    static SchoolYearStart(year: number): Date {\r\n        return DateHelper.BuildDate(year, 6, 1);\r\n    }\r\n\r\n    static get YearEndDate(): Date {\r\n        if (DateHelper.Month < 7) {\r\n            return DateHelper.BuildDate(DateHelper.Year, 5, 30);\r\n        } else {\r\n            return DateHelper.BuildDate(DateHelper.Year + 1, 5, 30);\r\n        }\r\n    }\r\n\r\n    static get PreviousYearEndDate(): Date {\r\n        if (DateHelper.Month < 7) {\r\n            return DateHelper.BuildDate(DateHelper.Year - 1, 5, 30);\r\n        } else {\r\n            return DateHelper.BuildDate(DateHelper.Year, 5, 30);\r\n        }\r\n    }\r\n\r\n    static SchoolYearEnd(year?: number): Date {\r\n        return DateHelper.BuildDate(year - 1, 5, 30);\r\n    }\r\n\r\n    static BuildDateRange(dateRangeId: number): DateRange {\r\n        let startDate: Date;\r\n        let endDate: Date;\r\n        switch (dateRangeId) {\r\n            case 0:\r\n                break;\r\n            case 1:\r\n                break;\r\n            case 2: // Today\r\n                startDate = DateHelper.Today;\r\n                endDate = startDate;\r\n                break;\r\n            case 3: // Next 15\r\n                startDate = DateHelper.Today;\r\n                endDate = DateHelper.AddDays(startDate, 15);\r\n                break;\r\n            case 4: // Next 30\r\n                startDate = DateHelper.Today;\r\n                endDate = DateHelper.AddDays(startDate, 30);\r\n                break;\r\n            case 5: // Next 60\r\n                startDate = DateHelper.Today;\r\n                endDate = DateHelper.AddDays(startDate, 60);\r\n                break;\r\n            case 6: // Previous 15\r\n                endDate = DateHelper.Today;\r\n                startDate = DateHelper.SubtractDays(endDate, 15);\r\n                break;\r\n            case 7: // Previous 30\r\n                endDate = DateHelper.Today;\r\n                startDate = DateHelper.SubtractDays(endDate, 30);\r\n                break;\r\n            case 8: // Previous 60\r\n                endDate = DateHelper.Today;\r\n                startDate = DateHelper.SubtractDays(endDate, 60);\r\n                break;\r\n            case 9: // School Year - Runs from July 1st Thru June 30th\r\n                startDate = DateHelper.YearStartDate;\r\n                endDate = DateHelper.YearEndDate;\r\n                break;\r\n            case 10: // Number of meetings = 10\r\n                startDate = DateHelper.Today;\r\n                endDate = DateHelper.FutureDate;\r\n                break;\r\n            case 11: // Previous School Year\r\n                startDate = DateHelper.PreviousYearStartDate;\r\n                endDate = DateHelper.PreviousYearEndDate;\r\n                break;\r\n        }\r\n        return build(DateRange, { startDate, endDate });\r\n    }\r\n}\r\n","import {\r\n  ChangeDetectionStrategy,\r\n  Component,\r\n  EventEmitter,\r\n  forwardRef,\r\n  Input,\r\n  OnInit,\r\n  Output,\r\n  ViewChild,\r\n} from '@angular/core';\r\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\r\nimport { MatDatepicker } from '@angular/material';\r\n\r\nimport { DateHelper } from '../../shared/date';\r\n\r\n\r\nexport const DATEPICKER_ACCESSOR: any = {\r\n  provide: NG_VALUE_ACCESSOR,\r\n  useExisting: forwardRef(() => DatepickerComponent),\r\n  multi: true\r\n};\r\n\r\n@Component({\r\n  selector: 'iu-datepicker',\r\n  template: `<mat-form-field>\r\n  <input matInput [placeholder]=\"placeholder\" [matDatepicker]=\"picker\" (blur)=\"onBlur(pickerInput)\" (change)=\"onChange(value)\"\r\n    [min]=\"min\" [max]=\"max\" [value]=\"value\" #pickerInput>\r\n  <mat-datepicker-toggle matSuffix [for]=\"picker\"></mat-datepicker-toggle>\r\n  <mat-datepicker #picker [startAt]=\"startAt\" [startView]=\"startView\" [touchUi]=\"touchUi\" (selectedChanged)=\"changeSelected($event)\"></mat-datepicker>\r\n</mat-form-field>`,\r\n  styles: [`.mat-input-container{float:left}`],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  providers: [DATEPICKER_ACCESSOR]\r\n})\r\nexport class DatepickerComponent implements ControlValueAccessor, OnInit {\r\n\r\n  @Input() min: Date;\r\n  @Input() max: Date;\r\n  @Input() placeholder = 'Choose a date';\r\n  @Input() startAt: Date;\r\n  @Input() startView: 'month' | 'year' = 'month';\r\n  @Input() touchUi;\r\n  @Output() selectedChanged = new EventEmitter<Date>();\r\n  @ViewChild('picker') datepicker: MatDatepicker<Date>;\r\n  private onModelChange: Function;\r\n  private onTouch: Function;\r\n  _value: Date;\r\n  focused: Date;\r\n\r\n  constructor() { }\r\n\r\n  get value(): Date {\r\n    return this._value;\r\n  }\r\n\r\n  @Input()\r\n  set value(val: Date) {\r\n    this._value = val;\r\n  }\r\n\r\n  registerOnChange(fn: Function) {\r\n    this.onModelChange = fn;\r\n  }\r\n\r\n  registerOnTouched(fn: Function) {\r\n    this.onTouch = fn;\r\n  }\r\n\r\n  writeValue(value: Date) {\r\n    this.value = value;\r\n  }\r\n\r\n  onChange(value: Date) {\r\n    this.value = value;\r\n    if (this.onModelChange) {\r\n      this.onModelChange(value);\r\n    }\r\n  }\r\n\r\n  onBlur(input: any) {\r\n    const date = new Date(input.value);\r\n    if (DateHelper.IsValidDate(date)) {\r\n      this.changeSelected(date);\r\n    } else {\r\n      input.value = DateHelper.FormatDate(this.value);\r\n    }\r\n  }\r\n\r\n  get id() {\r\n    return this.datepicker.id;\r\n  }\r\n\r\n  get opened() {\r\n    return this.datepicker.opened;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.startAt = this.value;\r\n  }\r\n\r\n  changeSelected(date: Date) {\r\n    this.onChange(date);\r\n    this.selectedChanged.emit(date);\r\n  }\r\n\r\n  close() {\r\n    this.datepicker.close();\r\n  }\r\n\r\n  open() {\r\n    this.datepicker.open();\r\n  }\r\n\r\n}\r\n","import { ChangeDetectionStrategy, Component, forwardRef, Input, ViewChild, Output, EventEmitter, ChangeDetectorRef } from '@angular/core';\r\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\r\n\r\nimport { DatepickerComponent } from '../datepicker.component';\r\nimport { DateRange } from '../../../shared/date';\r\nimport { build } from '../../../shared/utils';\r\n\r\nexport const DATERANGE_ACCESSOR: any = {\r\n  provide: NG_VALUE_ACCESSOR,\r\n  useExisting: forwardRef(() => DaterangeComponent),\r\n  multi: true\r\n};\r\n\r\n@Component({\r\n  selector: 'iu-daterange',\r\n  template: `<div class=\"daterange\">\r\n  <div class=\"start-date\" [class.date]=\"!inline\" [class.inline-date]=\"inline\">\r\n    <label class=\"lbl-date iu-primary\">{{ startLabel }}:</label>\r\n    <iu-datepicker #startDate (selectedChanged)=\"changeStartDate($event)\" [value]=\"startDateValue\"></iu-datepicker>\r\n  </div>\r\n  <div class=\"end-date\" [class.date]=\"!inline\" [class.inline-date]=\"inline\">\r\n    <label class=\"lbl-date iu-primary\">{{ endLabel }}:</label>\r\n    <iu-datepicker #endDate (selectedChanged)=\"changeEndDate($event)\" [value]=\"endDateValue\"></iu-datepicker>\r\n  </div>\r\n</div>\r\n`,\r\n  styles: [`.daterange{display:inline-block;line-height:18px;padding:0 10px;border-radius:3px}.daterange .date{display:flex;padding:6px}.daterange .inline-date{display:inline-flex;padding:0}.daterange .inline-date.end-date{margin-left:32px}.daterange .lbl-date{width:76px;display:inline-block;font-size:14px;padding-top:22px}`],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  providers: [DATERANGE_ACCESSOR]\r\n})\r\nexport class DaterangeComponent implements ControlValueAccessor {\r\n\r\n  @Input() inline = false;\r\n  @Input() min: Date;\r\n  @Input() max: Date;\r\n  @Input() startAt: Date;\r\n  @Input() startLabel = 'Start Date';\r\n  @Input() endLabel = 'End Date';\r\n  @Input() startView;\r\n  @Input() touchUi;\r\n  @Output() startDateChanged = new EventEmitter<Date>();\r\n  @Output() endDateChanged = new EventEmitter<Date>();\r\n  @ViewChild('startDate') startDatepicker: DatepickerComponent;\r\n  @ViewChild('endDate') endDatepicker: DatepickerComponent;\r\n  private onModelChange: Function;\r\n  private onTouch: Function;\r\n  _value: DateRange = new DateRange();\r\n  focused: DateRange = new DateRange();\r\n\r\n  constructor(private changeDetectorRef: ChangeDetectorRef) { }\r\n\r\n  get value(): DateRange {\r\n    return this._value;\r\n  }\r\n\r\n  @Input()\r\n  set value(val: DateRange) {\r\n    this._value = val;\r\n    if (this && this.changeDetectorRef && !this.changeDetectorRef['destroyed']) {\r\n      this.changeDetectorRef.detectChanges();\r\n    }\r\n  }\r\n\r\n  get startDateId() {\r\n    return this.startDatepicker.id;\r\n  }\r\n\r\n  get startDateOpened() {\r\n    return this.startDatepicker.opened;\r\n  }\r\n\r\n  get endDateId() {\r\n    return this.endDatepicker.id;\r\n  }\r\n\r\n  get endDateOpened() {\r\n    return this.endDatepicker.opened;\r\n  }\r\n\r\n  get startDateValue(): Date {\r\n    return this.value.startDate;\r\n  }\r\n\r\n  set startDateValue(value: Date) {\r\n    this.changeStartDate(value);\r\n  }\r\n\r\n  get endDateValue(): Date {\r\n    return this.value.endDate;\r\n  }\r\n\r\n  set endDateValue(value: Date) {\r\n    this.changeEndDate(value);\r\n  }\r\n\r\n  changeStartDate(date: Date) {\r\n    this.onChange(build(DateRange, {\r\n      endDate: this.value.endDate,\r\n      startDate: date\r\n    }));\r\n    this.startDateChanged.emit(date);\r\n  }\r\n\r\n  closeStartDate() {\r\n    this.startDatepicker.close();\r\n  }\r\n\r\n  openStateDate() {\r\n    this.startDatepicker.open();\r\n  }\r\n\r\n  changeEndDate(date: Date) {\r\n    this.onChange(build(DateRange, {\r\n      endDate: date,\r\n      startDate: this.value.startDate\r\n    }));\r\n    this.endDateChanged.emit(date);\r\n  }\r\n\r\n  closeEndDate() {\r\n    this.endDatepicker.close();\r\n  }\r\n\r\n  openEndDate() {\r\n    this.endDatepicker.open();\r\n  }\r\n\r\n  registerOnChange(fn: Function) {\r\n    this.onModelChange = fn;\r\n  }\r\n\r\n  registerOnTouched(fn: Function) {\r\n    this.onTouch = fn;\r\n  }\r\n\r\n  writeValue(value: DateRange) {\r\n    this.value = value;\r\n  }\r\n\r\n  onChange(value: DateRange) {\r\n    this.value = value;\r\n    if (this.onModelChange) {\r\n      this.onModelChange(value);\r\n    }\r\n  }\r\n\r\n  onBlur(value: DateRange) {\r\n  }\r\n\r\n  onFocus(value: DateRange) {\r\n    this.focused = value;\r\n    if (this.onTouch) {\r\n      this.onTouch();\r\n    }\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { MatDatepickerModule, MatNativeDateModule, MatInputModule } from '@angular/material';\r\n\r\nimport { DatepickerComponent } from './datepicker.component';\r\nimport { DaterangeComponent } from './daterange/daterange.component';\r\nimport { SharedModule } from '../../shared/shared.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    SharedModule,\r\n    MatDatepickerModule,\r\n    MatNativeDateModule,\r\n    MatInputModule,\r\n  ],\r\n  declarations: [\r\n    DatepickerComponent,\r\n    DaterangeComponent,\r\n  ],\r\n  exports: [\r\n    DatepickerComponent,\r\n    DaterangeComponent,\r\n  ]\r\n})\r\nexport class DatepickerModule { }\r\n","import { ViewContainerRef } from '@angular/core';\r\nimport { MatDialogConfig, DialogPosition, DialogRole } from '@angular/material';\r\n\r\nexport class DialogModel {\r\n    title = ' ';\r\n    actions: DialogAction[] = [];\r\n    /** Height of the dialog. */\r\n    height?: string;\r\n    /** Width of the dialog. */\r\n    width?: string;\r\n    /**\r\n     * Where the attached component should live in Angular's *logical* component tree.\r\n     * This affects what is available for injection and the change detection order for the\r\n     * component instantiated inside of the dialog. This does not affect where the dialog\r\n     * content will be rendered.\r\n     */\r\n    viewContainerRef?: ViewContainerRef;\r\n    /** The ARIA role of the dialog element. */\r\n    role?: DialogRole;\r\n    /** Custom class for the overlay pane. */\r\n    panelClass?: string;\r\n    /** Whether the dialog has a backdrop. */\r\n    hasBackdrop?= true;\r\n    /** Custom class for the backdrop, */\r\n    backdropClass?: string;\r\n    /** Whether the user can use escape or clicking outside to close a modal. */\r\n    disableClose?= false;\r\n    /** Position overrides. */\r\n    position?: DialogPosition;\r\n    /** Data being injected into the child component. */\r\n    data?: any;\r\n    /** Layout direction for the dialog's content. */\r\n    direction?: 'ltr' | 'rtl';\r\n\r\n    get config(): MatDialogConfig {\r\n        return {\r\n            viewContainerRef: this.viewContainerRef,\r\n            role: this.role,\r\n            panelClass: this.panelClass,\r\n            hasBackdrop: this.hasBackdrop,\r\n            backdropClass: this.backdropClass,\r\n            disableClose: this.disableClose,\r\n            width: this.width,\r\n            height: this.height,\r\n            position: this.position,\r\n            data: this.data,\r\n            direction: this.direction\r\n        };\r\n    }\r\n}\r\n\r\nexport class DialogAction {\r\n    value: any = null;\r\n    label = '';\r\n    color: 'primary' | 'accent' | 'warn' = 'accent';\r\n}\r\n","import { Component, Input, ViewEncapsulation } from '@angular/core';\r\n\r\nimport { DialogAction, DialogModel } from './dialog.model';\r\n\r\n@Component({\r\n  selector: 'iu-dialog',\r\n  template: `<mat-toolbar color=\"primary\" mat-dialog-title>\r\n  <span class=\"dialog-title\">\r\n    {{ title }}\r\n    <button *ngIf=\"showCloseIcon\" mat-button [mat-dialog-close]=\"null\">\r\n      <mat-icon>close</mat-icon>\r\n    </button>\r\n  </span>\r\n</mat-toolbar>\r\n<mat-dialog-content class=\"scrollable\">\r\n  <ng-content></ng-content>\r\n</mat-dialog-content>\r\n<mat-dialog-actions *ngIf=\"showActions && actions.length > 0\">\r\n  <button *ngFor=\"let action of actions\" mat-raised-button [mat-dialog-close]=\"action.value\" [style.width]=\"actionWidth\" [style.color]=\"action.color\">{{ action.label }}</button>\r\n</mat-dialog-actions>\r\n<mat-dialog-actions *ngIf=\"showCloseAction && actions.length === 0\">\r\n  <button mat-raised-button mat-dialog-close=\"close\" [style.width]=\"actionWidth\" [style.color]=\"defaultActionColor\">Close</button>\r\n</mat-dialog-actions>\r\n`,\r\n  styles: [`iu-dialog .mat-toolbar{margin:-24px -24px 0;width:calc(100% + 48px);min-height:32px}iu-dialog .mat-toolbar .dialog-title{position:relative;height:calc(100% - 8px);width:100%;margin-top:8px}iu-dialog .mat-toolbar .dialog-title button{cursor:pointer;position:absolute;right:0;top:-5px;border-radius:100%;height:42px;width:42px;min-width:36px}iu-dialog .mat-toolbar .dialog-title button:hover,iu-dialog .mat-toolbar .dialog-title button:hover mat-icon{font-weight:700}iu-dialog .mat-toolbar .dialog-title mat-icon{position:absolute;top:9px;right:8px;z-index:1}iu-dialog .mat-toolbar-row{height:48px}iu-dialog .mat-dialog-actions{margin-left:-24px;margin-right:-24px;color:#fff;padding:0}iu-dialog .mat-dialog-actions button{padding:12px 0}iu-dialog .mat-dialog-actions .mat-accent{color:#fff!important}`],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class DialogComponent {\r\n\r\n  @Input() model: DialogModel = new DialogModel();\r\n  @Input() showActions = true;\r\n  @Input() showCloseAction = false;\r\n  @Input() showCloseIcon = true;\r\n  @Input() defaultActionColor = 'accent';\r\n\r\n  constructor() { }\r\n\r\n  get actions(): DialogAction[] {\r\n    return this.model.actions;\r\n  }\r\n\r\n  get actionWidth(): string {\r\n    const actionsCount = Math.max(this.actions.length, 1);\r\n    return `${100 / actionsCount}%`;\r\n  }\r\n\r\n  get title(): string {\r\n    return this.model.title;\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { MatDialogModule, MatIconModule, MatToolbarModule } from '@angular/material';\r\n\r\nimport { DialogComponent } from './dialog.component';\r\nimport { SharedModule } from '../../shared/shared.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    SharedModule,\r\n    MatDialogModule,\r\n    MatIconModule,\r\n    MatToolbarModule,\r\n  ],\r\n  declarations: [\r\n    DialogComponent,\r\n  ],\r\n  exports: [\r\n    DialogComponent,\r\n  ]\r\n})\r\nexport class DialogModule { }\r\n","import { build } from '../../shared/utils';\r\n\r\nexport class FileUpload {\r\n    lastModified = 0;\r\n    lastModifiedDate: Date = new Date();\r\n    name = '';\r\n    size = 0;\r\n    type = '';\r\n    webkitRelativePath = '';\r\n    order?= 0;\r\n    readyState: 'EMPTY' | 'LOADING' | 'DONE' = 'EMPTY';\r\n    src = '';\r\n\r\n    static BuildFromFile(file: File): FileUpload {\r\n        return build(FileUpload, {\r\n            name: file.fileName,\r\n            size: file.fileSize,\r\n            type: file.mimeType,\r\n            src: file.src,\r\n            order: file.order\r\n        });\r\n    }\r\n\r\n    static GetReadyState(reader: FileReader) {\r\n        switch (reader.readyState) {\r\n            case 0:\r\n                return 'EMPTY';\r\n            case 1:\r\n                return 'LOADING';\r\n            case 2:\r\n                return 'DONE';\r\n            default:\r\n                return 'EMPTY';\r\n        }\r\n    }\r\n\r\n    get extension(): string {\r\n        return this.name.split('.').pop();\r\n    }\r\n\r\n    get isImage(): boolean {\r\n        return this.type.split('/')[0] === 'image';\r\n    }\r\n\r\n    get loading(): boolean {\r\n        return this.readyState === 'LOADING';\r\n    }\r\n\r\n    get file(): File {\r\n        return File.BuildFromFileUpload(this);\r\n    }\r\n}\r\n\r\nexport function getReadyState(reader: FileReader) {\r\n    switch (reader.readyState) {\r\n        case 0:\r\n            return 'EMPTY';\r\n        case 1:\r\n            return 'LOADING';\r\n        case 2:\r\n            return 'DONE';\r\n        default:\r\n            return 'EMPTY';\r\n    }\r\n}\r\n\r\nexport class File {\r\n\r\n    id = 0;\r\n    fileBinary: any[] = [];\r\n    fileExtension = '';\r\n    fileName = '';\r\n    fileSize = 0;\r\n    mimeType = '';\r\n    order = 0;\r\n\r\n    static BuildFromFileUpload(upload: FileUpload): File {\r\n        return build(File, {\r\n            fileBinary: upload.src.replace(File.GetSrcPrefix(upload.type), ''),\r\n            fileExtension: upload.extension,\r\n            fileName: upload.name,\r\n            fileSize: upload.size,\r\n            mimeType: upload.type,\r\n            order: upload.order\r\n        });\r\n    }\r\n\r\n    static GetImageBinarySrc(img: File | File[], defaultSrc = '') {\r\n        if (Array.isArray(img)) {\r\n            if (img.length > 0) {\r\n                return `data:${img[0].mimeType};base64,${img[0].fileBinary}`;\r\n            } else {\r\n                return defaultSrc;\r\n            }\r\n        }\r\n        return img && img.mimeType && img.fileBinary ? `data:${img.mimeType};base64,${img.fileBinary}` : defaultSrc;\r\n    }\r\n\r\n    static GetSrcPrefix(mimeType: string): string {\r\n        return `data:${mimeType};base64,`;\r\n    }\r\n\r\n    // get fileUpload(): FileUpload {\r\n    //     return FileUpload.BuildFromFile(this);\r\n    // }\r\n\r\n    get src(): string {\r\n        return File.GetImageBinarySrc(this);\r\n    }\r\n\r\n}","import { TypeConstructor } from './models';\r\nimport { build } from './utils';\r\n\r\nexport class Permutation<T> {\r\n    _timestamp: Date;\r\n\r\n    constructor(public order: OrderedItem<T>[]) {\r\n        this._timestamp = new Date();\r\n    }\r\n\r\n    get ranks(): OrderedItem<T>[] {\r\n        return this.order.sort((a, b) => a.order - b.order)\r\n            .map((x, index) => Object.assign(<OrderedItem<T>>{}, x, { rank: index + 1 }));\r\n    }\r\n\r\n    get timestamp(): Date {\r\n        return this._timestamp;\r\n    }\r\n}\r\n\r\nexport class OrderedItem<T> {\r\n    id: any;\r\n    order: number;\r\n    rank?: number;\r\n\r\n    constructor(public item: T) {\r\n    }\r\n}\r\n\r\nexport class Ordering<T> {\r\n\r\n    private _history: Permutation<T>[] = [];\r\n\r\n    constructor(private _items: T[], public ctor: TypeConstructor<T>, public orderKey: string, public idKey = 'id') {\r\n    }\r\n\r\n    get count(): number {\r\n        return this.items.length;\r\n    }\r\n\r\n    get history(): Permutation<T>[] {\r\n        return this._history;\r\n    }\r\n\r\n    get instance(): T {\r\n        return new this.ctor();\r\n    }\r\n\r\n    get items(): T[] {\r\n        return this._items.sort((a, b) => this.getItemOrder(a) - this.getItemOrder(b));\r\n    }\r\n\r\n    get maxIndex(): number {\r\n        return this.count === 0 ? 0 : Math.max(...this.order.map(x => x.order));\r\n    }\r\n\r\n    get order(): OrderedItem<T>[] {\r\n        return this.permutation.ranks;\r\n    }\r\n\r\n    get permutation(): Permutation<T> {\r\n        return new Permutation<T>(this.items.map(item => <OrderedItem<T>>{\r\n            id: this.getItemId(item),\r\n            order: this.getItemOrder(item)\r\n        }));\r\n    }\r\n\r\n    get nextPosition(): number {\r\n        return this.maxIndex + 1;\r\n    }\r\n\r\n    addItem(item: T): T[] {\r\n        return this.addItemAtPosition(item, this.nextPosition);\r\n    }\r\n\r\n    addItemAtPosition(item: T, pos: number): T[] {\r\n        const newItemId = this.getItemId(item);\r\n        return [...this.items, build(this.ctor, item, { order: pos })]\r\n            .map(x => {\r\n                const order = this.getItemOrder(x);\r\n                const id = this.getItemId(x);\r\n                return (order <= pos || id === newItemId) ? x : build(this.ctor, x, { order: order + 1 });\r\n            });\r\n    }\r\n\r\n    archive(items?: T[]) {\r\n        const permutation = items ? this.getPermutation(items) : this.permutation;\r\n        this._history = [...this._history, permutation];\r\n    }\r\n\r\n    getItemId(item: T): any {\r\n        return item[this.idKey];\r\n    }\r\n\r\n    getItemOrder(item: T): number {\r\n        return item[this.orderKey];\r\n    }\r\n\r\n    getPermutation(items: T[]): Permutation<T> {\r\n        return new Permutation(items.map(item => <OrderedItem<T>>{\r\n            id: this.getItemId(item),\r\n            order: this.getItemOrder(item)\r\n        }));\r\n    }\r\n\r\n    move(item: T, to: number): T[] {\r\n        const from = this.getItemOrder(item);\r\n        const itemId = this.getItemId(item);\r\n        if (to === from) {\r\n            return [...this.items];\r\n        } else if (to < from) {\r\n            return this.items.map(x => {\r\n                const order = this.getItemOrder(x);\r\n                const id = this.getItemId(x);\r\n                return id === itemId ? build(this.ctor, x, { order: to })\r\n                    : (order < to || order > from) ? x : build(this.ctor, x, { order: order + 1 });\r\n            });\r\n        } else { // to > from\r\n            return this.items.map(x => {\r\n                const order = this.getItemOrder(x);\r\n                const id = this.getItemId(x);\r\n                return id === itemId ? build(this.ctor, x, { order: to })\r\n                    : (order < from || order > to) ? x : build(this.ctor, x, { order: order - 1 });\r\n            });\r\n        }\r\n    }\r\n\r\n    moveDown(item: T): T[] {\r\n        return this.move(item, this.getItemOrder(item) + 1);\r\n    }\r\n\r\n    moveUp(item: T): T[] {\r\n        return this.move(item, this.getItemOrder(item) - 1);\r\n    }\r\n\r\n    removeItem(item: T): T[] {\r\n        return this.removeItemAtPosition(this.getItemOrder(item));\r\n    }\r\n\r\n    removeItemAtPosition(pos: number): T[] {\r\n        return this.items.filter(item => this.getItemOrder(item) !== pos)\r\n            .map(x => {\r\n                const order = this.getItemOrder(x);\r\n                return order < pos ? x : build(this.ctor, x, { order: order - 1 });\r\n            });\r\n    }\r\n\r\n    updateItems(items: T[]): void {\r\n        this.archive();\r\n        this._items = items;\r\n    }\r\n}\r\n","import {\r\n  Component,\r\n  Output,\r\n  EventEmitter,\r\n  forwardRef,\r\n  Input,\r\n  OnInit,\r\n  ViewEncapsulation,\r\n  ChangeDetectorRef\r\n} from '@angular/core';\r\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\r\nimport { BehaviorSubject } from 'rxjs';\r\n\r\nimport { FileUpload, getReadyState } from './file-upload.model';\r\nimport { Ordering } from '../../shared/ordering';\r\nimport { build, guid, equals } from '../../shared/utils';\r\n\r\nexport const FILE_UPLOAD_ACCESSOR: any = {\r\n  provide: NG_VALUE_ACCESSOR,\r\n  useExisting: forwardRef(() => FileUploadComponent),\r\n  multi: true\r\n};\r\n@Component({\r\n  selector: 'iu-file-upload',\r\n  template: `<div class=\"file-upload\">\r\n  <div class=\"box\" fxLayout=\"row\" fxLayoutAlign=\"center end\">\r\n    <p id=\"dragdrop-message\" *ngIf=\"showMultiple\">\r\n      <strong>Choose files</strong>\r\n      <span class=\"dragndrop\"> or drag them here</span>.\r\n    </p>\r\n    <input id=\"file-upload\" *ngIf=\"showMultiple\" type=\"file\" (change)=\"onInputChange($event)\" [id]=\"id\" multiple/>\r\n    <p id=\"dragdrop-message\" *ngIf=\"!multiple\">\r\n      <strong>Choose a file</strong>\r\n      <span class=\"dragndrop\"> or drag it here</span>.\r\n    </p>\r\n    <input id=\"file-upload\" *ngIf=\"!multiple\" type=\"file\" (change)=\"onInputChange($event)\" [id]=\"id\" />\r\n    <label [for]=\"id\" class=\"custom-file-upload\">\r\n      <figure>\r\n        <mat-icon>cloud_upload</mat-icon>\r\n      </figure>\r\n    </label>\r\n  </div>\r\n  <iu-uploads *ngIf=\"multiple\" [uploads]=\"uploads\" [ordered]=\"ordered\" (moveUp)=\"moveUp($event)\" (moveDown)=\"moveDown($event)\"\r\n    (remove)=\"remove($event)\"></iu-uploads>\r\n  <iu-upload *ngIf=\"preview && !multiple && hasUploads\" [upload]=\"activeFile\" [height]=\"200\" (remove)=\"remove()\"></iu-upload>\r\n</div>\r\n`,\r\n  styles: [`.file-upload{margin:10px;padding:10px}.file-upload input[type=file]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}.file-upload .box{padding:100px 20px;margin:10px;display:flex;outline:-webkit-focus-ring-color auto 5px;outline-offset:-10px;position:relative}.file-upload .box #dragdrop-message{position:absolute;top:60px;max-width:80%;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;display:inline-block;overflow:hidden;font-size:24px}.file-upload .box #dragdrop-message span{display:inline}.file-upload .custom-file-upload{box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12);max-width:80%;font-size:20px;font-weight:700;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;display:inline-block;overflow:hidden;padding:10px 20px;margin-top:50px}.file-upload .custom-file-upload figure{width:50px;height:70px;display:flex;position:relative;padding:30px;margin:0 auto 10px}.file-upload .custom-file-upload figure mat-icon{font-size:50px;height:50px;width:50px}.file-upload .custom-file-upload figure::after,.file-upload .custom-file-upload figure::before{width:0;height:0;content:'';position:absolute;top:0;right:0}.file-upload .custom-file-upload figure::before{border-left:20px solid transparent}.file-upload .custom-file-upload figure::after{border-right:20px solid transparent}`],\r\n  providers: [FILE_UPLOAD_ACCESSOR],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class FileUploadComponent implements OnInit, ControlValueAccessor {\r\n\r\n  @Input() id = `files-${guid()}`;\r\n  @Input() multiple = false;\r\n  @Input() ordered = true;\r\n  @Input() preview = true;\r\n  @Output() upload = new EventEmitter<FileUpload | FileUpload[]>();\r\n  private onModelChange: Function;\r\n  private onTouch: Function;\r\n  changes$: BehaviorSubject<FileUpload> = new BehaviorSubject<FileUpload>(new FileUpload());\r\n  value: FileUpload[];\r\n  focused: FileUpload[];\r\n  ordering: Ordering<FileUpload> = new Ordering<FileUpload>([], FileUpload, 'order', 'name');\r\n\r\n  constructor(private ref: ChangeDetectorRef) { }\r\n\r\n  get activeFile(): FileUpload {\r\n    return this.hasUploads ? this.uploads[0] : new FileUpload();\r\n  }\r\n\r\n  get hasUploads(): boolean {\r\n    return this.uploads.length > 0;\r\n  }\r\n\r\n  get showMultiple(): boolean {\r\n    return this.preview && this.multiple\r\n  }\r\n\r\n  get uploads(): FileUpload[] {\r\n    return this.ordering.items.filter(upload => upload.name !== '');\r\n  }\r\n\r\n  set uploads(value: FileUpload[]) {\r\n    this.ordering.updateItems(value.filter(upload => upload.name !== ''));\r\n    this.onChange(this.uploads);\r\n  }\r\n\r\n  get orderedUploads(): FileUpload[] {\r\n    return this.uploads;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.changes$.subscribe(upload => {\r\n      this.onUpload(upload);\r\n    });\r\n  }\r\n\r\n  add(f: FileUpload) {\r\n    if (!this.multiple && this.hasUploads) {\r\n      this.remove();\r\n    }\r\n    this.uploads = this.ordering.addItem(f);\r\n  }\r\n\r\n  emit() {\r\n    if (this.value.length > 0) {\r\n      if (this.multiple) {\r\n        this.upload.emit(this.value);\r\n      } else {\r\n        this.upload.emit(this.value[0]);\r\n      }\r\n    }\r\n  }\r\n\r\n  moveUp(f: FileUpload) {\r\n    this.uploads = this.ordering.moveUp(f);\r\n  }\r\n\r\n  moveDown(f: FileUpload) {\r\n    this.uploads = this.ordering.moveDown(f);\r\n  }\r\n\r\n  remove(f?: FileUpload) {\r\n    const removeFile = f || this.activeFile;\r\n    this.uploads = this.ordering.removeItem(removeFile);\r\n  }\r\n\r\n  update(f: FileUpload) {\r\n    const index = this.uploads.findIndex(item => item['name'] === f.name);\r\n    if (index === -1) {\r\n      this.add(f);\r\n    } else {\r\n      this.uploads = this.uploads.map((x, i) => i === index ? build(FileUpload, f, { order: x.order }) : x);\r\n      this.ref.detectChanges();\r\n    }\r\n  }\r\n\r\n  registerOnChange(fn: Function) {\r\n    this.onModelChange = fn;\r\n  }\r\n\r\n  registerOnTouched(fn: Function) {\r\n    this.onTouch = fn;\r\n  }\r\n\r\n  writeValue(value: FileUpload[]) {\r\n    this.value = value;\r\n    this.uploadAll(value);\r\n  }\r\n\r\n  onChange(value: FileUpload[]) {\r\n    if (!equals(this.value, value)) {\r\n      this.value = value;\r\n      if (value.every(x => x.readyState === 'DONE')) {\r\n        this.emit();\r\n      }\r\n      if (this.onModelChange) {\r\n        this.onModelChange(value);\r\n      }\r\n    }\r\n  }\r\n\r\n  onInputChange(e: any) {\r\n    const input = event.target;\r\n    const files = input['files'];\r\n    if (files && files.length > 0) {\r\n      for (let i = 0; i < files.length; i++) {\r\n        this.setupReader(files[i]);\r\n      }\r\n    }\r\n  }\r\n\r\n  onBlur(value: FileUpload[]) {\r\n    this.focused = [];\r\n  }\r\n\r\n  onFocus(value: FileUpload[]) {\r\n    this.focused = value;\r\n    this.onTouch();\r\n  }\r\n\r\n  onUpload(upload: FileUpload) {\r\n    const f = build(FileUpload, upload);\r\n    this.update(f);\r\n  }\r\n\r\n  setupReader(file: File) {\r\n    const reader = new FileReader();\r\n    const changes$ = this.changes$;\r\n    const upload = build(FileUpload, {\r\n      lastModified: file['lastModified'],\r\n      lastModifiedDate: file['lastModifiedDate'],\r\n      name: file['name'],\r\n      size: file['size'],\r\n      type: file['type'],\r\n      webkitRelativePath: file['webkitRelativePath']\r\n    });\r\n    reader.onload = function (e: any) {\r\n      const src = reader.result;\r\n      const readyState = FileUpload.GetReadyState(reader);\r\n      changes$.next(Object.assign(upload, { src, readyState }));\r\n    };\r\n    reader.readAsDataURL(file);\r\n    this.onUpload(build(FileUpload, upload, { readyState: FileUpload.GetReadyState(reader) }));\r\n  }\r\n\r\n  uploadAll(uploads: FileUpload[]) {\r\n    uploads.forEach(upload => {\r\n      this.onUpload(upload);\r\n    });\r\n  }\r\n\r\n}\r\n","import { Component, Input, EventEmitter, Output } from '@angular/core';\n\nimport { FileUpload } from '../file-upload.model';\n\n@Component({\n  selector: 'iu-file-preview',\n  template: `<mat-card class=\"file-preview\" [style.cursor]=\"cursorStyle\">\n  <div class=\"graphic\">\n    <img *ngIf=\"showImage\" [src]=\"file.src\" [style.height]=\"height\" [style.width]=\"width\">\n    <mat-icon *ngIf=\"!showImage\" class=\"icon-graphic\">{{ graphic }}</mat-icon>\n  </div>\n  <mat-progress-bar mode=\"indeterminate\" *ngIf=\"file.loading\"></mat-progress-bar>\n  <div class=\"file-info\">\n    <span class=\"file-name\">{{ file.name }}</span>\n  </div>\n  <mat-icon *ngIf=\"showUpArrow\" class=\"up-arrow\" (click)=\"onMoveUp()\">keyboard_arrow_up</mat-icon>\n  <mat-icon *ngIf=\"showDownArrow\" class=\"down-arrow\" (click)=\"onMoveDown()\">keyboard_arrow_down</mat-icon>\n  <mat-icon class=\"remove-upload\" (click)=\"onRemove()\">cancel</mat-icon>\n</mat-card>\n`,\n  styles: [`.file-preview{height:80px;margin:2px 0;position:relative}.mat-card{padding:0}.file-preview img{max-height:72px}.graphic{position:absolute;left:50px;height:72px;max-width:200px;text-align:center;padding-left:20px;overflow:hidden}.icon-graphic{font-size:72px;height:72px;width:72px}.mat-progress-bar{position:absolute;left:0;top:73px}.file-info{position:absolute;left:250px;height:72px;max-width:300px;text-align:center}.file-name{margin:18px 6px;display:inline-block;line-height:36px;font-size:16px;height:36px;font-weight:700;color:#000}.arrow,.down-arrow,.up-arrow{cursor:pointer}.up-arrow{position:absolute;left:6px;top:0;font-size:36px;height:36px;width:36px;font-weight:700}.down-arrow{position:absolute;left:6px;top:36px;font-size:36px;height:36px;width:36px;font-weight:700}.remove-upload{cursor:pointer;position:absolute;right:10px;top:20px;font-size:40px;height:40px;width:40px}.down-arrow:hover,.up-arrow:hover{color:#fff}`]\n})\nexport class FilePreviewComponent {\n\n  @Input() file: FileUpload = new FileUpload();\n  @Input() height: number;\n  @Input() width: number;\n  @Input() ordered = true;\n  @Input() first = false;\n  @Input() last = false;\n  @Output() moveUp = new EventEmitter<FileUpload>();\n  @Output() moveDown = new EventEmitter<FileUpload>();\n  @Output() remove = new EventEmitter<FileUpload>();\n\n  constructor() { }\n\n  get cursorStyle(): string {\n    return this.ordered ? 'move' : 'default';\n  }\n\n  get graphic(): string {\n    if (this.file.loading) {\n      return 'cloud_upload';\n    } else if (this.file.isImage) {\n      return 'image';\n    } else {\n      switch (this.file.extension) {\n        case 'pdf':\n          return 'picture_as_pdf';\n        default:\n          return 'cloud_done';\n      }\n    }\n  }\n\n  get showImage(): boolean {\n    return this.graphic === 'image';\n  }\n\n  get showUpArrow(): boolean {\n    return this.ordered && !this.first;\n  }\n\n  get showDownArrow(): boolean {\n    return this.ordered && !this.last;\n  }\n\n  onMoveUp() {\n    this.moveUp.emit(this.file);\n  }\n\n  onMoveDown() {\n    this.moveDown.emit(this.file);\n  }\n\n  onRemove() {\n    this.remove.emit(this.file);\n  }\n\n}\n","import { Component, Input, Output, EventEmitter } from '@angular/core';\n\nimport { FileUpload } from '../file-upload.model';\n\n@Component({\n  selector: 'iu-upload',\n  template: `<div class=\"upload\" [style.height]=\"img?.style?.height\">\n  <div class=\"graphic\" #img>\n    <img *ngIf=\"showImage\" [src]=\"upload.src\" [style.max-height.px]=\"height\" [style.max-width.px]=\"width\">\n    <mat-icon *ngIf=\"!showImage\" class=\"icon-graphic\" [style.max-height.px]=\"height\" [style.max-width.px]=\"width\">{{ graphic }}</mat-icon>\n    <mat-icon *ngIf=\"!upload.loading\" class=\"remove-upload\" (click)=\"onRemove()\">cancel</mat-icon>\n  </div>\n  <mat-spinner mode=\"indeterminate\" *ngIf=\"upload.loading\"></mat-spinner>\n  <div class=\"file-info\" *ngIf=\"!upload.loading\">\n    <span class=\"file-name\">{{ upload.name }}</span>\n  </div>\n</div>\n`,\n  styles: [`.upload{max-height:420px;max-width:600px;margin:10px 20px;position:relative;display:flex}.upload img{max-height:400px}.graphic{padding:0!important;float:left;margin:10px;position:relative}.icon-graphic{font-size:72px;height:72px;width:72px}.mat-progress-bar{position:absolute;left:0;top:73px}.file-info{float:right}.file-name{margin:18px 6px;display:inline-block;line-height:36px;font-size:20px;height:36px;font-weight:700;color:#000}.remove-upload{color:red;cursor:pointer;position:absolute;right:-20px;top:-20px;font-size:40px;height:40px;width:40px}`]\n})\nexport class UploadComponent {\n\n  @Input() upload: FileUpload = new FileUpload();\n  @Input() height = 200;\n  @Input() width = 600;\n  @Output() remove = new EventEmitter<FileUpload>();\n\n  constructor() { }\n\n  get graphic(): string {\n    if (this.upload.loading) {\n      return 'cloud_upload';\n    } else if (this.upload.isImage) {\n      return 'image';\n    } else {\n      switch (this.upload.extension) {\n        case 'pdf':\n          return 'picture_as_pdf';\n        default:\n          return 'cloud_done';\n      }\n    }\n  }\n\n  get showImage(): boolean {\n    return this.graphic === 'image';\n  }\n\n  onRemove() {\n    this.remove.emit(this.upload);\n  }\n\n}\n","import { Component, Input, ChangeDetectionStrategy, Output, EventEmitter } from '@angular/core';\n\nimport { FileUpload } from '../file-upload.model';\n\n@Component({\n  selector: 'iu-uploads',\n  template: `<div class=\"uploads\" [style.height]=\"height\" [style.width]=\"width\">\n  <iu-file-preview *ngFor=\"let upload of uploads; let first = first; let last = last;\" [file]=\"upload\" [first]=\"first\" [last]=\"last\"\n    [ordered]=\"ordered\" (moveUp)=\"onMoveUp($event)\" (moveDown)=\"onMoveDown($event)\" (remove)=\"onRemove($event)\"></iu-file-preview>\n</div>\n`,\n  styles: [`.uploads{max-height:420px;max-width:600px;overflow-y:scroll;margin:10px 20px}.uploads::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3);border-radius:10px;background-color:#424242}.uploads::-webkit-scrollbar{width:12px;background-color:#424242}.uploads::-webkit-scrollbar-thumb{border-radius:10px;-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3)}.uploads .dragging{background-color:#424242}`],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class UploadsComponent {\n\n  @Input() uploads: FileUpload[] = [];\n  @Input() height: number;\n  @Input() width: number;\n  @Input() ordered = true;\n  @Output() moveUp = new EventEmitter<FileUpload>();\n  @Output() moveDown = new EventEmitter<FileUpload>();\n  @Output() remove = new EventEmitter<FileUpload>();\n\n  constructor() { }\n\n  onMoveUp(f: FileUpload) {\n    this.moveUp.emit(f);\n  }\n\n  onMoveDown(f: FileUpload) {\n    this.moveDown.emit(f);\n  }\n\n  onRemove(f: FileUpload) {\n    this.remove.emit(f);\n  }\n\n}\n","import { NgModule } from '@angular/core';\r\nimport { MatCardModule, MatIconModule, MatProgressBarModule, MatProgressSpinnerModule } from '@angular/material';\r\n\r\nimport { FileUploadComponent } from './file-upload.component';\r\nimport { SharedModule } from '../../shared/shared.module';\r\nimport { FilePreviewComponent } from './file-preview/file-preview.component';\r\nimport { UploadComponent } from './upload/upload.component';\r\nimport { UploadsComponent } from './uploads/uploads.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    SharedModule,\r\n    MatCardModule,\r\n    MatIconModule,\r\n    MatProgressBarModule,\r\n    MatProgressSpinnerModule,\r\n  ],\r\n  declarations: [\r\n    FileUploadComponent,\r\n    FilePreviewComponent,\r\n    UploadComponent,\r\n    UploadsComponent,\r\n  ],\r\n  exports: [\r\n    FileUploadComponent,\r\n    FilePreviewComponent,\r\n    UploadComponent,\r\n    UploadsComponent,\r\n  ]\r\n})\r\nexport class FileUploadModule { }\r\n","import { Metadata, Dictionary, TypeConstructor } from './models';\r\nimport { arrayUnion, build, inArray } from './utils';\r\n\r\nexport class Collection<T> {\r\n    activeId: number | string = 0;\r\n    lastUpdated: Date;\r\n    metadata: Metadata = {};\r\n    _ctor: TypeConstructor<T>;\r\n    _items: Dictionary<T> = {};\r\n\r\n    static AddItem<T>(state: Dictionary<T>, key: number | string, item: T): Dictionary<T> {\r\n        const newState: Dictionary<T> = {};\r\n        Object.keys(state)\r\n            .forEach(k => {\r\n                newState[k] = state[k];\r\n            });\r\n        newState[key] = item;\r\n        return newState;\r\n    }\r\n\r\n    static BuildCollection<T>(items: T[], findByKey = 'id'): Collection<T> {\r\n        const dictionary: Dictionary<T> = Collection.BuildItems(items, findByKey);\r\n        return Object.assign(new Collection<T>(), { items: dictionary });\r\n    }\r\n\r\n    static BuildDictionaryFromArray<T>(value: any[], key = 'id'): Dictionary<T> {\r\n        const obj: Dictionary<T> = {};\r\n        value.forEach(item => {\r\n            obj[item[key]] = item;\r\n        });\r\n        return obj;\r\n    }\r\n\r\n    static BuildFromArray<T>(items: T[], findByKey = 'id'): Collection<T> {\r\n        const dictionary: Dictionary<T> = Collection.BuildItems(items, findByKey);\r\n        return Object.assign(new Collection<T>(), { items: dictionary });\r\n    }\r\n\r\n    static BuildItems<T>(items: T[], findByKey = 'id'): Dictionary<T> {\r\n        const dictionary: Dictionary<T> = {};\r\n        items.forEach(item => {\r\n            const key = item[findByKey];\r\n            dictionary[key] = item;\r\n        });\r\n        return dictionary;\r\n    }\r\n\r\n    static Filter<T>(item: T, path: string): boolean {\r\n        return Array.isArray(item['matches']) && inArray(item['matches'], path);\r\n    }\r\n\r\n    static FilterAnd<T>(item: T, paths: string[]): boolean {\r\n        return Array.isArray(item['matches']) && paths.every(path => inArray(item['matches'], path));\r\n    }\r\n\r\n    static FilterOr<T>(item: T, paths: string[]): boolean {\r\n        return Array.isArray(item['matches']) && paths.some(path => inArray(item['matches'], path));\r\n    }\r\n\r\n    static RemoveItem<T>(state: Dictionary<T>, key: number | string): Dictionary<T> {\r\n        const newState: Dictionary<T> = {};\r\n        Object.keys(state)\r\n            .filter(k => k !== key)\r\n            .forEach(k => {\r\n                newState[k] = state[k];\r\n            });\r\n        return newState;\r\n    }\r\n\r\n    constructor(ctor?: TypeConstructor<T>) {\r\n        if (ctor) {\r\n            this.ctor = ctor;\r\n        }\r\n    }\r\n\r\n    get active(): T {\r\n        const item = this.items[this.activeId] || <T>{};\r\n        return this.ctor ? build(this.ctor, item) : item;\r\n    }\r\n\r\n    get ctor(): TypeConstructor<T> {\r\n        return this._ctor;\r\n    }\r\n\r\n    set ctor(value: TypeConstructor<T>) {\r\n        this._ctor = value;\r\n    }\r\n\r\n    get count(): number {\r\n        return this.toArray().length;\r\n    }\r\n\r\n    get defaultItem(): T {\r\n        return this.ctor ? new this.ctor() : <T>{};\r\n    }\r\n\r\n    get empty(): boolean {\r\n        return this.toArray().length === 0;\r\n    }\r\n\r\n    get instance(): Collection<T> {\r\n        const activeId = this.activeId;\r\n        const ctor = this.ctor;\r\n        const lastUpdated = this.lastUpdated;\r\n        const metadata = this.metadata;\r\n        // const collection = this.constructor();\r\n        const collection = new Collection<T>();\r\n        collection.activeId = activeId;\r\n        collection.ctor = ctor;\r\n        collection.lastUpdated = lastUpdated;\r\n        collection.metadata = metadata;\r\n        return collection;\r\n    }\r\n\r\n    get items(): Dictionary<T> {\r\n        return this._items;\r\n    }\r\n\r\n    set items(value: Dictionary<T>) {\r\n        this._items = value;\r\n        this.lastUpdated = new Date();\r\n    }\r\n\r\n    get keys(): number[] | string[] {\r\n        return Object.keys(this.items);\r\n    }\r\n\r\n    get asArray(): T[] {\r\n        return this.toArray();\r\n    }\r\n\r\n    get itemsArray(): T[] {\r\n        return this.asArray;\r\n    }\r\n\r\n    toArray(): T[] {\r\n        return Object.keys(this.items).map((key: number | string) => <T>this.items[key]);\r\n    }\r\n\r\n    activate(id: number, key: string = 'id'): Collection<T> {\r\n        const items = this.items[id] ? this.copyItems() : Object.assign(this.copyItems(), { [id]: { [key]: id } });\r\n        return Object.assign(new Collection<T>(), this, { activeId: id, items });\r\n    }\r\n\r\n    addItem(item: T, key?: number | string): Collection<T> {\r\n        const items = this.copyItems();\r\n        return Object.assign(this.constructor(), this, {\r\n            items: Object.assign(items, { [key]: item })\r\n        });\r\n    }\r\n\r\n    addItems(items: T[], key = 'id'): Collection<T> {\r\n        const newItems: Dictionary<T> = {};\r\n        this.toArray().forEach(item => {\r\n            newItems[item[key]] = item;\r\n        });\r\n        items.forEach(item => {\r\n            const existingItem = newItems[item[key]] ? newItems[item[key]] : <T>{};\r\n            const existingMatches = existingItem['matches'] || [];\r\n            const newMatches = item['matches'] || [];\r\n            const matches = arrayUnion(existingMatches, newMatches);\r\n            const newItem = this.buildItem(item, { matches: matches });\r\n            newItems[item[key]] = this.buildItem(existingItem, newItem);\r\n        });\r\n        this.items = newItems;\r\n        return Object.assign(new Collection<T>(), this);\r\n    }\r\n\r\n    build(items: Dictionary<T>, ctor?: TypeConstructor<Collection<T>>): Collection<T> {\r\n        return ctor ? build(ctor, { items })\r\n            : <Collection<T>>Object.assign(this.instance, { items });\r\n    }\r\n\r\n    buildItem(existingItem: T, newItem: any, ctor?: TypeConstructor<T>): T {\r\n        const existing = existingItem || {};\r\n        const item = ctor ? build(ctor, existing, newItem)\r\n            : this.ctor ? build(this.ctor, existing, newItem)\r\n                : Object.assign({}, existing, newItem);\r\n        return item;\r\n    }\r\n\r\n    buildItems(items: T[], ctor?: TypeConstructor<T>): T[] {\r\n        const factory = ctor ? ctor : this.ctor;\r\n        return items.map(x => factory ? build(factory, x) : Object.assign(<T>{}, x));\r\n    }\r\n\r\n    copyItems(): Dictionary<T> {\r\n        return Object.keys(this.items)\r\n            .reduce((acc, key) => {\r\n                acc[key] = this.get(key);\r\n                return acc;\r\n            }, {});\r\n    }\r\n\r\n    delete(key: string | number): Collection<T> {\r\n        return this.removeAt(key);\r\n    }\r\n\r\n    filter(f: (item: T) => boolean): Collection<T> {\r\n        const items = Collection.BuildDictionaryFromArray(this.toArray().filter(f));\r\n        return Object.assign(new Collection<T>(), this, { items });\r\n    }\r\n\r\n    filterBy(f: (item: T, index?: number) => boolean): T[] {\r\n        return this.filterItems(f);\r\n    }\r\n\r\n    filterItems(f: (item: T, index?: number) => boolean): T[] {\r\n        return this.toArray().filter(f);\r\n    }\r\n\r\n    findBy(f: (item: T) => boolean): T {\r\n        return this.asArray.find(f) || this.defaultItem;\r\n    }\r\n\r\n    get(id: number | string): T {\r\n        const existing = this.items[id];\r\n        return this.ctor ? build(this.ctor, existing)\r\n            : Object.assign(<T>{}, existing);\r\n    }\r\n\r\n    map(f: (item: T) => T): Collection<T> {\r\n        const items = Collection.BuildDictionaryFromArray(this.toArray().map(f));\r\n        return Object.assign(new Collection<T>(), this, { items });\r\n    }\r\n\r\n    query(path: string): T[] {\r\n        return this.toArray().filter(item => Collection.Filter(item, path));\r\n    }\r\n\r\n    queryAnd(paths: string[]): T[] {\r\n        return this.toArray().filter(item => Collection.FilterAnd(item, paths));\r\n    }\r\n\r\n    queryOr(paths: string[]): T[] {\r\n        return this.toArray().filter(item => Collection.FilterOr(item, paths));\r\n    }\r\n\r\n    removeAt(key: number | string): Collection<T> {\r\n        const keys = Object.keys(this.items);\r\n        const items = Collection.BuildDictionaryFromArray(keys.filter(x => x.toString() !== key.toString()).map(y => this.items[y]));\r\n        return Object.assign(new Collection<T>(), this, { items });\r\n\r\n    }\r\n\r\n    removeItem(key: number | string): Collection<T> {\r\n        const collection = this.constructor();\r\n        const keys = Object.keys(this.items).filter(k => k !== key);\r\n        keys.forEach((k: number | string) => {\r\n            collection.items[k] = <T>Object.assign({}, this.items[k]);\r\n        });\r\n        return collection;\r\n    }\r\n\r\n    removeItems(filter: (item: T) => boolean, key = 'id') {\r\n        const keys = this.toArray().filter(filter).map(x => x[key]);\r\n        this.removeKeys(keys);\r\n    }\r\n\r\n    removeKeys(keys: any[]) {\r\n        keys.forEach((key: number | string) => {\r\n            this.removeItem(key);\r\n        });\r\n    }\r\n\r\n    replace(itemsArray: T[]): Collection<T> {\r\n        const items = Collection.BuildDictionaryFromArray(this.buildItems(itemsArray));\r\n        return Object.assign(new Collection<T>(), this, { items });\r\n    }\r\n\r\n    replaceItems(items: T[], filter?: (item: T) => boolean): Collection<T> {\r\n        if (filter) {\r\n            const f = (x: T) => !filter(x);\r\n            return this.replaceItems([...this.filterItems(f), ...items]);\r\n        }\r\n        return Object.assign(new Collection<T>(), this, { items });\r\n    }\r\n\r\n    setValue(value: Collection<T>): Collection<T> {\r\n        return Object.assign(new Collection<T>(), this, value);\r\n    }\r\n\r\n    update(value: any | any[], ctor?: TypeConstructor<T>, key = 'id'): Collection<T> {\r\n        if (Array.isArray(value)) {\r\n            return this.updateItems(value, ctor, key);\r\n        }\r\n        return this.updateItem(value, value[key], ctor);\r\n    }\r\n\r\n    updateItem(item: any, key: number | string, ctor?: TypeConstructor<T>): Collection<T> {\r\n        const items = this.copyItems();\r\n        const updatedItem = this.buildItem(items[key], item, ctor);\r\n        return this.build(Object.assign(items, { [key]: updatedItem }));\r\n    }\r\n\r\n    updateItems(items: any[], ctor?: TypeConstructor<T>, key: string = 'id'): Collection<T> {\r\n        const existingItems = this.copyItems();\r\n        const updatedItems = items.reduce((acc, item) => {\r\n            const existingItem = acc[item[key]];\r\n            acc[item[key]] = this.buildItem(existingItem, item, ctor);\r\n            return acc;\r\n        }, existingItems);\r\n        return this.build(updatedItems);\r\n    }\r\n\r\n}\r\n","import { orderBy } from '@progress/kendo-data-query';\r\n\r\nimport { GridComponent } from './grid.component';\r\nimport { Collection } from '../../shared/collection';\r\nimport { DateHelper } from '../../shared/date';\r\nimport { CompositeFilterDescriptor, GroupableSettings, SortDescriptor, SortSettings } from '../../shared/kendo';\r\nimport { QueryModel, StyleModel } from '../../shared/models';\r\n\r\nexport class Grid<T> {\r\n    query: QueryModel<T> = new QueryModel<T>();\r\n    style: StyleModel = new StyleModel();\r\n\r\n    detailRowHeight: number;\r\n    filter: CompositeFilterDescriptor;\r\n    filterable = true;\r\n    groupable: GroupableSettings | boolean;\r\n    height: number;\r\n    pageSize: number;\r\n    pageable: any | boolean;\r\n    rowHeight: number;\r\n    scrollable: any;\r\n    selectable: boolean;\r\n    skip: number;\r\n    sortable: SortSettings = { mode: 'multiple' };\r\n    group: any[];\r\n    rowClass: Function;\r\n    sort: any[];\r\n\r\n    static ApplyFilter(acc: any[], operator: string, field: string, value: any): any[] {\r\n        switch (operator) {\r\n            case 'contains':\r\n                return acc.filter(row => Grid.Contains(row[field], value));\r\n            case 'gte':\r\n                return acc.filter(row => Grid.MatchDate(row[field], value));\r\n        }\r\n    }\r\n\r\n    static Build<T>(items: T[]): Grid<T> {\r\n        const data = Object.assign(new Collection<T>(), { items });\r\n        return new Grid<T>(data);\r\n    }\r\n\r\n    static BuildSort(field: string, dir: 'asc' | 'desc' = 'asc'): SortDescriptor {\r\n        return <SortDescriptor>{ dir, field };\r\n    }\r\n\r\n    static Contains(str: string, substr: string): boolean {\r\n        if (typeof (str) === 'string' && typeof (substr) === 'string') {\r\n            return str.toLowerCase().includes(substr.toLowerCase());\r\n        }\r\n        return true;\r\n    }\r\n\r\n    static FilterRows(rows: any[], filters: any[]): any[] {\r\n        return filters.reduce((acc, filter) => {\r\n            const operator = filter['operator'];\r\n            const field = filter['field'];\r\n            const value = filter['value'];\r\n            return Grid.ApplyFilter(rows, operator, field, value);\r\n        }, rows);\r\n    }\r\n\r\n    static MatchDate(date1: Date, date2: Date): boolean {\r\n        return DateHelper.IsSameDay(date1, date2);\r\n    }\r\n\r\n    static PageRows(rows: any[], skip: number, take: number): any[] {\r\n        return rows.filter((row, index) => index >= skip && index < skip + take);\r\n    }\r\n\r\n    static SortRows(rows: any[], sort: SortDescriptor[]): any[] {\r\n        return orderBy(rows, sort);\r\n    }\r\n\r\n    constructor(public data: Collection<T>) {\r\n    }\r\n\r\n    update(grid: GridComponent) {\r\n    }\r\n\r\n}\r\n","import { Component, ElementRef, Input, TemplateRef, ViewChild, ViewContainerRef } from '@angular/core';\r\n\r\nimport { GridColumn } from './grid-column.model';\r\n\r\n@Component({\r\n  selector: 'iu-grid-column',\r\n  template: `<kendo-grid-column [field]=\"colField\" [title]=\"colTitle\" [width]=\"colWidth\" #kendoGridColumn>\r\n  <span #content>\r\n    <ng-content></ng-content>\r\n  </span>\r\n</kendo-grid-column>\r\n`,\r\n  styles: [``]\r\n})\r\nexport class GridColumnComponent {\r\n\r\n  @Input() model: GridColumn<any>;\r\n  @Input() templateRef: TemplateRef<any>;\r\n  @Input() class: string | string[];\r\n  @Input() editable = true;\r\n  @Input() editor: string | number | Date | boolean;\r\n  @Input() field = '';\r\n  @Input() filter: 'text' | 'numeric' | 'date' | 'boolean' = 'text';\r\n  @Input() filterable = true;\r\n  @Input() footerClass: string | string[] | { [key: string]: any };\r\n  @Input() footerStyle: { [key: string]: string };\r\n  @Input() format: string;\r\n  @Input() headerClass: string | string[] | { [key: string]: any };\r\n  @Input() headerStyle: { [key: string]: string };\r\n  @Input() hidden = false;\r\n  @Input() locked = false;\r\n  @Input() media: string;\r\n  @Input() sortable = true;\r\n  @Input() style: { [key: string]: string };\r\n  @Input() title: string;\r\n  @Input() width: number;\r\n  @ViewChild('content') content: ElementRef;\r\n\r\n  constructor(public view: ViewContainerRef) { }\r\n\r\n  get colField(): string {\r\n    return this.model.metadata.name;\r\n  }\r\n\r\n  get colTitle(): string {\r\n    return this.model.title;\r\n  }\r\n\r\n  get colWidth(): number {\r\n    return this.model.width;\r\n  }\r\n\r\n}\r\n","import {\r\n  AfterContentInit,\r\n  Component,\r\n  ContentChildren,\r\n  ElementRef,\r\n  Input,\r\n  OnChanges,\r\n  OnInit,\r\n  QueryList,\r\n  Renderer2,\r\n  ViewChild,\r\n  ViewEncapsulation,\r\n  Output,\r\n  EventEmitter\r\n} from '@angular/core';\r\n\r\nimport { Grid } from './grid.model';\r\nimport { GridColumnComponent } from './grid-column/grid-column.component';\r\nimport {\r\n  CompositeFilterDescriptor,\r\n  GroupableSettings,\r\n  SortDescriptor,\r\n  SortSettings,\r\n  GridDataResult,\r\n  DataStateChangeEvent,\r\n  PageChangeEvent\r\n} from '../../shared/kendo';\r\nimport { str2int } from '../../shared/utils';\r\n\r\n@Component({\r\n  selector: 'iu-grid',\r\n  template: `<mat-card class=\"grid mat-primary\" [class.mat-card]=\"!export\">\r\n  <kendo-grid [data]=\"gridData\" [filter]=\"filter\" [filterable]=\"showFilters\" [groupable]=\"groupable\" [height]=\"dynamicHeight\"\r\n    [pageSize]=\"pageSize\" [pageable]=\"pagerSettings\" [rowHeight]=\"rowHeight\" [scrollable]=\"scrollable\" [selectable]=\"selectable\"\r\n    [skip]=\"skip\" [sortable]=\"sortable\" [group]=\"group\" [sort]=\"sort\" (dataStateChange)=\"dataStateChange($event)\" #kendoGridInstance=\"kendoGrid\">\r\n\r\n    <!-- Toolbar Template -->\r\n    <ng-template kendoGridToolbarTemplate *ngIf=\"export\">\r\n      <button mat-raised-button class=\"toolbar-button pdf-button\" kendoGridPDFCommand>\r\n        <mat-icon>picture_as_pdf</mat-icon>Export to PDF</button>\r\n      <button mat-raised-button class=\"toolbar-button excel-button\" (click)=\"save(excelexport)\">\r\n        <mat-icon>import_export</mat-icon>Export To Excel</button>\r\n    </ng-template>\r\n\r\n    <!-- Grid Columns -->\r\n    <kendo-grid-column *ngFor=\"let col of columns\" [class]=\"col.class\" [editable]=\"col.editable\" [editor]=\"col.editor\" [field]=\"col.colField\"\r\n      [filter]=\"col.filter\" [filterable]=\"col.filterable\" [footerClass]=\"col.footerClass\" [footerStyle]=\"col.footerStyle\" [format]=\"col.format\"\r\n      [headerClass]=\"col.headerClass\" [headerStyle]=\"col.headerStyle\" [hidden]=\"col.hidden\" [locked]=\"col.locked\" [media]=\"col.media\"\r\n      [sortable]=\"col.sortable\" [style]=\"col.style\" [title]=\"col.colTitle\" [width]=\"col.width\">\r\n      <ng-template *ngIf=\"col.templateRef\" kendoGridCellTemplate let-dataItem>\r\n        <iu-grid-cell [templateRef]=\"col.templateRef\" [dataItem]=\"dataItem\"></iu-grid-cell>\r\n      </ng-template>\r\n    </kendo-grid-column>\r\n\r\n    <!-- Export to PDF -->\r\n    <kendo-grid-pdf *ngIf=\"export\" [fileName]=\"pdfFileName\" [allPages]=\"true\" paperSize=\"A4\" [repeatHeaders]=\"true\" [landscape]=\"true\">\r\n      <kendo-grid-pdf-margin top=\"2cm\" left=\"1cm\" right=\"1cm\" bottom=\"2cm\"></kendo-grid-pdf-margin>\r\n      <ng-template kendoGridPDFTemplate let-pageNum=\"pageNum\" let-totalPages=\"totalPages\">\r\n        <div class=\"page-template\">\r\n          <div class=\"header\">\r\n            <div style=\"float: right\">Page {{ pageNum }} of {{ totalPages }}</div>\r\n            {{ pdfHeader }}\r\n          </div>\r\n          <div class=\"footer\">\r\n            Page {{ pageNum }} of {{ totalPages }}\r\n          </div>\r\n        </div>\r\n      </ng-template>\r\n    </kendo-grid-pdf>\r\n\r\n    <!-- Export to Excel -->\r\n    <kendo-excelexport [data]=\"activeRows\" [fileName]=\"excelFileName\" [filterable]=\"true\" #excelexport>\r\n      <kendo-excelexport-column *ngFor=\"let col of columns\" [field]=\"col.colField\" [title]=\"col.colTitle\">\r\n      </kendo-excelexport-column>\r\n    </kendo-excelexport>\r\n\r\n  </kendo-grid>\r\n</mat-card>\r\n`,\r\n  styles: [`.mat-card.grid{padding:0}.grid .k-grid-header{padding-right:13px}.grid th.k-grid-header:first-child{padding-left:6px}.grid .mat-raised-button{color:#fff}.k-grid-header .k-header>.k-link{font-size:16px;padding:2px 12px}.k-grid td{border:none;padding:6px 12px}.k-widget{border:none}.k-filter-row>th{padding:4px;max-width:190px;border-width:0 0 1px 1px;border-style:solid}.k-input.k-textbox,.k-textbox{height:calc(1em + (4px * 2) + (1px * 2))!important;min-width:80px}.k-filtercell .k-filtercell-wrapper,.k-filtercell>span{padding-right:calc(1.5em + 8px + 2px + 4px)}.k-filtercell .k-dropdown-operator{display:none}.k-picker-wrap.k-state-default{border-bottom-width:1px}.page-template{font-family:\"DejaVu Sans\",Arial,sans-serif;position:absolute;width:100%;height:100%;top:0;left:0}.page-template .header{position:absolute;top:30px;left:30px;right:30px;border-bottom:1px solid #888;color:#888}.page-template .footer{position:absolute;bottom:30px;left:30px;right:30px;border-top:1px solid #888;text-align:center;color:#888}.toolbar-button{color:#fff;background-image:none;vertical-align:middle}`],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class GridComponent implements OnChanges, OnInit, AfterContentInit {\r\n\r\n  @Input() model: Grid<any>;\r\n  @Input() advancedFilter = false;\r\n  @Input() autoCalculateHeight = true;\r\n  @Input() buttonColor = '#fff';\r\n  @Input() buttonCount = 5;\r\n  @Input() buttonClass = 'toolbar-button';\r\n  @Input() pagerInfo = true;\r\n  @Input() pagerType: 'numeric' | 'input' = 'numeric';\r\n  @Input() pageSizes = true;\r\n  @Input() previousNext = true;\r\n  @Input() detailRowHeight: number;\r\n  @Input() export = false;\r\n  @Input() fileName = 'export';\r\n  @Input() filter: CompositeFilterDescriptor = { logic: 'and', filters: [] };\r\n  @Input() filterable = true;\r\n  @Input() groupable: GroupableSettings | boolean;\r\n  @Input() height: number;\r\n  @Input() pageSize = 20;\r\n  @Input() pageable: any | boolean;\r\n  @Input() pager: any = {\r\n    pageSizes: [10, 20, 50, 100]\r\n  };\r\n  @Input() pdfHeader = '';\r\n  @Input() rowHeight: number;\r\n  @Input() rowHeightMax: number;\r\n  @Input() scrollable: any;\r\n  @Input() selectable: boolean;\r\n  @Input() skip = 0;\r\n  @Input() sortable: SortSettings = { mode: 'multiple' };\r\n  @Input() group: any[];\r\n  @Input() rowClass: Function;\r\n  @Input() sort: SortDescriptor[] = [];\r\n  @Input() total = 0; // need this for infinite scroll when not all rows are loaded\r\n  @Output() changes = new EventEmitter<DataStateChangeEvent>();\r\n  @ViewChild('kendoGridInstance') grid: ElementRef;\r\n  @ContentChildren(GridColumnComponent) contentChildren: QueryList<GridColumnComponent>;\r\n  columns: GridColumnComponent[] = [];\r\n  private _color: string;\r\n  private filtering = true;\r\n\r\n  constructor(private _elementRef: ElementRef, private _renderer: Renderer2) {\r\n  }\r\n\r\n  /** The color of the toolbar. Can be primary, accent, or warn. */\r\n  @Input()\r\n  get color(): string {\r\n    return this._color;\r\n  }\r\n\r\n  set color(value: string) {\r\n    this._updateColor(value);\r\n  }\r\n\r\n  private _updateColor(newColor: string) {\r\n    this._setElementColor(this._color, false);\r\n    this._setElementColor(newColor, true);\r\n    this._color = newColor;\r\n  }\r\n\r\n  private _setElementColor(color: string, isAdd: boolean) {\r\n    if (color != null && color !== '') {\r\n      const element = this._elementRef.nativeElement;\r\n\r\n      if (isAdd) {\r\n        this._renderer.addClass(element, `mat-${color}`);\r\n      } else {\r\n        this._renderer.removeClass(element, `mat-${color}`);\r\n      }\r\n    }\r\n  }\r\n\r\n  get activeRows(): any[] {\r\n    return this.pageRows(this.filterRows(this.sortRows(this.rows)));\r\n  }\r\n\r\n  get computedRowHeight(): number {\r\n    return this.rowHeightMax || 32;\r\n  }\r\n\r\n  get dynamicHeight(): number {\r\n    return this.autoCalculateHeight ? (this.activeRows.length === 0 || !this.numericHeight) ?\r\n      null : Math.max(96 + this.headerHeight + this.pagerHeight + this.toolbarHeight,\r\n        Math.min(this.computedRowHeight * this.activeRows.length + this.headerHeight + this.pagerHeight + this.toolbarHeight, this.numericHeight))\r\n      : this.numericHeight;\r\n  }\r\n\r\n  get excelFileName(): string {\r\n    return `${this.fileName}.xlsx`;\r\n  }\r\n\r\n  get filters(): any[] {\r\n    return this.filter.filters;\r\n  }\r\n\r\n  get gridData(): GridDataResult {\r\n    return {\r\n      data: this.activeRows,\r\n      total: this.total ? this.total : this.rows.length\r\n    };\r\n  }\r\n\r\n  get headerHeight(): number {\r\n    return this.filterable ? 66 : 27;\r\n  }\r\n\r\n  get numericHeight(): number {\r\n    return typeof (this.height) === 'string' ? str2int(this.height) : this.height;\r\n  }\r\n\r\n  get pagerHeight(): number {\r\n    return this.pageable ? 46 : 0;\r\n  }\r\n\r\n  get pagerSettings(): any {\r\n    return this.pager;\r\n  }\r\n\r\n  get pdfFileName(): string {\r\n    return `${this.fileName}.pdf`;\r\n  }\r\n\r\n  get rows(): any[] {\r\n    return this.model.data ? this.model.data.toArray() : [];\r\n  }\r\n\r\n  get showFilters(): boolean {\r\n    return this.filterable && this.filtering;\r\n  }\r\n\r\n  get take(): number {\r\n    return this.pageSize || 20;\r\n  }\r\n\r\n  get toolbarHeight(): number {\r\n    return this.export ? 53 : 0;\r\n  }\r\n\r\n  ngOnChanges() {\r\n    this.model.update(this);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.pageable = {\r\n      buttonCount: this.buttonCount,\r\n      info: this.pagerInfo,\r\n      type: this.pagerType,\r\n      pageSizes: this.pageSizes,\r\n      previousNext: this.previousNext\r\n    };\r\n  }\r\n\r\n  ngAfterContentInit() {\r\n    this.contentChildren.forEach(x => {\r\n      this.columns.push(x);\r\n    });\r\n  }\r\n\r\n  dataStateChange(state: DataStateChangeEvent): void {\r\n    this.filterChange(state['filter']);\r\n    this.pageChange({ skip: state['skip'], take: state['take'] });\r\n    this.sortChange(state['sort']);\r\n    this.changes.emit(state);\r\n  }\r\n\r\n  save(component): void {\r\n    const options = component.workbookOptions();\r\n    const rows = options.sheets[0].rows;\r\n\r\n    let altIdx = 0;\r\n    rows.forEach((row) => {\r\n      if (row.type === 'data') {\r\n        if (altIdx % 2 !== 0) {\r\n          row.cells.forEach((cell) => {\r\n            cell.background = '#aabbcc';\r\n          });\r\n        }\r\n        altIdx++;\r\n      }\r\n    });\r\n\r\n    component.save(options);\r\n  }\r\n\r\n  protected filterChange(e: CompositeFilterDescriptor) {\r\n    this.filter = e;\r\n  }\r\n\r\n  protected pageChange(e: PageChangeEvent): void {\r\n    this.skip = e.skip;\r\n    this.pageSize = str2int(e.take.toString());\r\n  }\r\n\r\n  protected sortChange(sort: SortDescriptor[]): void {\r\n    this.sort = sort;\r\n  }\r\n\r\n  private filterRows(rows: any[]): any[] {\r\n    return Grid.FilterRows(rows, this.filters);\r\n  }\r\n\r\n  protected pageRows(rows: any[]): any[] {\r\n    return this.pager ? Grid.PageRows(rows, this.skip, this.take) : rows;\r\n  }\r\n\r\n  protected sortRows(rows: any[]): any[] {\r\n    return Grid.SortRows(rows, this.sort);\r\n  }\r\n\r\n}\r\n","import { Component, OnInit, Input, ViewContainerRef, TemplateRef } from '@angular/core';\n\n@Component({\n  selector: 'iu-grid-cell',\n  template: `<div></div>`,\n  styles: [``]\n})\nexport class GridCellComponent implements OnInit {\n\n  @Input() dataItem: any;\n  @Input() templateRef: TemplateRef<any>;\n\n  constructor(private viewContainerRef: ViewContainerRef) {\n  }\n\n  ngOnInit() {\n    this.viewContainerRef.createEmbeddedView(this.templateRef, this.dataItem);\n  }\n\n}\n","import { GridColumnComponent } from './grid-column.component';\r\n\r\nimport { PropertyMetadata, StyleModel } from '../../../shared/models';\r\n\r\nexport class GridColumn<T> {\r\n\r\n    private _class: string | string[];\r\n    private _field: string;\r\n    private _title: string;\r\n    private _width: number;\r\n\r\n    styleModel: StyleModel = new StyleModel();\r\n    metadata: PropertyMetadata<T>;\r\n    editable = true;\r\n    editor: string | number | Date | boolean = 'text';\r\n    filter: string | number | Date | boolean = 'text';\r\n    filterable = true;\r\n    footerClass: string | string[] | { [key: string]: any };\r\n    footerStyle: { [key: string]: string };\r\n    format: string;\r\n    headerClass: string | string[] | { [key: string]: any };\r\n    headerStyle: { [key: string]: string };\r\n    hidden = false;\r\n    locked = false;\r\n    media: string;\r\n    sortable = true;\r\n    style: { [key: string]: string };\r\n\r\n\r\n    constructor(public name: string, public label: string) {\r\n        this.metadata = { name, label };\r\n        this.title = label;\r\n    }\r\n\r\n    get class() {\r\n        return this._class;\r\n    }\r\n\r\n    set class(value: string | string[]) {\r\n        this._class = value;\r\n    }\r\n\r\n    get field(): string {\r\n        return this._field ? this._field : this.metadata.name;\r\n    }\r\n\r\n    set field(value: string) {\r\n        this._field = value;\r\n    }\r\n\r\n    get title(): string {\r\n        return this._title ? this._title : this.metadata.label;\r\n    }\r\n\r\n    set title(value: string) {\r\n        this._title = value;\r\n    }\r\n\r\n    get width(): number {\r\n        return this._width;\r\n    }\r\n\r\n    set width(value: number) {\r\n        this._width = value;\r\n    }\r\n\r\n    update(col: GridColumnComponent) {\r\n        this.class = col.class;\r\n        this.editable = col.editable;\r\n        this.editor = col.editor;\r\n        this.field = col.field;\r\n        this.filter = col.filter;\r\n        this.filterable = col.filterable;\r\n        this.footerClass = col.footerClass;\r\n        this.footerStyle = col.footerStyle;\r\n        this.format = col.format;\r\n        this.headerClass = col.headerClass;\r\n        this.headerStyle = col.headerStyle;\r\n        this.hidden = col.hidden;\r\n        this.locked = col.locked;\r\n        this.media = col.media;\r\n        this.sortable = col.sortable;\r\n        this.style = col.style;\r\n        this.title = col.title;\r\n        this.width = col.width;\r\n    }\r\n}\r\n","import { Component, Input } from '@angular/core';\r\n\r\nimport { Grid } from '../grid.model';\r\nimport { GridColumn } from '../grid-column/grid-column.model';\r\nimport { Metadata } from '../../../shared/models';\r\nimport { toArray } from '../../../shared/utils';\r\n\r\n@Component({\r\n  selector: 'iu-simple-grid',\r\n  template: `<iu-grid [model]=\"gridData\" [export]=\"export\" [filterable]=\"filterable\" [fileName]=\"fileName\" [pageSize]=\"pageSize\" [height]=\"height\">\r\n  <iu-grid-column *ngFor=\"let column of columns\" [model]=\"column\"></iu-grid-column>\r\n</iu-grid>\r\n`,\r\n  styles: [``]\r\n})\r\nexport class SimpleGridComponent {\r\n\r\n  @Input() data: any[] = [];\r\n  @Input() export = false;\r\n  @Input() filterable = false;\r\n  @Input() fileName = 'export';\r\n  @Input() height = 600;\r\n  @Input() pageSize = 30;\r\n\r\n  _metadata: Metadata;\r\n\r\n  constructor() { }\r\n\r\n  @Input()\r\n  set metadata(value: Metadata) {\r\n    this._metadata = value;\r\n  }\r\n\r\n  get metadata(): Metadata {\r\n    return this._metadata ? this._metadata : (toArray(this.data).length > 0 ? toArray(this.data)[0].metadata : null);\r\n  }\r\n\r\n  get columns(): GridColumn<any>[] {\r\n    return this.metadata ? this.columnKeys.map(key => new GridColumn(key, this.metadata[key].columnLabel)) : [];\r\n  }\r\n\r\n  get columnKeys(): string[] {\r\n    return this.metadata ? Object.keys(this.metadata).filter(key => this.metadata[key].columnLabel ? true : false) : [];\r\n  }\r\n\r\n  get columnLabels(): string[] {\r\n    return this.metadata ? this.columnKeys.map(key => this.metadata[key].columnLabel) : [];\r\n  }\r\n\r\n  get gridData(): Grid<any> {\r\n    return Grid.Build<any>(toArray(this.data));\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { MatCardModule, MatIconModule } from '@angular/material';\r\nimport { ExcelExportModule } from '@progress/kendo-angular-excel-export';\r\nimport { GridModule as KendoGridModule, PDFModule } from '@progress/kendo-angular-grid';\r\n\r\nimport { GridComponent } from './grid.component';\r\nimport { GridCellComponent } from './grid-cell/grid-cell.component';\r\nimport { GridColumnComponent } from './grid-column/grid-column.component';\r\nimport { SimpleGridComponent } from './simple-grid/simple-grid.component';\r\nimport { SharedModule } from '../../shared/shared.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    SharedModule,\r\n    ExcelExportModule,\r\n    KendoGridModule,\r\n    PDFModule,\r\n    MatCardModule,\r\n    MatIconModule\r\n  ],\r\n  declarations: [\r\n    GridComponent,\r\n    GridColumnComponent,\r\n    SimpleGridComponent,\r\n    GridCellComponent,\r\n  ],\r\n  exports: [\r\n    KendoGridModule,\r\n    GridComponent,\r\n    GridColumnComponent,\r\n    SimpleGridComponent,\r\n  ]\r\n})\r\nexport class GridModule { }\r\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'iu-not-found',\n  template: `<p>\n  not-found works!\n</p>\n`,\n  styles: [``]\n})\nexport class NotFoundComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { NgModule } from '@angular/core';\n\nimport { NotFoundComponent } from './not-found.component';\nimport { SharedModule } from '../../shared/shared.module';\n\n@NgModule({\n  imports: [\n    SharedModule,\n  ],\n  declarations: [NotFoundComponent],\n  exports: [NotFoundComponent]\n})\nexport class NotFoundModule { }\n","import { Component, OnInit, ChangeDetectionStrategy, Input, ElementRef } from '@angular/core';\r\n\r\nimport { Image } from '../../shared/models';\r\nimport { toPx } from '../../shared/utils';\r\n\r\n@Component({\r\n  selector: 'iu-wallpaper',\r\n  template: `<div class=\"wallpaper\" [style.height.px]=\"windowHeight\" [style.width.px]=\"windowWidth\">\r\n  <iu-collage [images]=\"images\" [canvasHeight]=\"canvasHeight\" [canvasWidth]=\"canvasWidth\" [totalRows]=\"totalRows\" [totalColumns]=\"totalColumns\"\r\n    [maxRows]=\"maxRows\" [maxColumns]=\"maxColumns\"></iu-collage>\r\n</div>`,\r\n  styles: [`.wallpaper{height:100%;width:100%}`],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class WallpaperComponent implements OnInit {\r\n  @Input() images: Image[] = [];\r\n  @Input() windowHeight = 0;\r\n  @Input() windowWidth = 0;\r\n\r\n  constructor(public elementRef: ElementRef) { }\r\n\r\n  get canvasHeight(): number {\r\n    return this.windowWidth * 2;\r\n  }\r\n\r\n  get canvasWidth(): number {\r\n    return this.windowWidth - 100;\r\n  }\r\n\r\n  get elementHeight(): number {\r\n    return this.elementRef && this.elementRef.nativeElement && this.elementRef.nativeElement.style ?\r\n      this.elementRef.nativeElement.style.height : 0;\r\n  }\r\n\r\n  get elementHeightPx(): string {\r\n    return toPx(this.elementHeight);\r\n  }\r\n\r\n  get elementWidth(): number {\r\n    return this.elementRef && this.elementRef.nativeElement && this.elementRef.nativeElement.style ?\r\n      this.elementRef.nativeElement.style.width : 0;\r\n  }\r\n\r\n  get elementWidthPx(): string {\r\n    return toPx(this.elementWidth);\r\n  }\r\n\r\n  get maxColumns(): number {\r\n    return 3;\r\n  }\r\n\r\n  get maxRows(): number {\r\n    return 3;\r\n  }\r\n\r\n  get totalColumns(): number {\r\n    return 12;\r\n  }\r\n\r\n  get totalRows(): number {\r\n    return 24;\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\n\r\nimport { WallpaperComponent } from './wallpaper.component';\r\nimport { CollageModule } from '../collage/collage.module';\r\nimport { SharedModule } from '../../shared/shared.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    SharedModule,\r\n    CollageModule,\r\n  ],\r\n  declarations: [\r\n    WallpaperComponent,\r\n  ],\r\n  exports: [\r\n    WallpaperComponent,\r\n  ]\r\n})\r\nexport class WallpaperModule { }\r\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'list'\n})\nexport class ListPipe implements PipeTransform {\n\n  transform(value: any[], args?: any): string {\n    return Array.isArray(value) ? value.reduce((acc, x) => acc ? `${acc}, ${x}` : x, '') : '';\n  }\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'phone'\n})\nexport class PhoneNumberPipe implements PipeTransform {\n\n  transform(value: string, args?: any): string {\n    return value.length !== 10 ? value\n      : `(${value[0]}${value[1]}${value[2]}) ${value[3]}${value[4]}${value[5]}-${value[6]}${value[7]}${value[8]}${value[9]}`;\n  }\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\nimport { DateHelper } from '../shared/date';\n\n@Pipe({\n  name: 'timeago'\n})\nexport class TimeAgoPipe implements PipeTransform {\n\n  transform(value: Date, args?: any): string {\n    return DateHelper.TimeAgo(value);\n  }\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'yesno'\n})\nexport class YesNoPipe implements PipeTransform {\n\n  transform(value: boolean, args?: any): 'Yes' | 'No' {\n    return value ? 'Yes' : 'No';\n  }\n\n}\n","import { NgModule } from '@angular/core';\r\nimport {\r\n  MatButtonModule,\r\n  MatCardModule,\r\n  MatCheckboxModule,\r\n  MatInputModule,\r\n  MatProgressBarModule,\r\n  MatProgressSpinnerModule,\r\n  MatRadioModule,\r\n  MatSelectModule,\r\n  MatTabsModule,\r\n  MatToolbarModule\r\n} from '@angular/material';\r\nimport { MatIconModule } from '@angular/material/icon';\r\n\r\nimport { LibraryComponent } from './library.component';\r\nimport { AccordionModule } from './components/accordion/accordion.module';\r\nimport { CollageModule } from './components/collage/collage.module';\r\nimport { DatepickerModule } from './components/datepicker/datepicker.module';\r\nimport { DialogModule } from './components/dialog/dialog.module';\r\nimport { FileUploadModule } from './components/file-upload/file-upload.module';\r\nimport { GridModule } from './components/grid/grid.module';\r\nimport { NotFoundModule } from './components/not-found/not-found.module';\r\nimport { TileModule } from './components/tile/tile.module';\r\nimport { WallpaperModule } from './components/wallpaper/wallpaper.module';\r\nimport { ListPipe } from './pipes/list.pipe';\r\nimport { PhoneNumberPipe } from './pipes/phone-number.pipe';\r\nimport { TimeAgoPipe } from './pipes/time-ago.pipe';\r\nimport { YesNoPipe } from './pipes/yes-no.pipe';\r\nimport { SharedModule } from './shared/shared.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    SharedModule,\r\n    AccordionModule,\r\n    DatepickerModule,\r\n    DialogModule,\r\n    FileUploadModule,\r\n    GridModule,\r\n    NotFoundModule,\r\n    MatButtonModule,\r\n    MatCardModule,\r\n    MatCheckboxModule,\r\n    MatIconModule,\r\n    MatInputModule,\r\n    MatProgressBarModule,\r\n    MatProgressSpinnerModule,\r\n    MatRadioModule,\r\n    MatSelectModule,\r\n    MatTabsModule,\r\n    MatToolbarModule,\r\n  ],\r\n  declarations: [\r\n    LibraryComponent,\r\n    ListPipe,\r\n    PhoneNumberPipe,\r\n    TimeAgoPipe,\r\n    YesNoPipe,\r\n  ],\r\n  exports: [\r\n    LibraryComponent,\r\n    SharedModule,\r\n    AccordionModule,\r\n    CollageModule,\r\n    DatepickerModule,\r\n    DialogModule,\r\n    FileUploadModule,\r\n    // GridModule,\r\n    ListPipe,\r\n    NotFoundModule,\r\n    PhoneNumberPipe,\r\n    TileModule,\r\n    TimeAgoPipe,\r\n    WallpaperModule,\r\n    YesNoPipe,\r\n    MatButtonModule,\r\n    MatCardModule,\r\n    MatCheckboxModule,\r\n    MatIconModule,\r\n    MatInputModule,\r\n    MatProgressBarModule,\r\n    MatProgressSpinnerModule,\r\n    MatRadioModule,\r\n    MatSelectModule,\r\n    MatTabsModule,\r\n    MatToolbarModule,\r\n  ]\r\n})\r\nexport class LibraryModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  declarations: []\r\n})\r\nexport class AnimationsModule { }\r\n","import { Component, Inject, ViewEncapsulation } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material';\n\nimport { DialogAction, DialogModel } from '../../dialog/dialog.model';\nimport { build } from '../../../shared/utils';\n\n@Component({\n  selector: 'iu-editor-window',\n  template: `<span id=\"editor-window\">\n  <mat-toolbar color=\"primary\" mat-dialog-title>\n    <span class=\"dialog-title\">\n      {{ title }}\n      <button mat-button [mat-dialog-close]=\"null\">\n        <mat-icon>close</mat-icon>\n      </button>\n    </span>\n  </mat-toolbar>\n  <mat-dialog-content>\n    <div id=\"expanded-editor\">\n      <iu-editor [value]=\"data\" [expanded]=\"true\" [height]=\"380\" (changes)=\"update($event)\"></iu-editor>\n    </div>\n  </mat-dialog-content>\n  <mat-dialog-actions>\n    <button mat-raised-button (click)=\"close()\" [style.width]=\"actionWidth\" color=\"accent\">Save and Close</button>\n  </mat-dialog-actions>\n</span>\n`,\n  styles: [`#editor-window #expanded-editor{margin:0;padding:0;height:60vh}#editor-window .mat-toolbar{margin:-24px -24px 0;width:calc(100% + 48px);min-height:32px!important}#editor-window .mat-toolbar .mat-toolbar-row{height:48px}#editor-window .mat-toolbar .dialog-title{position:relative;height:calc(100% - 8px);width:100%;margin-top:8px}#editor-window .mat-toolbar .dialog-title button{cursor:pointer;position:absolute;right:0;top:-5px;border-radius:100%;height:42px;width:42px;min-width:36px}#editor-window .mat-toolbar .dialog-title button:hover,#editor-window .mat-toolbar .dialog-title button:hover mat-icon{font-weight:700}#editor-window .mat-toolbar .dialog-title mat-icon{position:absolute;top:9px;right:8px;z-index:1}#editor-window .mat-toolbar-row{height:48px}#editor-window .mat-dialog-actions{margin-left:-24px;margin-right:-24px;color:#fff;padding:0}#editor-window .mat-dialog-actions button{padding:12px 0}#editor-window .mat-dialog-actions .mat-accent{color:#fff!important}`],\n  encapsulation: ViewEncapsulation.None\n})\nexport class EditorWindowComponent {\n\n  actionWidth = '100%';\n\n  constructor(\n    @Inject(MAT_DIALOG_DATA) public data: any,\n    public dialogRef: MatDialogRef<EditorWindowComponent>\n  ) { }\n\n  get actions(): DialogAction[] {\n    return [\n      build(DialogAction, { value: this.data, label: 'Save and Close' }),\n    ];\n  }\n\n  get dialog(): DialogModel {\n    return build(DialogModel, {\n      title: this.title,\n      actions: this.actions\n    });\n  }\n\n  get title(): string {\n    return 'Editor';\n  }\n\n  close() {\n    this.dialogRef.close(this.data);\n  }\n\n  update(data: string) {\n    this.data = data;\n  }\n\n}\n","import {\r\n  ChangeDetectionStrategy,\r\n  Component,\r\n  EventEmitter,\r\n  Input,\r\n  OnDestroy,\r\n  OnInit,\r\n  Output,\r\n  AfterViewInit,\r\n  forwardRef,\r\n  ChangeDetectorRef\r\n} from '@angular/core';\r\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\r\nimport { MatDialog } from '@angular/material';\r\nimport { Subscription } from 'rxjs';\r\n\r\nimport { EditorWindowComponent } from './editor-window/editor-window.component';\r\n\r\ndeclare var tinymce: any;\r\n\r\nexport const EDITOR_ACCESSOR: any = {\r\n  provide: NG_VALUE_ACCESSOR,\r\n  useExisting: forwardRef(() => EditorComponent),\r\n  multi: true\r\n};\r\n\r\n@Component({\r\n  selector: 'iu-editor',\r\n  template: `<mat-card class=\"editor\">\r\n  <textarea [id]=\"elementId\">\r\n    <ng-content *ngIf=\"!hasValue\"></ng-content>\r\n    <span *ngIf=\"hasValue\">{{ value }}</span>\r\n  </textarea>\r\n  <button *ngIf=\"showExpand\" id=\"expand-editor\" (click)=\"expand($event)\" mat-button>\r\n    <mat-icon>fullscreen</mat-icon>\r\n  </button>\r\n</mat-card>\r\n`,\r\n  styles: [`.mat-card{display:block;clear:both;padding:1px 3px 1px 1px;border-radius:2px}#expand-editor{font-size:36px;position:absolute;right:3px;top:3px;color:#fff;text-align:center;min-width:36px;line-height:24px;padding:2px}.mat-icon{font-size:36px;position:relative;left:-6px;top:-7px}`],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  providers: [EDITOR_ACCESSOR]\r\n})\r\nexport class EditorComponent implements OnInit, OnDestroy, AfterViewInit, ControlValueAccessor {\r\n\r\n  @Input() type: 'basic' | 'full' = 'full';\r\n  @Input() elementId: string;\r\n  @Input() expanded = false;\r\n  @Input() height = 100;\r\n  @Input() plugins = [\r\n    'advlist autolink lists link image charmap print preview hr anchor pagebreak',\r\n    'searchreplace wordcount visualblocks visualchars code fullscreen',\r\n    'insertdatetime media nonbreaking save table contextmenu directionality',\r\n    'emoticons template paste textcolor colorpicker textpattern imagetools toc help'\r\n  ];\r\n  @Input() skinUrl = '/assets/skins/lightgray-gradient';\r\n  @Input() templates = [\r\n    { title: 'Test template 1', content: 'Test 1' },\r\n    { title: 'Test template 2', content: 'Test 2' }\r\n  ];\r\n  @Output() changes = new EventEmitter<any>();\r\n  private onModelChange: Function;\r\n  private onTouch: Function;\r\n  _value: string;\r\n  focused: string;\r\n  dialogRef: Subscription;\r\n  editorRef: any;\r\n\r\n  constructor(public dialog: MatDialog, private ref: ChangeDetectorRef) { }\r\n\r\n  @Input() set value(val: string) {\r\n    this._value = val;\r\n    this.setContent(this._value);\r\n  }\r\n\r\n  get value() {\r\n    return this._value;\r\n  }\r\n\r\n  get basic(): boolean {\r\n    return this.type === 'basic';\r\n  }\r\n\r\n  get full(): boolean {\r\n    return this.type === 'full';\r\n  }\r\n\r\n  get config(): any {\r\n    switch (this.type) {\r\n      case 'basic':\r\n        return this.configBasic;\r\n      case 'full':\r\n        return this.configFull;\r\n      default:\r\n        return this.configFull;\r\n    }\r\n  }\r\n\r\n  get configBasic(): any {\r\n    return {\r\n      height: this.height,\r\n      selector: '#' + this.elementId,\r\n      menubar: false,\r\n      skin_url: this.skinUrl,\r\n      theme: 'modern',\r\n      plugins: [\r\n        'advlist autolink lists link image charmap print preview anchor',\r\n        'searchreplace visualblocks code fullscreen',\r\n        'insertdatetime media table contextmenu paste code'\r\n      ],\r\n      toolbar: `undo redo | insert | styleselect | bold italic |\r\n       alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link`,\r\n      content_css: [\r\n        '//fonts.googleapis.com/css?family=Lato:300,300i,400,400i',\r\n        '//www.tinymce.com/css/codepen.min.css'\r\n      ],\r\n      setup: editor => {\r\n        this.editorRef = editor;\r\n        editor.on('keyup', (e) => {\r\n          e.preventDefault();\r\n          const content = editor.getContent();\r\n          this.onKeyup(content);\r\n        });\r\n        editor.on('change', (e) => {\r\n          e.preventDefault();\r\n          const content = editor.getContent();\r\n          this.onChange(content);\r\n        });\r\n        editor.on('viewcontentloaded', (e) => {\r\n          editor.setContent('');\r\n        });\r\n      },\r\n    };\r\n  }\r\n\r\n  get configFull(): any {\r\n    return {\r\n      height: this.height,\r\n      selector: '#' + this.elementId,\r\n      plugins: this.plugins,\r\n      skin_url: this.skinUrl,\r\n      templates: this.templates,\r\n      theme: 'modern',\r\n      toolbar1: `undo redo | insert | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent`,\r\n      toolbar2: 'print preview | forecolor backcolor | link',\r\n      setup: editor => {\r\n        this.editorRef = editor;\r\n        editor.on('keyup', (e) => {\r\n          e.preventDefault();\r\n          const content = editor.getContent();\r\n          this.onKeyup(content);\r\n        });\r\n        editor.on('change', (e) => {\r\n          e.preventDefault();\r\n          const content = editor.getContent();\r\n          this.onChange(content);\r\n        });\r\n        editor.on('viewcontentloaded', (e) => {\r\n          editor.setContent('');\r\n        });\r\n      },\r\n      image_advtab: true,\r\n      content_css: [\r\n        '//fonts.googleapis.com/css?family=Lato:300,300i,400,400i',\r\n        '//www.tinymce.com/css/codepen.min.css'\r\n      ]\r\n    };\r\n  }\r\n\r\n  get hasValue() {\r\n    return this.value ? true : false;\r\n  }\r\n\r\n  get showExpand() {\r\n    return this.full && !this.expanded;\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    tinymce.init(this.config);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    tinymce.remove(this.editorRef);\r\n  }\r\n\r\n  clear() {\r\n    this.value = '';\r\n  }\r\n\r\n  expand(e: any) {\r\n    if (e && e.preventDefault) {\r\n      e.preventDefault();\r\n    }\r\n    const config = {\r\n      data: this.editorRef.getContent(),\r\n      width: '1200px'\r\n    };\r\n    this.openDialog(config);\r\n  }\r\n\r\n  registerOnChange(fn: Function) {\r\n    this.onModelChange = fn;\r\n  }\r\n\r\n  registerOnTouched(fn: Function) {\r\n    this.onTouch = fn;\r\n  }\r\n\r\n  writeValue(value: string) {\r\n    this.value = value;\r\n  }\r\n\r\n  onChange(value: string) {\r\n    this.value = value;\r\n    this.changes.emit(value);\r\n    if (this.onModelChange) {\r\n      this.onModelChange(value);\r\n    }\r\n  }\r\n\r\n  onUpdate(value: string) {\r\n    this.onChange(value);\r\n    this.setContent(this.value);\r\n  }\r\n\r\n  onKeyup(value: string) {\r\n    this.onChange(value);\r\n  }\r\n\r\n  onBlur(value: string) {\r\n    this.focused = '';\r\n  }\r\n\r\n  onFocus(value: string) {\r\n    this.focused = value;\r\n    if (this.onTouch) {\r\n      this.onTouch();\r\n    }\r\n  }\r\n\r\n  openDialog(config: any) {\r\n    const dialogRef = this.dialog.open(EditorWindowComponent, config);\r\n    this.dialogRef = dialogRef.afterClosed().subscribe(result => {\r\n      this.closeDialog(result);\r\n    });\r\n  }\r\n\r\n  closeDialog(value: string) {\r\n    if (value) {\r\n      this.onChange(value);\r\n    }\r\n    this.dialogRef.unsubscribe();\r\n  }\r\n\r\n  setContent(value: string) {\r\n    if (this.editorRef && this.editorRef.getContent) {\r\n      const content = this.editorRef.getContent();\r\n      if (value && content != value) {\r\n        this.editorRef.setContent(value);\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { MatButtonModule, MatCardModule, MatDialogModule, MatIconModule, MatToolbarModule } from '@angular/material';\r\n\r\nimport { EditorComponent } from './editor.component';\r\nimport { EditorWindowComponent } from './editor-window/editor-window.component';\r\nimport { DialogModule } from '../dialog/dialog.module';\r\nimport { SharedModule } from '../../shared/shared.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    SharedModule,\r\n    FormsModule,\r\n    DialogModule,\r\n    MatButtonModule,\r\n    MatCardModule,\r\n    MatDialogModule,\r\n    MatIconModule,\r\n    MatToolbarModule,\r\n  ],\r\n  declarations: [\r\n    EditorComponent,\r\n    EditorWindowComponent,\r\n  ],\r\n  entryComponents: [\r\n    EditorWindowComponent,\r\n  ],\r\n  exports: [\r\n    EditorComponent,\r\n    EditorWindowComponent,\r\n  ],\r\n})\r\nexport class EditorModule { }\r\n","import { NgModule, Type, ModuleWithProviders } from '@angular/core';\nimport { EffectsModule as NgrxEffectsModule } from '@ngrx/effects';\n\n@NgModule({\n  imports: [\n    NgrxEffectsModule\n  ],\n  declarations: []\n})\nexport class EffectsModule {\n\n  static forFeature(featureEffects: Type<any>[]): ModuleWithProviders {\n    return NgrxEffectsModule.forFeature(featureEffects);\n  }\n\n  static forRoot(rootEffects: Type<any>[]): ModuleWithProviders {\n    return NgrxEffectsModule.forRoot(rootEffects);\n  }\n\n}\n","import { ErrorOutlet, ErrorPayload, Error } from './errors.models';\r\nimport { Action } from '../store/models';\r\n\r\nexport class ErrorActions {\r\n    static ADD = '[Error] Add Error';\r\n    static REMOVE = '[Error] Remove Error';\r\n    static HANDLE_ERROR = '[Error Handler] Handle Error';\r\n    static THROW_ERROR = '[Error Handler] Throw Error';\r\n\r\n    static addAtOutlet(e: Error, outlet: ErrorOutlet): Action {\r\n        let payload: ErrorPayload = {\r\n            key: outlet.key,\r\n            error: outlet.handler ? outlet.handler(e) : e\r\n        };\r\n        return ErrorActions.add(payload);\r\n    }\r\n\r\n    static addError(key: string, e: Error): Action {\r\n        let payload: ErrorPayload = {\r\n            key: key,\r\n            error: e\r\n        };\r\n        return ErrorActions.add(payload);\r\n    }\r\n\r\n    static add(payload: ErrorPayload): Action {\r\n        return {\r\n            type: ErrorActions.ADD,\r\n            payload: payload\r\n        };\r\n    }\r\n\r\n    static remove(key: string): Action {\r\n        return {\r\n            type: ErrorActions.REMOVE,\r\n            payload: key\r\n        };\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ErrorsService {\n\n  constructor() { }\n}\n","import { Injectable } from '@angular/core';\r\nimport { Effect, Actions } from '@ngrx/effects';\r\nimport { Action } from '@ngrx/store';\r\nimport { Observable } from 'rxjs';\r\nimport { filter, map } from 'rxjs/operators';\r\n\r\nimport { ErrorActions } from './errors.actions';\r\nimport { ErrorsService } from './errors.service';\r\n\r\n\r\n@Injectable()\r\nexport class ErrorEffects {\r\n    actionTypes: string[];\r\n\r\n    /**\r\n     * Listens for thrown errors and handles them accordingly\r\n     */\r\n    @Effect() handleError$: Observable<Action> = this.actions$.pipe(\r\n        filter((action: Action) => action.type === ErrorActions.THROW_ERROR),\r\n        map((data) => {\r\n            return <Action>{ type: ErrorActions.HANDLE_ERROR };\r\n        })\r\n    );\r\n\r\n    constructor(\r\n        private actions$: Actions,\r\n        private service: ErrorsService\r\n    ) { }\r\n}\r\n","import { Injectable, ErrorHandler } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class GlobalErrorsService implements ErrorHandler {\n\n  constructor() { }\n\n  handleError(error) {\n    alert(error);\n    // IMPORTANT: Rethrow the error otherwise it gets swallowed\n    throw error;\n  }\n\n}\n","import { NgModule, ModuleWithProviders, ErrorHandler } from '@angular/core';\n\nimport { ErrorEffects } from './errors.effects';\nimport { ErrorsService } from './errors.service';\nimport { GlobalErrorsService } from './global-errors.service';\n\n@NgModule({\n  imports: [],\n  declarations: []\n})\nexport class ErrorsModule {\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: ErrorsModule,\n      providers: [\n        ErrorsService,\n        ErrorEffects,\n        {\n          provide: ErrorHandler,\n          useClass: GlobalErrorsService\n        }\n      ]\n    };\n  }\n}\n","export class Error {\r\n    message?: string = '';\r\n    statusCode?: number = 0;\r\n}\r\n\r\nexport interface ErrorOutlet {\r\n    key: string;\r\n    handler?: (e: Error) => Error;\r\n}\r\n\r\nexport interface ErrorPayload {\r\n    key: string;\r\n    error: Error;\r\n}\r\n","import { Store } from '@ngrx/store';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\n\r\nimport { Error } from './errors.models';\r\nimport { Dictionary } from '../shared/models';\r\n\r\nexport function errorsSelector(store: Store<any>): Observable<Dictionary<Error>> {\r\n    return store.select(s => s['errors']);\r\n}\r\n\r\nexport function errorSelector(store: Store<any>, key: string): Observable<Error> {\r\n    return errorsSelector(store).pipe(map(errors => errors[key]));\r\n}\r\n","import { Action } from '../store/models';\r\nimport { Collection } from '../shared/collection';\r\nimport { Dictionary } from '../shared/models';\r\nimport { build } from '../shared/utils';\r\n\r\nexport class Event {\r\n    emittedCount = 0;\r\n    handler: (action: Action) => any;\r\n    key = '';\r\n    onAction: string | string[] = '';\r\n    value: any = null;\r\n}\r\n\r\nexport class Events extends Collection<Event> {\r\n\r\n    get actions(): string[] {\r\n        return this.toArray().reduce((acc: any[], event: Event) => {\r\n            const addValues = !event.onAction ?\r\n                [] : typeof event.onAction === 'string' ?\r\n                    acc.indexOf(event.onAction) === -1 ? [event.onAction] : []\r\n                    : event.onAction.filter(x => acc.indexOf(x) === -1);\r\n            return [...acc, ...addValues];\r\n        }, []);\r\n    }\r\n\r\n    get eventsByAction(): Dictionary<Event[]> {\r\n        return this.toArray().reduce((acc: Dictionary<Event[]>, event: Event) => {\r\n            if (typeof event.onAction === 'string') {\r\n                const val: Event[] = acc[event.onAction] || [];\r\n                acc[event.onAction] = [...val, event];\r\n            } else {\r\n                event.onAction.forEach(actionType => {\r\n                    const val: Event[] = acc[actionType] || [];\r\n                    acc[actionType] = [...val, event];\r\n                });\r\n            }\r\n            return acc;\r\n        }, {});\r\n    }\r\n\r\n    addEvent(payload: Event): Events {\r\n        return build(Events, this.addItem(payload, payload.key));\r\n    }\r\n\r\n    getActionEvents(actionType: string): Event[] {\r\n        return this.eventsByAction[actionType];\r\n    }\r\n\r\n    removeEvent(payload: string): Events {\r\n        return build(Events, this.removeItem(payload));\r\n    }\r\n\r\n    replaceEvents(payload: Event[]): Events {\r\n        const events = this.copyItems();\r\n        payload.forEach(e => {\r\n            events[e.key] = e;\r\n        });\r\n        return build(Events, this, { items: events });\r\n    }\r\n\r\n    triggerEvent(payload: Action): Events {\r\n        const events = this.getActionEvents(payload.type)\r\n            .map(e => build(Event, e, { value: e.handler ? e.handler(payload) : payload }));\r\n        return this.replaceEvents(events);\r\n    }\r\n\r\n    updateValue(payload: UpdateValuePayload): Events {\r\n        const event = build(Event, this.items[payload.key], { value: payload.value });\r\n        return build(Events, this.updateItem(event, payload.key, Event));\r\n    }\r\n\r\n}\r\n\r\nexport class UpdateValuePayload {\r\n    key: string;\r\n    value: any;\r\n}\r\n","import { Event, UpdateValuePayload } from './events.models';\r\nimport { Action, ActionWithKey } from '../store/models';\r\nimport { build, guid } from '../shared/utils';\r\n\r\nexport class EventActions {\r\n    static ADD_EVENT = '[Events] Add Event';\r\n    static REMOVE_EVENT = '[Events] Remove Event';\r\n    static TRIGGER_EVENT = '[Events] Trigger Event';\r\n    static UPDATE_VALUE = '[Events] Update Value';\r\n\r\n    static addEvent(onAction: string | string[], handler?: (action: Action) => any, value = null): ActionWithKey {\r\n        const e: Event = build(Event, {\r\n            onAction,\r\n            handler,\r\n            value,\r\n            key: guid()\r\n        });\r\n        return {\r\n            type: EventActions.ADD_EVENT,\r\n            payload: e,\r\n            key: e.key\r\n        };\r\n    }\r\n\r\n    static removeEvent(key: string): Action {\r\n        return {\r\n            type: EventActions.REMOVE_EVENT,\r\n            payload: key\r\n        };\r\n    }\r\n\r\n    static triggerEvent(action: Action): Action {\r\n        return {\r\n            type: EventActions.TRIGGER_EVENT,\r\n            payload: action\r\n        };\r\n    }\r\n\r\n    static updateValue(key: string, value: any): Action {\r\n        const payload = build(UpdateValuePayload,\r\n            {\r\n                key,\r\n                value\r\n            }\r\n        );\r\n        return {\r\n            type: EventActions.UPDATE_VALUE,\r\n            payload: payload\r\n        };\r\n    }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Actions, Effect } from '@ngrx/effects';\r\nimport { Store } from '@ngrx/store';\r\nimport { Observable } from 'rxjs';\r\nimport { filter, map } from 'rxjs/operators';\r\n\r\nimport { EventActions } from './events.actions';\r\nimport { Events } from './events.models';\r\nimport { Action } from '../store/models';\r\n\r\n@Injectable()\r\nexport class EventEffects {\r\n\r\n    events: Events = new Events();\r\n\r\n    /**\r\n     * Trigger event if action is a registered trigger.\r\n     */\r\n    @Effect() onTriggerEvent: Observable<Action> = this.actions$.pipe(\r\n        filter(action => this.events.actions.indexOf(action.type) !== -1),\r\n        map(this.trigger)\r\n    );\r\n\r\n    constructor(\r\n        private actions$: Actions,\r\n        private store: Store<any>\r\n    ) {\r\n        this.store.select(s => s['events'])\r\n            .subscribe(events => {\r\n                this.events = events;\r\n            });\r\n    }\r\n\r\n    trigger(action: Action): Action {\r\n        return EventActions.triggerEvent(action);\r\n    }\r\n\r\n}\r\n","import { Store } from '@ngrx/store';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\n\r\nimport { Events, Event } from './events.models';\r\nimport { Dictionary } from '../shared/models';\r\n\r\n\r\nexport function eventsSelector(store: Store<any>): Observable<Dictionary<Event>> {\r\n    return store.select(s => s['events']).pipe(\r\n        map((events: Events) => events.items)\r\n    );\r\n}\r\n\r\nexport function eventSelector(store: Store<any>, key: string): Observable<Event> {\r\n    return eventsSelector(store).pipe(\r\n        map(events => events[key])\r\n    );\r\n}\r\n\r\nexport function eventValueSelector(store: Store<any>, key: string): Observable<any> {\r\n    return eventSelector(store, key).pipe(\r\n        map(e => e ? e.value : null)\r\n    );\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Store } from '@ngrx/store';\r\nimport { Observable, Subscription, of } from 'rxjs';\r\nimport { combineLatest, skip, take } from 'rxjs/operators';\r\n\r\nimport { EventActions } from './events.actions';\r\nimport { eventValueSelector } from './events.selectors';\r\nimport { HttpAction } from '../http/http.models';\r\nimport { Action } from '../store/models';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class EventsService {\r\n\r\n  eventIndex = 0;\r\n  events: Event[] = [];\r\n\r\n  constructor(public store: Store<any>) {\r\n  }\r\n\r\n  get eventKey(): string {\r\n    this.eventIndex++;\r\n    return `event-${this.eventIndex}`;\r\n  }\r\n\r\n  addEvent(actionType: string, handler?: (action: Action) => any): string {\r\n    const f = handler ? handler : (action: Action) => true;\r\n    const actionWithKey = EventActions.addEvent(actionType, f, false);\r\n    this.store.dispatch(actionWithKey);\r\n    return actionWithKey.key;\r\n  }\r\n\r\n  dispatch(action: HttpAction, handler?: (action: Action) => any): Observable<any> {\r\n    return this.dispatchHttpAction(action, handler);\r\n  }\r\n\r\n  dispatchHttpAction(action: HttpAction, handler?: (action: Action) => any): Observable<any> {\r\n    const successAction = action.payload.onSuccess;\r\n    const errorAction = typeof (action.payload.onError) === 'string' ? action.payload.onError : null;\r\n    const success = this.takeOne(successAction, handler);\r\n    const obs = errorAction ? success.pipe(\r\n      combineLatest(this.takeOne(errorAction, handler), (x, y) => true)\r\n    ) : success;\r\n    this.store.dispatch(action);\r\n    return obs;\r\n  }\r\n\r\n  removeEvent(eventKey: string) {\r\n    this.store.dispatch(EventActions.removeEvent(eventKey));\r\n  }\r\n\r\n  subscribe(action: string, handler: (e: any) => void): Subscription {\r\n    return this.take(1, action).subscribe(handler);\r\n  }\r\n\r\n  take(n = 1, actionType: string, handler?: (action: Action) => any): Observable<any> {\r\n    const key = this.addEvent(actionType, handler);\r\n    return eventValueSelector(this.store, key).pipe(\r\n      skip(1),\r\n      take(n)\r\n    );\r\n  }\r\n\r\n  takeFrom(n = 1, actions: string[], handler?: (action: Action) => any): Observable<any> {\r\n    const keys = actions.map(action => this.addEvent(action, handler));\r\n    return keys.map(key => eventValueSelector(this.store, key))\r\n      .reduce((acc, obs) => {\r\n        return acc.pipe(\r\n          combineLatest(obs, (x, y) => true)\r\n        );\r\n      }, of(false)).pipe(\r\n        skip(1),\r\n        take(n)\r\n      );\r\n  }\r\n\r\n  takeOne(actionType: string, handler?: (action: Action) => any): Observable<any> {\r\n    return this.take(1, actionType, handler);\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\n\r\nimport { EventEffects } from './events.effects';\r\nimport { EventsService } from './events.service';\r\n\r\n@NgModule({\r\n  providers: [\r\n    EventEffects,\r\n    EventsService,\r\n  ],\r\n  exports: []\r\n})\r\nexport class EventsModule { }\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { FormsModule as Ng2FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\n@NgModule({\r\n  imports: [\r\n    Ng2FormsModule,\r\n    ReactiveFormsModule,\r\n  ],\r\n  exports: [\r\n    Ng2FormsModule,\r\n    ReactiveFormsModule,\r\n  ]\r\n})\r\nexport class FormsModule {\r\n\r\n  static forRoot(): ModuleWithProviders {\r\n    return {\r\n      ngModule: FormsModule,\r\n      providers: []\r\n    };\r\n  }\r\n\r\n}\r\n","import { AbstractControl, Form } from '@angular/forms';\r\n\r\nimport { Action } from '../store/models';\r\n\r\nexport class FormActions {\r\n    static ADD = '[forms] Add Form';\r\n    static RESET = '[forms] Reset Forms';\r\n    static NAVIGATE = '[forms] Navigate to Form';\r\n    static STATUS_CHANGES = '[form] Status Changes';\r\n    static VALUE_CHANGES = '[form] Value Changes';\r\n\r\n    static addForm(control: AbstractControl): Action {\r\n        return {\r\n            type: FormActions.ADD,\r\n            payload: control\r\n        };\r\n    }\r\n\r\n    static changeStatus(control: AbstractControl, changes: any): Action {\r\n        return {\r\n            type: FormActions.STATUS_CHANGES,\r\n            payload: {\r\n                control: control,\r\n                changes: changes\r\n            }\r\n        };\r\n    }\r\n\r\n    static changeValue(control: AbstractControl, changes: any): Action {\r\n        return {\r\n            type: FormActions.VALUE_CHANGES,\r\n            payload: {\r\n                control: control,\r\n                changes: changes\r\n            }\r\n        };\r\n    }\r\n\r\n    static navigateToForm(route: string): Action {\r\n        return {\r\n            type: FormActions.NAVIGATE,\r\n            payload: route\r\n        };\r\n    }\r\n\r\n    static resetForms(forms: Form[]): Action {\r\n        return {\r\n            type: FormActions.RESET,\r\n            payload: forms\r\n        };\r\n    }\r\n\r\n}\r\n","import { AbstractControl, FormBuilder, FormArray as Ng2FormArray, ValidatorFn, AsyncValidatorFn } from '@angular/forms';\r\n\r\nimport { buildAbstractControl, buildControlsConfig } from './utils';\r\nimport { TypeConstructor } from '../shared/models';\r\nimport { build, getValue, toArray } from '../shared/utils';\r\n\r\nexport class FormArray extends Ng2FormArray {\r\n\r\n    ctor: TypeConstructor<any>;\r\n\r\n    static Build<T>(fb: FormBuilder, controls: AbstractControl[], validator?: ValidatorFn, asyncValidator?: AsyncValidatorFn) {\r\n        return new FormArray(fb, controls, validator, asyncValidator);\r\n    }\r\n\r\n    static BuildWithType<T>(ctor: TypeConstructor<T>, fb: FormBuilder, controls: AbstractControl[] = [], validator?: ValidatorFn, asyncValidator?: AsyncValidatorFn) {\r\n        const fa = new FormArray(fb, controls, validator, asyncValidator);\r\n        fa.ctor = ctor;\r\n        return fa;\r\n    }\r\n\r\n    static BuildWithTypeAndValue<T>(ctor: TypeConstructor<T>, value: T[], fb: FormBuilder, controls: AbstractControl[] = [], validator?: ValidatorFn, asyncValidator?: AsyncValidatorFn) {\r\n        const fa = new FormArray(fb, controls, validator, asyncValidator);\r\n        fa.ctor = ctor;\r\n        fa.setValue(value);\r\n        return fa;\r\n    }\r\n\r\n    static BuildWithValue<T>(value: T[], fb: FormBuilder, controls: AbstractControl[] = [], validator?: ValidatorFn, asyncValidator?: AsyncValidatorFn) {\r\n        const fa = new FormArray(fb, controls, validator, asyncValidator);\r\n        fa.setValue(value);\r\n        return fa;\r\n    }\r\n\r\n    static GetValue(value: any[], ctor: TypeConstructor<any>): any[] {\r\n        return toArray(value).map(x => getValue(build(ctor, x)));\r\n    }\r\n\r\n    constructor(public fb: FormBuilder, controls: AbstractControl[], validator?: ValidatorFn, asyncValidator?: AsyncValidatorFn) {\r\n        super(controls, validator, asyncValidator);\r\n    }\r\n\r\n    get maxIndex(): number {\r\n        return this.length - 1;\r\n    }\r\n\r\n    get values(): any[] {\r\n        return [...this.value];\r\n    }\r\n\r\n    buildControls(n: number): AbstractControl[] {\r\n        return this.buildItems(n).map(x => buildAbstractControl(this.fb, x));\r\n    }\r\n\r\n    buildItems(n: number): any[] {\r\n        return Array.from(Array(n).keys()).map(x => this.ctor ? getValue(new this.ctor()) : {});\r\n    }\r\n\r\n    getValue(value: any[]): any[] {\r\n        return this.ctor ? toArray(value).map(x => getValue(build(this.ctor, x))) : value;\r\n    }\r\n\r\n    resetValue(value: any[]) {\r\n        this.removeAll();\r\n        this.addControls(value);\r\n        this.setValue(value);\r\n    }\r\n\r\n    setLength(value: number) {\r\n        if (this.length < value) {\r\n            this.add(value - this.length);\r\n        } else if (this.length > value) {\r\n            this.remove(this.length - value);\r\n        }\r\n    }\r\n\r\n    setValue(value: any[]) {\r\n        this.setLength(value.length);\r\n        super.setValue(this.getValue(value));\r\n    }\r\n\r\n    findControlById(id: any): AbstractControl {\r\n        return this.controls.find(control => control.value && control.value['id'] && control.value['id'] === id);\r\n    }\r\n\r\n    removeAll() {\r\n        this.controls = [];\r\n    }\r\n\r\n    removeIndexes(indexes: any[]) {\r\n        indexes.forEach(index => {\r\n            this.removeAt(index);\r\n        });\r\n    }\r\n\r\n    add(n: number) {\r\n        this.buildControls(n).forEach(x => {\r\n            this.push(x);\r\n        });\r\n    }\r\n\r\n    remove(n: number) {\r\n        const k = Math.min(n, this.length);\r\n        Array.from(Array(k).keys()).forEach(x => {\r\n            this.removeAt(this.maxIndex);\r\n        });\r\n    }\r\n\r\n    addControls(value: any[]) {\r\n        const controls = value.map(x => this.fb.group(buildControlsConfig(x, this.fb)));\r\n        controls.forEach(control => {\r\n            this.push(control);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Set value of each control.\r\n     * @param ctor Class constructor\r\n     * @param props Values to assign to props of each control\r\n     */\r\n    setAll(ctor: TypeConstructor<any>, props: any) {\r\n        this.controls.forEach(control => {\r\n            control.setValue(build(new ctor(), control.value, props));\r\n        });\r\n    }\r\n\r\n}\r\n","import { FormGroup, FormBuilder, AbstractControl, FormControl, ValidatorFn, AsyncValidatorFn } from '@angular/forms';\r\n\r\nimport { FormArray } from './models';\r\nimport { Dictionary, TypeConstructor } from '../shared/models';\r\nimport { getAllProps, ignoreKey, inArray, build, getValue } from '../shared/utils';\r\n\r\nexport function buildAbstractControl(fb: FormBuilder, value: any): FormGroup | FormArray | FormControl {\r\n    return isGroupValue(value) ? fb.group(buildControlsConfig(value, fb)) : fb.control(value);\r\n}\r\n\r\n/**\r\n * Construct form builder and initialize new form array\r\n */\r\nexport function buildArrayFromType<T>(ctor: TypeConstructor<T>, validator?: ValidatorFn, asyncValidator?: AsyncValidatorFn): FormArray {\r\n    const fb = new FormBuilder();\r\n    return FormArray.BuildWithType(ctor, fb, [], validator, asyncValidator);\r\n}\r\n\r\nexport function buildControl(fb: FormBuilder, model: any, key: string): FormGroup | FormArray | any[] {\r\n    return isFormGroup(model, key) ?\r\n        fb.group(buildControlsConfig(model[key], fb))\r\n        : (isFormArray(model, key) ? buildFormArray(fb, model, key)\r\n            : (hasValidators(model, key) ? [model[key], model['metadata'][key]['validators']]\r\n                : [model[key]]));\r\n}\r\n\r\n/**\r\n * Construct form builder and initialize new form group.\r\n */\r\nexport function buildControlFromModel<T>(model: T): FormGroup {\r\n    const fb = new FormBuilder();\r\n    const controlsConfig = buildControlsConfig(model, fb);\r\n    return hasGroupValidators(model) ? fb.group(controlsConfig, model['metadata']['validators']) : fb.group(controlsConfig);\r\n}\r\n\r\n/**\r\n * Function to recursively construct form control config object.\r\n */\r\nexport function buildControlsConfig(model: any, fb: FormBuilder): Dictionary<any> {\r\n    const keys = getAllProps(model);\r\n    const config: Dictionary<any> = {};\r\n    return keys.filter(key => key !== 'metadata' && !ignoreKey(model, key))\r\n        .reduce((acc, key) => Object.assign({}, acc, { [key]: buildControl(fb, model, key) }), {});\r\n}\r\n\r\n/**\r\n * Initialize new form array.\r\n */\r\nexport function buildFormArray<T>(fb: FormBuilder, model: any, key: string): FormArray {\r\n    const ctor = findFormArrayType(model, key);\r\n    const value = model[key];\r\n    const controls = buildFormArrayControls(fb, value, ctor);\r\n    return ctor ? FormArray.BuildWithType(ctor, fb, controls) : FormArray.Build(fb, []);\r\n}\r\n\r\nexport function buildFormArrayControls<T>(fb: FormBuilder, value: T[], ctor?: TypeConstructor<T>): AbstractControl[] {\r\n    return ctor ? value.map(x => buildAbstractControl(fb, getValue(build(ctor, x))))\r\n        : value.map(x => buildAbstractControl(fb, x));\r\n}\r\n\r\nexport function findFormArrayType(model: any, key: string): TypeConstructor<any> {\r\n    return model['metadata'] && model['metadata'][key] ?\r\n        <TypeConstructor<any>>model['metadata'][key]['type'] : null;\r\n}\r\n\r\nexport function hasGroupValidators(model: any): boolean {\r\n    return model['metadata'] && model['metadata']['validators'];\r\n}\r\n\r\nexport function hasValidators(model: any, key: string): boolean {\r\n    return model['metadata'] && model['metadata'][key] && model['metadata'][key]['validators'];\r\n}\r\n\r\nexport function isArrayValue(value: any): boolean {\r\n    return Array.isArray(value);\r\n}\r\n\r\nexport function isFormArray(model: any, key: string): boolean {\r\n    return Array.isArray(model[key]) && model['metadata'] && model['metadata'][key] && model['metadata'][key]['isFormArray'];\r\n}\r\n\r\nexport function isFormControl(model: any, key: string): boolean {\r\n    return model['metadata'] && model['metadata']['controls'] && inArray(model['metadata']['controls'], key);\r\n}\r\n\r\nexport function isFormGroup(model: any, key: string): boolean {\r\n    return model[key]\r\n        && typeof model[key] === 'object'\r\n        && !Array.isArray(model[key])\r\n        && Object.keys(model[key]).length > 0\r\n        && !isFormControl(model, key)\r\n        && !isFormArray(model, key);\r\n}\r\n\r\nexport function isGroupValue(value: any): boolean {\r\n    return typeof value === 'object' && Object.keys(value).length > 0 && !isArrayValue(value);\r\n}\r\n","import { ErrorOutlet } from '../errors/errors.models';\r\n\r\nexport interface HttpAction {\r\n    type: string;\r\n    payload: HttpActionPayload<any>;\r\n}\r\n\r\nexport interface HttpActionPayload<T> {\r\n    path: string;\r\n    model?: T;\r\n    options?: HttpOptions;\r\n    headers?: any;\r\n    onSuccess?: string;\r\n    onError?: string | ErrorOutlet;\r\n}\r\n\r\nexport class HttpDeletePayload<T> implements HttpActionPayload<T> {\r\n    path = '';\r\n    options: HttpOptions = new HttpOptions();\r\n    headers?: any = undefined;\r\n    onSuccess?= '';\r\n    onSuccessPayload?: any;\r\n    onError?: string | ErrorOutlet;\r\n}\r\n\r\nexport class HttpGetPayload<T> implements HttpActionPayload<T> {\r\n    path = '';\r\n    options: HttpOptions = new HttpOptions();\r\n    headers?: any = undefined;\r\n    onSuccess?= '';\r\n    onError?: string | ErrorOutlet;\r\n}\r\n\r\nexport class HttpPutPayload<T> implements HttpActionPayload<T> {\r\n    path = '';\r\n    model: T = null;\r\n    options: HttpOptions = new HttpOptions();\r\n    headers?: any = undefined;\r\n    onSuccess?= '';\r\n    onError?: string | ErrorOutlet;\r\n}\r\n\r\nexport class HttpPostPayload<T> implements HttpActionPayload<T> {\r\n    path = '';\r\n    model: T = null;\r\n    options: HttpOptions = new HttpOptions();\r\n    headers?: any = undefined;\r\n    onSuccess?= '';\r\n    onError?: string | ErrorOutlet;\r\n}\r\n\r\nexport enum HTTP_REQUEST_STATUS {\r\n    PENDING,\r\n    ERROR,\r\n    SUCCESS\r\n}\r\n\r\nexport enum HTTP_STATUS_CODES {\r\n    CONTINUE = 100,\r\n    SWITCHING_PROTOCOLS = 101,\r\n    OK = 200,\r\n    CREATED = 201,\r\n    ACCEPTED = 202,\r\n    NON_AUTHORITATIVE_INFORMATION = 203,\r\n    NO_CONTENT = 204,\r\n    RESET_CONTENT = 205,\r\n    PARTIAL_CONTENT = 206,\r\n    MULTIPLE_CHOICES = 300,\r\n    MOVED_PERMANENTLY = 301,\r\n    FOUND = 302,\r\n    SEE_OTHER = 303,\r\n    NOT_MODIFIED = 304,\r\n    USE_PROXY = 305,\r\n    TEMPORARY_REDIRECT = 307,\r\n    BAD_REQUEST = 400,\r\n    UNAUTHORIZED = 401,\r\n    PAYMENT_REQUIRED = 402,\r\n    FORBIDDEN = 403,\r\n    NOT_FOUND = 404,\r\n    METHOD_NOT_ALLOWED = 405,\r\n    NOT_ACCEPTABLE = 406,\r\n    PROXY_AUTHENTICATION_REQUIRED = 407,\r\n    REQUEST_TIMEOUT = 408,\r\n    CONFLICT = 409,\r\n    GONE = 410,\r\n    LENGTH_REQUIRED = 411,\r\n    PRECONDITION_FAILED = 412,\r\n    REQUEST_ENTITY_TOO_LARGE = 413,\r\n    REQUEST_URI_TOO_LONG = 414,\r\n    UNSUPPORTED_MEDIA_TYPE = 415,\r\n    REQUESTED_RANGE_NOT_SATISFIABLE = 416,\r\n    EXPECTATION_FAILED = 417,\r\n    UNPROCESSABLE_ENTITY = 422,\r\n    TOO_MANY_REQUESTS = 429,\r\n    INTERNAL_SERVER_ERROR = 500,\r\n    NOT_IMPLEMENTED = 501,\r\n    BAD_GATEWAY = 502,\r\n    SERVICE_UNAVAILABLE = 503,\r\n    GATEWAY_TIMEOUT = 504,\r\n    HTTP_VERSION_NOT_SUPPORTED = 505\r\n}\r\n\r\nexport class HttpOptions {\r\n    prependBaseUrl = true;\r\n}\r\n","import {\r\n    HttpAction,\r\n    HttpGetPayload,\r\n    HttpPutPayload,\r\n    HttpPostPayload,\r\n    HttpActionPayload,\r\n    HttpDeletePayload\r\n} from './http.models';\r\nimport { ErrorActions } from '../errors/errors.actions';\r\nimport { ErrorOutlet, ErrorPayload } from '../errors/errors.models';\r\nimport { Action } from '../store/models';\r\nimport { inArray } from '../shared/utils';\r\n\r\nexport class HttpActions {\r\n\r\n    static DELETE = `[Http] DELETE`;\r\n    static DELETE_SUCCESS = `[Http] DELETE Success`;\r\n    static DELETE_ERROR = `[Http] DELETE Error`;\r\n    static GET = `[Http] GET`;\r\n    static GET_SUCCESS = `[Http] GET Success`;\r\n    static GET_ERROR = `[Http] GET Error`;\r\n    static POST = `[Http] POST`;\r\n    static POST_SUCCESS = `[Http] POST Success`;\r\n    static POST_ERROR = `[Http] POST Error`;\r\n    static POST_FORM_URL_ENCODED = `[Http] POST Form URL Encoded`;\r\n    static PUT = `[Http] PUT`;\r\n    static PUT_SUCCESS = `[Http] PUT Success`;\r\n    static PUT_ERROR = `[Http] PUT Error`;\r\n    static SEARCH = `[Http] SEARCH`;\r\n    static SEARCH_SUCCESS = `[Http] SEARCH Success`;\r\n    static SEARCH_ERROR = `[Http] SEARCH Error`;\r\n\r\n    static addPath(path, target) {\r\n        const existingMatches = target['matches'] || [];\r\n        const matches = inArray(existingMatches, path) ? existingMatches : [...existingMatches, path];\r\n        return Object.assign(target, { matches: matches });\r\n    }\r\n\r\n    static matchPath(path, payload) {\r\n        if (payload && payload['results']) {\r\n            return Object.assign(payload, { results: HttpActions.matchPath(path, payload['results']) });\r\n        }\r\n        if (Array.isArray(payload)) {\r\n            return payload.map(x => HttpActions.addPath(path, x));\r\n        }\r\n        return HttpActions.addPath(path, payload);\r\n    }\r\n\r\n    static buildError(payload: ErrorPayload): Action {\r\n        return ErrorActions.add(payload);\r\n    }\r\n\r\n    static buildErrorPayload(key: string, e: Error): ErrorPayload {\r\n        return {\r\n            key: key,\r\n            error: e\r\n        };\r\n    }\r\n\r\n    static handleError(e: Error, onError: string): Action {\r\n        return {\r\n            type: onError,\r\n            payload: e\r\n        };\r\n    }\r\n\r\n    static handleErrorOutlet(e: Error, outlet: ErrorOutlet): Action {\r\n        return ErrorActions.addAtOutlet(e, outlet);\r\n    }\r\n\r\n    static handleErrorDefault(e: Error): Action {\r\n        return {\r\n            type: HttpActions.DELETE_ERROR,\r\n            payload: HttpActions.buildErrorPayload('lastError', e)\r\n        };\r\n    }\r\n\r\n    static delete(path: string, onSuccessPayload: any, onSuccess?: string, onError?: string | ErrorOutlet): HttpAction {\r\n        const payload = Object.assign(new HttpDeletePayload<any>(),\r\n            {\r\n                path: path,\r\n                onSuccess: onSuccess || HttpActions.DELETE_SUCCESS,\r\n                onSuccessPayload,\r\n                onError: onError || HttpActions.DELETE_ERROR\r\n            });\r\n        return HttpActions.httpDelete(payload);\r\n    }\r\n\r\n    static httpDelete(payload: HttpDeletePayload<any>): HttpAction {\r\n        return {\r\n            type: HttpActions.DELETE,\r\n            payload: payload\r\n        };\r\n    }\r\n\r\n    static deleteSuccess(model: any, actionType?: string): HttpAction {\r\n        return {\r\n            type: actionType || HttpActions.DELETE_SUCCESS,\r\n            payload: model\r\n        };\r\n    }\r\n\r\n    static deleteError(e: Error, onError?: string | ErrorOutlet): Action {\r\n        if (typeof onError === 'string') {\r\n            return HttpActions.handleError(e, onError);\r\n        }\r\n        // else if (typeof onError === 'ErrorOutlet') {\r\n        //     return HttpActions.handleErrorOutlet(e, onError);\r\n        // }\r\n        return HttpActions.handleErrorDefault(e);\r\n    }\r\n\r\n    static get(path: string, onSuccess?: string, onError?: string | ErrorOutlet): HttpAction {\r\n        const payload = Object.assign(new HttpGetPayload<any>(),\r\n            {\r\n                path: path,\r\n                onSuccess: onSuccess || HttpActions.GET_SUCCESS,\r\n                onError: onError || HttpActions.GET_ERROR\r\n            });\r\n        return HttpActions.httpGet(payload);\r\n    }\r\n\r\n    static httpGet(payload: HttpGetPayload<any>): HttpAction {\r\n        return {\r\n            type: HttpActions.GET,\r\n            payload: payload\r\n        };\r\n    }\r\n\r\n    static getSuccess(response: any, actionType?: string): HttpAction {\r\n        return {\r\n            type: actionType || HttpActions.GET_SUCCESS,\r\n            payload: response\r\n        };\r\n    }\r\n\r\n    static getError(e: Error, onError?: string | ErrorOutlet): Action {\r\n        if (typeof onError === 'string') {\r\n            return HttpActions.handleError(e, onError);\r\n        }\r\n        // else if (typeof onError === 'ErrorOutlet') {\r\n        //     return HttpActions.handleErrorOutlet(e, onError);\r\n        // }\r\n        return HttpActions.handleErrorDefault(e);\r\n    }\r\n\r\n    static post(path: string, model: any, onSuccess?: string, onError?: string | ErrorOutlet): HttpAction {\r\n        const payload = Object.assign(new HttpPostPayload<any>(),\r\n            {\r\n                path: path,\r\n                model: model,\r\n                onSuccess: onSuccess || HttpActions.POST_SUCCESS,\r\n                onError: onError || HttpActions.POST_ERROR\r\n            });\r\n        return HttpActions.httpPost(payload);\r\n    }\r\n\r\n    static httpPost(payload: HttpPostPayload<any>): HttpAction {\r\n        return {\r\n            type: HttpActions.POST,\r\n            payload: payload\r\n        };\r\n    }\r\n\r\n    static postFormUrlEncoded(path: string, model: any, onSuccess?: string, onError?: string | ErrorOutlet): HttpAction {\r\n        const payload = Object.assign(new HttpPostPayload<any>(),\r\n            {\r\n                path: path,\r\n                model: model,\r\n                onSuccess: onSuccess || HttpActions.GET_SUCCESS,\r\n                onError: onError || HttpActions.GET_ERROR\r\n            });\r\n        return {\r\n            type: HttpActions.POST_FORM_URL_ENCODED,\r\n            payload\r\n        };\r\n    }\r\n\r\n    static postSuccess(model: any, actionType?: string): HttpAction {\r\n        return {\r\n            type: actionType || HttpActions.POST_SUCCESS,\r\n            payload: model\r\n        };\r\n    }\r\n\r\n    static postError(e: Error, onError?: string | ErrorOutlet): Action {\r\n        if (typeof onError === 'string') {\r\n            return HttpActions.handleError(e, onError);\r\n        } else if (typeof onError === 'object') {\r\n            return HttpActions.handleErrorOutlet(e, onError);\r\n        }\r\n        return HttpActions.handleErrorDefault(e);\r\n    }\r\n\r\n    static put(path: string, model: any, onSuccess?: string, onError?: string | ErrorOutlet): HttpAction {\r\n        const payload = Object.assign(new HttpPutPayload<any>(),\r\n            {\r\n                path: path,\r\n                model: model,\r\n                onSuccess: onSuccess || HttpActions.PUT_SUCCESS,\r\n                onError: onError || HttpActions.PUT_ERROR\r\n            });\r\n        return HttpActions.httpPut(payload);\r\n    }\r\n\r\n    static httpPut(payload: HttpPutPayload<any>): HttpAction {\r\n        return {\r\n            type: HttpActions.PUT,\r\n            payload: payload\r\n        };\r\n    }\r\n\r\n    static putSuccess(model: any, actionType?: string): HttpAction {\r\n        return {\r\n            type: actionType || HttpActions.PUT_SUCCESS,\r\n            payload: model\r\n        };\r\n    }\r\n\r\n    static putError(e: Error, onError?: string | ErrorOutlet): Action {\r\n        if (typeof onError === 'string') {\r\n            return HttpActions.handleError(e, onError);\r\n        }\r\n        // else if (typeof onError === 'ErrorOutlet') {\r\n        //     return HttpActions.handleErrorOutlet(e, onError);\r\n        // }\r\n        return HttpActions.handleErrorDefault(e);\r\n    }\r\n\r\n    static search(path: string, onSuccess?: string, onError?: string | ErrorOutlet): HttpAction {\r\n        const payload = Object.assign(new HttpGetPayload<any>(),\r\n            {\r\n                path: path,\r\n                onSuccess: onSuccess || HttpActions.SEARCH_SUCCESS,\r\n                onError: onError || HttpActions.SEARCH_ERROR\r\n            });\r\n        return {\r\n            type: HttpActions.SEARCH,\r\n            payload: payload\r\n        };\r\n    }\r\n\r\n    static searchSuccess(response: any, actionType?: string, path?: string): HttpAction {\r\n        const payload = path ? HttpActions.matchPath(path, response) : response;\r\n        return {\r\n            type: actionType || HttpActions.SEARCH_SUCCESS,\r\n            payload: payload\r\n        };\r\n    }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Observable, Subscription, of, throwError } from 'rxjs';\nimport {\n    catchError,\n    debounceTime,\n    distinctUntilChanged,\n    finalize,\n    map\n} from 'rxjs/operators';\n\nimport { HttpActions } from './http.actions';\nimport { HttpOptions } from './http.models';\nimport { QueryModel } from '../shared/models';\nimport { serialize } from '../shared/utils';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class HttpService {\n\n    private _authToken = '';\n    private _baseUrl = '';\n    private authTokenChanges: Subscription;\n    private baseUrlChanges: Subscription;\n    headers = {};\n    logEvents = true;\n    useDefaultHeaders = true;\n\n    constructor(\n        public http: HttpClient,\n        private baseUrl$: Observable<string>,\n        private authToken$: Observable<string>\n    ) {\n        this.authTokenChanges = this.authToken$.subscribe(x => {\n            this.authToken = x;\n        });\n        this.baseUrlChanges = this.baseUrl$.subscribe(x => {\n            this.baseUrl = x;\n        });\n    }\n\n    get authToken(): string {\n        return this._authToken;\n    }\n\n    set authToken(value: string) {\n        this._authToken = value;\n    }\n\n    get baseUrl(): string {\n        return this._baseUrl;\n    }\n\n    set baseUrl(value: string) {\n        this._baseUrl = value;\n    }\n\n    get defaultHeaders(): HttpHeaders {\n        let headers: HttpHeaders = new HttpHeaders();\n        headers = headers.append('Content-type', 'application/json');\n        if (this.authToken) {\n            headers = headers.append('Authorization', 'Bearer ' + this.authToken);\n        }\n        return headers;\n    }\n\n    get requestHeaders(): HttpHeaders {\n        let headers: HttpHeaders = this.useDefaultHeaders ? this.defaultHeaders : new HttpHeaders();\n        Object.keys(this.headers).forEach(key => {\n            headers = headers.append(key, this.headers[key]);\n        });\n        return headers;\n    }\n\n    appendHeaders(headers = {}): HttpHeaders {\n        let requestHeaders = this.requestHeaders;\n        Object.keys(headers).forEach(key => {\n            requestHeaders = requestHeaders.append(key, this.headers[key]);\n        });\n        return requestHeaders;\n    }\n\n    /**\n     * Make a DELETE request.\n     * @param relativePath \n     * @param headers \n     * @param options \n     */\n    delete(relativePath: string, headers = {}, options: HttpOptions = new HttpOptions()): Observable<any> {\n        const url = options.prependBaseUrl ? this.formatUrl(relativePath) : relativePath;\n        const httpHeaders = this.appendHeaders(headers);\n        const obs = this.http.delete(url, {\n            headers: httpHeaders\n        });\n        return obs.pipe(\n            map(res => res && res['json'] && typeof res['json'] === 'function' ? res['json']() : res),\n            catchError(err => this.onError(err)),\n            finalize(() => {\n                this.onComplete('DELETE', url);\n            })\n        );\n    }\n\n    /**\n     * Make a GET request.\n     * @param relativePath \n     * @param headers \n     * @param options \n     */\n    get(relativePath: string, headers = {}, options: HttpOptions = new HttpOptions()): Observable<any> {\n        const url = options.prependBaseUrl ? this.formatUrl(relativePath) : relativePath;\n        const httpHeaders = this.appendHeaders(headers);\n        const obs = this.http.get(url, {\n            headers: httpHeaders\n        });\n        return obs.pipe(\n            map(res => res && res['json'] && typeof res['json'] === 'function' ? res['json']() : res),\n            catchError(err => this.onError(err)),\n            finalize(() => {\n                this.onComplete('GET', url);\n            })\n        );\n    };\n\n    /**\n     * Make an autocomplete GET request.\n     * @param relativePath \n     * @param headers \n     * @param options \n     */\n    autocomplete(relativePath: string, query: QueryModel<any>, headers = {}, options: HttpOptions = new HttpOptions()): Observable<any> {\n        if (!query.term || query.term.length < 1) {\n            return of([]);\n        }\n        const path = `${relativePath}/${QueryModel.BuildQueryString(query)}`;\n        const url = options.prependBaseUrl ? this.formatUrl(relativePath) : relativePath;\n        const httpHeaders = this.appendHeaders(headers);\n        const obs = this.http.get(url, {\n            headers: httpHeaders\n        });\n        return obs.pipe(\n            map(res => res && res['json'] && typeof res['json'] === 'function' ? res['json']() : res),\n            debounceTime(500),\n            distinctUntilChanged(),\n            map(json => HttpActions.matchPath(path, json)),\n            catchError(err => this.onError(err)),\n            finalize(() => {\n                this.onComplete('GET', url);\n            })\n        );\n    };\n\n    /**\n     * Make a POST request.\n     * @param relativePath \n     * @param body \n     * @param headers \n     * @param options \n     */\n    post(relativePath: string, body: any, headers = {}, options: HttpOptions = new HttpOptions()): Observable<any> {\n        const url = options.prependBaseUrl ? this.formatUrl(relativePath) : relativePath;\n        const httpHeaders = this.appendHeaders(headers);\n        const obs = this.http.post(url, serialize(body), {\n            headers: httpHeaders\n        });\n        return obs.pipe(\n            map(res => res && res['json'] && typeof res['json'] === 'function' ? res['json']() : res),\n            catchError(err => this.onError(err)),\n            finalize(() => {\n                this.onComplete('POST', url);\n            })\n        );\n    }\n\n    /**\n     * Make a POST request with form url-encoded content type.\n     * @param relativePath \n     * @param body \n     * @param headers \n     * @param options \n     */\n    postFormUrlEncoded(relativePath: string, body: any, headers = {}, options: HttpOptions = new HttpOptions()): Observable<any> {\n        const url = options.prependBaseUrl ? this.formatUrl(relativePath) : relativePath;\n        const httpHeaders = new HttpHeaders({ 'content-type': 'application/x-www-form-urlencoded' });\n        const obs = this.http.post(url, body, {\n            headers: httpHeaders\n        });\n        return obs.pipe(\n            map(res => res && res['json'] && typeof res['json'] === 'function' ? res['json']() : res),\n            catchError(err => this.onError(err)),\n            finalize(() => {\n                this.onComplete('POST FORM URL-ENCODED', url);\n            })\n        );\n    }\n\n    /**\n     * Make a PUT request.\n     * @param relativePath \n     * @param body \n     * @param headers \n     * @param options \n     */\n    put(relativePath: string, body: any, headers = {}, options: HttpOptions = new HttpOptions()): Observable<any> {\n        const url = options.prependBaseUrl ? this.formatUrl(relativePath) : relativePath;\n        const httpHeaders = this.appendHeaders(headers);\n        const obs = this.http.put(url, serialize(body), {\n            headers: httpHeaders\n        });\n        return obs.pipe(\n            map(res => res && res['json'] && typeof res['json'] === 'function' ? res['json']() : res),\n            catchError(err => this.onError(err)),\n            finalize(() => {\n                this.onComplete('PUT', url);\n            })\n        );\n    }\n\n    /**\n     * This method will be used to format URLs for all cross-origin requests.\n     */\n    formatUrl(path: string): string {\n        return `${this.baseUrl}/${path}`;\n    }\n\n    /** \n     * Use this method when a promise is preferred over an observable.\n     */\n    getPromise(url: string) {\n        return this.get(url)\n            .toPromise()\n            .then(res => res.json());\n    }\n\n    private onError(error: any) {\n        let errorBody: any;\n        try {\n            errorBody = (error._body) ? JSON.parse(error._body) : { message: 'Internal server error', statusCode: error.status };\n        } catch (e) {\n            if (error.status <= 0) {\n                errorBody = { message: 'Internal server error.', statusCode: 500 };\n            }\n        }\n        if (errorBody.message) {\n            errorBody.message = errorBody.message.replace('An error has occured in the api.System.Exception: ', '');\n            errorBody.message = errorBody.message.substring(0, errorBody.message.indexOf(' at'));\n        }\n        return throwError(errorBody);\n    }\n\n    private onComplete(method: string, url: string): void {\n        if (this.logEvents) {\n            console.log(`Completed ${method} request to ${url}`);\n        }\n    }\n\n}\n","import { Metadata } from './models';\r\nimport { build } from './utils';\r\n\r\nexport class BaseEntity {\r\n    createdBy = null;\r\n    createdById = 0;\r\n    createdDate: Date = new Date();\r\n    formId = 0;\r\n    lastModifiedBy = null;\r\n    lastModifiedById = 0;\r\n    lastModifiedDate: Date = new Date();\r\n    matches: string[] = [];\r\n    ignore = [\r\n        '_metadata',\r\n        'metadata',\r\n        'ignore',\r\n        'createdBy',\r\n        'createdById',\r\n        'createdDate',\r\n        'formId',\r\n        'lastModifiedBy',\r\n        'lastModifiedById',\r\n        'lastModifiedDate',\r\n        'lastModifiedOn',\r\n        'lastUpdated',\r\n        'matches',\r\n    ];\r\n    _metadata: Metadata = new Metadata();\r\n\r\n    get metadata(): Metadata {\r\n        return build(Metadata, this._metadata, {\r\n            ignore: this.ignore\r\n        });\r\n    }\r\n\r\n    set metadata(value: Metadata) {\r\n        this._metadata = value;\r\n    }\r\n\r\n    static getGetters(): string[] {\r\n        return Object.keys(this.prototype).filter(name => {\r\n            return typeof Object.getOwnPropertyDescriptor(this.prototype, name)['get'] === 'function';\r\n        });\r\n    }\r\n\r\n    static getSetters(): string[] {\r\n        return Object.keys(this.prototype).filter(name => {\r\n            return typeof Object.getOwnPropertyDescriptor(this.prototype, name)['set'] === 'function';\r\n        });\r\n    }\r\n\r\n    getGetters(): string[] {\r\n        return Object.keys(this.constructor.prototype).filter(name => {\r\n            return typeof Object.getOwnPropertyDescriptor(this.constructor.prototype, name)['get'] === 'function';\r\n        });\r\n    }\r\n\r\n    getSetters(): string[] {\r\n        return Object.keys(this.constructor.prototype).filter(name => {\r\n            return typeof Object.getOwnPropertyDescriptor(this.constructor.prototype, name)['set'] === 'function';\r\n        });\r\n    }\r\n\r\n    update(value: any): BaseEntity {\r\n        return Object.assign(new BaseEntity(), value);\r\n    }\r\n}\r\n","import { BaseEntity } from './base-entity';\r\n\r\nexport const ActionCreator = (actionType?: any | any[]) => {\r\n\r\n    return (target: any, propertySignature: string) => {\r\n        const method = target[propertySignature];\r\n        const decoratedMethod = function () {\r\n            const $this = this;\r\n            const action = method.apply($this, arguments);\r\n            action.actionType = actionType;\r\n            return action;\r\n        };\r\n\r\n        target[propertySignature] = decoratedMethod;\r\n        return target;\r\n    };\r\n};\r\n\r\nexport const ActionType = () => {\r\n\r\n    return (target: any, propertySignature: string) => {\r\n        return target;\r\n    };\r\n};\r\n\r\n/**\r\n * Class Decorator Factory\r\n * Decorates a class.\r\n */\r\nexport const Class = (metadata: any) => {\r\n    const classDecorator = (target: any) => {\r\n        return target;\r\n    };\r\n    return classDecorator;\r\n};\r\n\r\nexport const Command = () => {\r\n\r\n    return (target: any, propertySignature: string) => {\r\n        return target;\r\n    };\r\n};\r\n\r\nexport const Dispatcher = () => {\r\n\r\n    return (target: any, propertySignature: string) => {\r\n        return target;\r\n    };\r\n};\r\n\r\n/**\r\n * Decorates a class with properties from BaseEntity\r\n */\r\nexport const Entity = (metadata?: any) => {\r\n    function classDecorator<TFunction extends Function>(target: TFunction) {\r\n        const ctor: Function = function () {\r\n            Object.assign(this, new BaseEntity(), { metadata: metadata || {} });\r\n        };\r\n        ctor.prototype = Object.create(target.prototype);\r\n        ctor.prototype.constructor = target;\r\n        return <TFunction>ctor;\r\n    };\r\n    return classDecorator;\r\n};\r\n\r\nexport const EventHandler = () => {\r\n\r\n    return (target: any, propertySignature: string) => {\r\n        return target;\r\n    };\r\n};\r\n\r\nexport const LifecycleHook = () => {\r\n\r\n    return (target: any, propertySignature: string) => {\r\n        return target;\r\n    };\r\n};\r\n\r\n/**\r\n * Method Decorator Factory\r\n * Decorates a method.\r\n */\r\nexport const Method = (metadata: any) => {\r\n    const methodDecorator = (target: any, propertySignature: string, descriptor: TypedPropertyDescriptor<any>) => {\r\n        return target;\r\n    };\r\n    return methodDecorator;\r\n};\r\n\r\n/**\r\n * Parameter Decorator Factory\r\n * Decorates a parameter.\r\n */\r\nexport const Parameter = (metadata: any) => {\r\n    const parameterDecorator = (target: any, propertySignature: string, parameterIndex: number) => {\r\n        return target;\r\n    };\r\n    return parameterDecorator;\r\n};\r\n\r\n/**\r\n * Property Decorator Factory\r\n * Decorates a Property.\r\n */\r\nexport const Property = (metadata: any) => {\r\n    const propertyDecorator = (target: any, propertySignature: string) => {\r\n        if (!target.metadata) {\r\n            target.metadata = {};\r\n        }\r\n        target.metadata[propertySignature] = Object.assign(metadata, { propertyName: propertySignature });\r\n        return target;\r\n    };\r\n    return propertyDecorator;\r\n};\r\n\r\n/**\r\n * Static Method Decorator Factory\r\n * Decorates a static method.\r\n */\r\nexport const StaticMethod = (metadata: any) => {\r\n    const staticMethodDecorator = (target: any, propertySignature: string) => {\r\n        return target;\r\n    };\r\n    return staticMethodDecorator;\r\n};\r\n\r\n/**\r\n *  Static Property Decorator Factory\r\n * Decorates a static property.\r\n */\r\nexport const StaticProperty = (metadata: any) => {\r\n    const staticPropertyDecorator = (target: any, propertySignature: string) => {\r\n        return target;\r\n    };\r\n    return staticPropertyDecorator;\r\n};\r\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nimport { HttpService } from './http.service';\nimport { HttpGetPayload, HttpPostPayload, HttpPutPayload, HttpDeletePayload } from './http.models';\nimport { Command } from '../shared/decorators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class HttpCommands<T> {\n\n  constructor(private http: HttpService) {\n  }\n\n  @Command()\n  delete$(payload: HttpDeletePayload<T>): Observable<any> {\n    return this.http.delete(payload.path, payload.headers, payload.options);\n  }\n\n  @Command()\n  get$(payload: HttpGetPayload<T>): Observable<any> {\n    return this.http.get(payload.path, payload.headers, payload.options);\n  }\n\n  @Command()\n  post$(payload: HttpPostPayload<T>): Observable<any> {\n    return this.http.post(payload.path, payload.model, payload.headers, payload.options);\n  }\n\n  @Command()\n  postFormUrlEncoded$(payload: HttpPostPayload<T>): Observable<any> {\n    return this.http.postFormUrlEncoded(payload.path, payload.model, payload.headers, payload.options);\n  }\n\n  @Command()\n  put$(payload: HttpPutPayload<T>): Observable<any> {\n    return this.http.put(payload.path, payload.model, payload.headers, payload.options);\n  }\n\n}\n","import { Injectable } from '@angular/core';\r\nimport { Actions, Effect, ofType } from '@ngrx/effects';\r\nimport { Observable, of } from 'rxjs';\r\nimport { map, mergeMap, catchError } from 'rxjs/operators';\r\n\r\nimport { HttpActions } from './http.actions';\r\nimport { HttpCommands } from './http.commands';\r\nimport { HttpGetPayload, HttpPostPayload, HttpPutPayload, HttpDeletePayload } from './http.models';\r\nimport { Action } from '../store/models';\r\n\r\n@Injectable()\r\nexport class HttpEffects<T> {\r\n\r\n    @Effect() onDelete$ = this.actions$.pipe(\r\n        ofType(HttpActions.DELETE),\r\n        mergeMap((action: Action) => this.delete$(action.payload))\r\n    );\r\n\r\n    @Effect() onGet$ = this.actions$.pipe(\r\n        ofType(HttpActions.GET),\r\n        mergeMap((action: Action) => this.get$(action.payload))\r\n    );\r\n\r\n    @Effect() onPost$ = this.actions$.pipe(\r\n        ofType(HttpActions.POST),\r\n        mergeMap((action: Action) => this.post$(action.payload))\r\n    );\r\n\r\n    @Effect() onPostFormUrlEncoded$ = this.actions$.pipe(\r\n        ofType(HttpActions.POST_FORM_URL_ENCODED),\r\n        mergeMap((action: Action) => this.postFormUrlEncoded$(action.payload))\r\n    );\r\n\r\n    @Effect() onPut$ = this.actions$.pipe(\r\n        ofType(HttpActions.PUT),\r\n        mergeMap((action: Action) => this.put$(action.payload))\r\n    );\r\n\r\n    @Effect() onSearch$ = this.actions$.pipe(\r\n        ofType(HttpActions.SEARCH),\r\n        mergeMap((action: Action) => this.search$(action.payload))\r\n    );\r\n\r\n    constructor(\r\n        private actions$: Actions,\r\n        private commands: HttpCommands<T>\r\n    ) { }\r\n\r\n    delete$(payload: HttpDeletePayload<T>): Observable<Action> {\r\n        // console.log('DELETE:\\t', payload.onSuccess);\r\n        return this.commands.delete$(payload).pipe(\r\n            map((model: T) => HttpActions.deleteSuccess(payload.onSuccessPayload || model, payload.onSuccess)),\r\n            catchError((e: Error) => of(HttpActions.deleteError(e, payload.onError)))\r\n        );\r\n    }\r\n\r\n    get$(payload: HttpGetPayload<T>): Observable<Action> {\r\n        // console.log('GET:\\t', payload.onSuccess);\r\n        return this.commands.get$(payload).pipe(\r\n            map((model: T) => HttpActions.getSuccess(model, payload.onSuccess)),\r\n            catchError((e: Error) => of(HttpActions.getError(e, payload.onError)))\r\n        );\r\n    }\r\n\r\n    post$(payload: HttpPostPayload<T>): Observable<Action> {\r\n        // console.log('POST:\\t', payload.onSuccess);\r\n        return this.commands.post$(payload).pipe(\r\n            map((model: T) => HttpActions.postSuccess(model, payload.onSuccess)),\r\n            catchError((e: Error) => of(HttpActions.postError(e, payload.onError)))\r\n        );\r\n    }\r\n\r\n    postFormUrlEncoded$(payload: HttpPostPayload<T>): Observable<Action> {\r\n        // console.log('POST:\\t', payload.onSuccess);\r\n        return this.commands.postFormUrlEncoded$(payload).pipe(\r\n            map((model: T) => HttpActions.postSuccess(model, payload.onSuccess)),\r\n            catchError((e: Error) => of(HttpActions.postError(e, payload.onError)))\r\n        );\r\n    }\r\n\r\n    put$(payload: HttpPutPayload<T>): Observable<Action> {\r\n        // console.log('PUT:\\t', payload.onSuccess);\r\n        return this.commands.put$(payload).pipe(\r\n            map((model: T) => HttpActions.putSuccess(model, payload.onSuccess)),\r\n            catchError((e: Error) => of(HttpActions.putError(e, payload.onError)))\r\n        );\r\n    }\r\n\r\n    search$(payload: HttpGetPayload<T>): Observable<Action> {\r\n        // console.log('SEARCH:\\t', payload.onSuccess);\r\n        return this.commands.get$(payload).pipe(\r\n            map((model: T) => HttpActions.searchSuccess(model, payload.onSuccess, payload.path)),\r\n            catchError((e: Error) => of(HttpActions.getError(e, payload.onError)))\r\n        );\r\n    }\r\n}\r\n","import { NgModule, ModuleWithProviders, InjectionToken } from '@angular/core';\nimport { HttpClientModule } from '@angular/common/http';\nimport { Store } from '@ngrx/store';\n\nimport { HttpCommands } from './http.commands';\nimport { HttpEffects } from './http.effects';\nimport { HttpService } from './http.service';\nimport { Selector } from '../store/models';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\n\nconst BASE_URL$ = new InjectionToken<Observable<string>>('API Base URL');\nconst AUTH_TOKEN$ = new InjectionToken<Observable<string>>('API Auth Token');\n\nexport function baseUrlFactory(store: Store<any>, baseUrlSelector: Selector<string>): Observable<string> {\n  return store.pipe(baseUrlSelector);\n}\n\nexport function authTokenFactory(store: Store<any>, authTokenSelector: Selector<string>): Observable<string> {\n  return store.pipe(authTokenSelector);\n}\n\nexport function httpServiceFactory(http: HttpClient, baseUrl$: Observable<string>, authToken$: Observable<string>): HttpService {\n  return new HttpService(http, baseUrl$, authToken$);\n}\n\nexport function provideHttpContext(urlSelector: Selector<string>, authTokenSelector: Selector<string>): any[] {\n  return [\n    HttpEffects,\n    HttpCommands,\n    { provide: HttpService, useFactory: httpServiceFactory, deps: [HttpClient, 'BASE_URL$', 'AUTH_TOKEN$'] },\n    { provide: 'URL_SELECTOR', useValue: urlSelector },\n    { provide: 'BASE_URL$', useFactory: baseUrlFactory, deps: [Store, 'URL_SELECTOR'] },\n    { provide: 'TOKEN_SELECTOR', useValue: authTokenSelector },\n    { provide: 'AUTH_TOKEN$', useFactory: authTokenFactory, deps: [Store, 'TOKEN_SELECTOR'] },\n  ];\n}\n\n@NgModule({\n  imports: [\n    HttpClientModule,\n  ],\n  exports: [\n    HttpClientModule,\n  ]\n})\nexport class HttpModule {\n\n  static forRoot(baseUrlSelector: Selector<string>, authTokenSelector: Selector<string>): ModuleWithProviders {\n    return {\n      ngModule: HttpModule,\n      providers: provideHttpContext(baseUrlSelector, authTokenSelector)\n    };\n  }\n\n}\n","import { AddLookupPayload, Lookup } from './lookup.models';\r\nimport { Action } from '../store/models';\r\n\r\nexport class LookupActions {\r\n    static ADD_KEYS = '[Lookup] Add keys';\r\n    static ADD_KEY = '[Lookup] Add key';\r\n    static ADD_VALUES = '[Lookup] Add values';\r\n    static REMOVE_KEY = '[Lookup] Remove key';\r\n\r\n    static addKey(payload: AddLookupPayload): Action {\r\n        return {\r\n            type: LookupActions.ADD_KEY,\r\n            payload: payload\r\n        };\r\n    }\r\n\r\n    static addValues(payload: Lookup[]): Action {\r\n        return {\r\n            type: LookupActions.ADD_VALUES,\r\n            payload: payload\r\n        };\r\n    }\r\n\r\n    static removeKey(key: string): Action {\r\n        return {\r\n            type: LookupActions.REMOVE_KEY,\r\n            payload: key\r\n        };\r\n    }\r\n\r\n}\r\n","import { build } from '../shared/utils';\r\n\r\nexport class Lookup {\r\n    expires: Date;\r\n    typeName = '';\r\n    values: LookupValue[] = [];\r\n    _key = '';\r\n\r\n    get key(): string {\r\n        return this._key || this.typeName;\r\n    }\r\n\r\n    set key(value: string) {\r\n        this._key = value;\r\n    }\r\n\r\n    get name(): string {\r\n        return this.key;\r\n    }\r\n\r\n    set name(value: string) {\r\n        this.key = value;\r\n    }\r\n\r\n    get names(): string[] {\r\n        return this.values.map(x => x.name);\r\n    }\r\n}\r\n\r\nexport class LookupValue {\r\n    id = 0;\r\n    active = true;\r\n    description = '';\r\n    name = '';\r\n    sort = 0;\r\n    tooltip = ''; // use this for accessibility and/or help tooltip messages\r\n    _label = '';\r\n    _value: any;\r\n\r\n    get value(): any {\r\n        return this._value || this.id;\r\n    }\r\n\r\n    set value(value: any) {\r\n        this._value = value;\r\n    }\r\n\r\n    get label(): string {\r\n        return this._label || this.description;\r\n    }\r\n\r\n    set label(value: string) {\r\n        this._label = value;\r\n    }\r\n\r\n}\r\n\r\nexport class Lookups {\r\n    [key: string]: Lookup;\r\n\r\n    static AddLookups(state: Lookups, lookups: Lookup[]): Lookups {\r\n        return lookups.reduce((acc: Lookups, lookup: Lookup): Lookups =>\r\n            build(Lookups, acc, { [lookup.key]: build(Lookup, lookup) }), state);\r\n    }\r\n\r\n    static AddLookup(state: Lookups, lookup: Lookup): Lookups {\r\n        return build(Lookups, state, {\r\n            [lookup.key]: build(Lookup, lookup)\r\n        });\r\n    }\r\n\r\n    static BuildLookupValues(values: LookupValue[], names: string[]): LookupValue[] {\r\n        return names.reduce((acc, name) => {\r\n            const value = values.find(x => x.name === name);\r\n            return value ? [...acc, value] : [...acc];\r\n        }, []);\r\n    }\r\n\r\n    static FindLookupIdByName(values: LookupValue[], name: string): number {\r\n        const lkp = build(LookupValue, values.find(x => x.name === name));\r\n        return lkp.id;\r\n    }\r\n\r\n    static FindLookupNameById(values: LookupValue[], id: number): string {\r\n        const lkp = build(LookupValue, values.find(x => x.id === id));\r\n        return lkp.name;\r\n    }\r\n\r\n    static RemoveLookup(state: Lookups, removeKey: string): Lookups {\r\n        const newState = new Lookups();\r\n        const keys = Object.keys(state).filter(key => key !== removeKey);\r\n        keys.forEach(key => {\r\n            newState[key] = Object.assign({}, state[key]);\r\n        });\r\n        return newState;\r\n    }\r\n\r\n}\r\n\r\nexport class AddLookupPayload {\r\n    key = '';\r\n    value: '';\r\n}\r\n","import { Injectable, Inject } from '@angular/core';\nimport { Store } from '@ngrx/store';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { LookupActions } from './lookup.actions';\nimport { Lookup, AddLookupPayload } from './lookup.models';\nimport { LOOKUP_PATH, LOOKUP_KEYS } from './lookup.module';\nimport { HttpActions } from '../http/http.actions';\nimport { build } from '../shared/utils';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LookupService {\n\n  _keys: string[] = [];\n  path = 'lookup';\n\n  constructor(\n    public store: Store<any>,\n    @Inject(LOOKUP_PATH) lookupPath = 'lookup',\n    @Inject(LOOKUP_KEYS) lookupKeys: string[] = []\n  ) {\n    this.path = lookupPath;\n    this.keys = lookupKeys;\n  }\n\n  get keys(): string[] {\n    return this._keys;\n  }\n\n  set keys(value: string[]) {\n    this._keys = value;\n  }\n\n  load(keys: string[], values?: Lookup[]): void {\n    if (values) {\n      this.loadValues(values);\n    }\n    this.loadKeys(keys);\n  }\n\n  loadKeys(keys: string[]): void {\n    this.keys = keys;\n    this.store.dispatch(HttpActions.get(`${this.path}${this.buildQueryString()}`, LookupActions.ADD_KEYS));\n  }\n\n  loadValues(values: Lookup[]): void {\n    this.store.dispatch(LookupActions.addValues(values));\n  }\n\n  lookup(key: string): Observable<any> {\n    return this.store.select('lookup').pipe(\n      map(s => s[key])\n    );\n  }\n\n  addKey(key: string, value: any): void {\n    this.store.dispatch(LookupActions.addKey(\n      build(AddLookupPayload,\n        {\n          key: key,\n          value: value\n        }\n      )));\n  }\n\n  removeKey(key: string): void {\n    this.store.dispatch(LookupActions.removeKey(key));\n  }\n\n  private buildQueryString(): string {\n    let query = this.keys.length > 0 ? `?keys=${this.keys[0]}` : '';\n    this.keys.filter((key: string, index: number) => index !== 0)\n      .forEach(key => {\n        query += `&keys=${key}`;\n      });\n    return query;\n  }\n\n}\n","import { NgModule, ModuleWithProviders, InjectionToken } from '@angular/core';\nimport { Store } from '@ngrx/store';\n\nimport { LookupService } from './lookup.service';\n\nexport const LOOKUP_PATH = new InjectionToken<string>('API lookup endpoint');\nexport const LOOKUP_KEYS = new InjectionToken<string[]>('API lookup keys');\n\nexport function lookupServiceFactory(store: Store<any>, LOOKUP_PATH = 'lookup', LOOKUP_KEYS: string[] = []): LookupService {\n  return new LookupService(store, LOOKUP_PATH, LOOKUP_KEYS);\n}\n\nexport function provideLookup(path = '', keys: string[] = []): any[] {\n  return [\n    { provide: LookupService, useFactory: lookupServiceFactory, deps: [Store, LOOKUP_PATH, LOOKUP_KEYS] },\n    { provide: LOOKUP_PATH, useValue: path },\n    { provide: LOOKUP_KEYS, useValue: keys },\n  ];\n}\n\n@NgModule({\n  imports: [],\n  declarations: []\n})\nexport class LookupModule {\n\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: LookupModule,\n      providers: provideLookup('lookup', [])\n    };\n  }\n\n  static forRootWithPath(path = ''): ModuleWithProviders {\n    return {\n      ngModule: LookupModule,\n      providers: provideLookup(path, [])\n    };\n  }\n\n  static forRootWithKeys(keys: string[]): ModuleWithProviders {\n    return {\n      ngModule: LookupModule,\n      providers: provideLookup('lookup', keys)\n    };\n  }\n\n  static forRootWithPathAndKeys(path = '', keys: string[]): ModuleWithProviders {\n    return {\n      ngModule: LookupModule,\n      providers: provideLookup(path, keys)\n    };\n  }\n\n}\n","import { Action } from './models';\r\nimport { Config } from '../shared/config';\r\nimport { WindowResize } from '../shared/window';\r\n\r\nexport class AppActions {\r\n    static INIT_STORE = '[Storage] Init Store';\r\n    static NO_ACTION = '[App] No Action';\r\n\r\n    static noAction(): Action {\r\n        return {\r\n            type: AppActions.NO_ACTION\r\n        };\r\n    }\r\n}\r\n\r\nexport class ConfigActions {\r\n    static INITIALIZE = '[Config] Initialize Configuration';\r\n\r\n    static initialize(config: Config): Action {\r\n        return {\r\n            type: ConfigActions.INITIALIZE,\r\n            payload: config\r\n        };\r\n    }\r\n}\r\n\r\nexport class SidenavActions {\r\n    static CLOSE = '[Sidenav] Close';\r\n    static OPEN = '[Sidenav] Open';\r\n    static TOGGLE = '[Sidenav] Toggle';\r\n\r\n    static close(): Action {\r\n        return {\r\n            type: SidenavActions.CLOSE\r\n        };\r\n    }\r\n\r\n    static open(): Action {\r\n        return {\r\n            type: SidenavActions.OPEN\r\n        };\r\n    }\r\n\r\n    static toggle(): Action {\r\n        return {\r\n            type: SidenavActions.TOGGLE\r\n        };\r\n    }\r\n}\r\n\r\nexport class WindowActions {\r\n    static RESIZE = '[Window] Resize';\r\n\r\n    static resize(payload: WindowResize): Action {\r\n        return {\r\n            type: WindowActions.RESIZE,\r\n            payload\r\n        };\r\n    }\r\n}\r\n","import { Store } from '@ngrx/store';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\n\r\nimport { Lookups, Lookup, LookupValue } from './lookup.models';\r\n\r\nexport function lookupSelector(store: Store<any>): Observable<Lookups> {\r\n    return store.select(s => s['lookup']);\r\n}\r\n\r\nexport function lookupKeySelector(store: Store<any>, key: string): Observable<Lookup> {\r\n    return lookupSelector(store).pipe(\r\n        map(lookup => lookup[key] || new Lookup())\r\n    );\r\n}\r\n\r\nexport function lookupValuesSelector(store: Store<any>, key: string): Observable<LookupValue[]> {\r\n    return lookupKeySelector(store, key).pipe(\r\n        map(lookup => lookup.values)\r\n    );\r\n}\r\n\r\nexport function lookupValueSelector(store: Store<any>, key: string, f: (x: LookupValue) => boolean): Observable<LookupValue> {\r\n    const values$ = lookupValuesSelector(store, key);\r\n    return values$.pipe(\r\n        map(values => values.find(f) || new LookupValue())\r\n    );\r\n}\r\n","import {\r\n    Route,\r\n    NavigationCancel,\r\n    NavigationEnd,\r\n    NavigationError,\r\n    NavigationStart,\r\n    RoutesRecognized\r\n} from '@angular/router';\r\n\r\nimport { ActivatedRoutePayload } from './models';\r\nimport { Action } from '../store/models';\r\n\r\nexport class RouterActions {\r\n\r\n    static ACTIVATE = '[Router] Activate Route';\r\n    static NAVIGATE = '[Router] Navigate';\r\n    static NAVIGATE_SUCCESS = '[Router] Navigate Success';\r\n    static NAVIGATE_ERROR = '[Router] Navigate Error';\r\n    static NAVIGATION_CANCEL = '[Router] Cancel Navigation';\r\n    static NAVIGATION_END = '[Router] End Navigation';\r\n    static NAVIGATION_ERROR = '[Router] Error Navigation';\r\n    static NAVIGATION_START = '[Router] Start Navigation';\r\n    static ROUTES_RECOGNIZED = '[Router] Routes Recognized';\r\n\r\n    static activate(routeName: string, parent?: string): Action {\r\n        const payload: ActivatedRoutePayload = {\r\n            routeName,\r\n            parent\r\n        };\r\n        return {\r\n            type: RouterActions.ACTIVATE,\r\n            payload\r\n        };\r\n    }\r\n    static navigate(r: string | Route | any[]): Action {\r\n        return {\r\n            type: RouterActions.NAVIGATE,\r\n            payload: r\r\n        };\r\n    }\r\n\r\n    static navigateSuccess(): Action {\r\n        return {\r\n            type: RouterActions.NAVIGATE_SUCCESS\r\n        };\r\n    }\r\n\r\n    static navigateError(): Action {\r\n        return {\r\n            type: RouterActions.NAVIGATE_ERROR\r\n        };\r\n    }\r\n\r\n    static navCancel(e: NavigationCancel): Action {\r\n        return {\r\n            type: RouterActions.NAVIGATION_CANCEL,\r\n            payload: e\r\n        };\r\n    }\r\n\r\n    static navEnd(e: NavigationEnd): Action {\r\n        return {\r\n            type: RouterActions.NAVIGATION_END,\r\n            payload: e\r\n        };\r\n    }\r\n\r\n    static navError(e: NavigationError): Action {\r\n        return {\r\n            type: RouterActions.NAVIGATION_ERROR,\r\n            payload: e\r\n        };\r\n    }\r\n\r\n    static navStart(e: NavigationStart): Action {\r\n        return {\r\n            type: RouterActions.NAVIGATION_START,\r\n            payload: e\r\n        };\r\n    }\r\n\r\n    static routesRecognized(e: RoutesRecognized): Action {\r\n        return {\r\n            type: RouterActions.ROUTES_RECOGNIZED,\r\n            payload: e\r\n        };\r\n    }\r\n\r\n}\r\n","import { Injectable, EventEmitter } from '@angular/core';\nimport {\n  Router,\n  ActivatedRoute,\n  Event,\n  NavigationCancel,\n  NavigationEnd,\n  NavigationError,\n  NavigationStart,\n  RoutesRecognized,\n  Params,\n  Data,\n  NavigationExtras\n} from '@angular/router';\nimport { Store } from '@ngrx/store';\nimport { Observable, from } from 'rxjs';\n\nimport { RouterActions } from './actions';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RouterService {\n\n  navigationCancel = new EventEmitter<NavigationCancel>();\n  navigationEnd = new EventEmitter<NavigationEnd>();\n  navigationError = new EventEmitter<NavigationError>();\n  navigationStart = new EventEmitter<NavigationStart>();\n  routesRecognized = new EventEmitter<RoutesRecognized>();\n\n  constructor(\n    private _router: Router,\n    private _route: ActivatedRoute,\n    private store: Store<any>) {\n    _router.events.subscribe((e: Event) => {\n      if (e instanceof NavigationCancel) {\n        this.onNavigationCancel(e);\n      } else if (e instanceof NavigationEnd) {\n        this.onNavigationEnd(e);\n      } else if (e instanceof NavigationError) {\n        this.onNavigationError(e);\n      } else if (e instanceof NavigationStart) {\n        this.onNavigationStart(e);\n      } else if (e instanceof RoutesRecognized) {\n        this.onRoutesRecognized(e);\n      }\n    });\n  }\n\n  onNavigationCancel(e: NavigationCancel): void {\n    this.store.dispatch(RouterActions.navCancel(e));\n  }\n\n  onNavigationEnd(e: NavigationEnd): void {\n    this.store.dispatch(RouterActions.navEnd(e));\n  }\n\n  onNavigationError(e: NavigationError): void {\n    this.store.dispatch(RouterActions.navError(e));\n  }\n\n  onNavigationStart(e: NavigationStart): void {\n    this.store.dispatch(RouterActions.navStart(e));\n  }\n\n  onRoutesRecognized(e: RoutesRecognized): void {\n    this.store.dispatch(RouterActions.routesRecognized(e));\n  }\n\n  get activatedRoute(): ActivatedRoute {\n    return this._route;\n  }\n\n  get routeData$(): Observable<Data> {\n    return this.activatedRoute.data;\n  }\n\n  get routeParams$(): Observable<Params> {\n    return this.activatedRoute.params;\n  }\n\n  get router(): Router {\n    return this._router;\n  }\n\n  get url$(): Observable<string> {\n    return this.store.select(s => s.router.url);\n  }\n\n  navigate(commands: any[], extras?: NavigationExtras): Observable<boolean> {\n    const promise = this.router.navigate(commands, extras);\n    return from(promise);\n  }\n\n  navigateByUrl(url: string, extras?: NavigationExtras): Observable<boolean> {\n    const promise = this.router.navigateByUrl(url, extras);\n    return from(promise);\n  }\n\n}","import { Injectable } from '@angular/core';\r\nimport { Effect, Actions, ofType } from '@ngrx/effects';\r\nimport { Observable, of } from 'rxjs';\r\nimport { map, switchMap, catchError } from 'rxjs/operators';\r\n\r\nimport { RouterActions } from './actions';\r\nimport { RouterService } from './router.service';\r\nimport { Action } from '../store/models';\r\n\r\n@Injectable()\r\nexport class RouterEffects {\r\n    actionTypes: string[];\r\n\r\n    /**\r\n     * All imperative navigation should be performed using this effects\r\n     * so that the state is aware of the navigation.\r\n     */\r\n    @Effect() navigate: Observable<Action> = this.actions$.pipe(\r\n        ofType(RouterActions.NAVIGATE),\r\n        switchMap((action: Action) => this.navigate$(action.payload))\r\n    );\r\n\r\n    constructor(\r\n        private actions$: Actions,\r\n        private router: RouterService\r\n    ) { }\r\n\r\n    navigate$(r: string | any[]): Observable<Action> {\r\n        const nav$: Observable<boolean> = typeof (r) === 'string' ? this.router.navigateByUrl(r) : this.router.navigate(r);\r\n        return nav$.pipe(\r\n            map(() => RouterActions.navigateSuccess()),\r\n            catchError((e) => {\r\n                return of(RouterActions.navigateError());\r\n            })\r\n        );\r\n    }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { RouterModule as NGRouterModule } from '@angular/router';\n\nimport { RouterEffects } from './router.effects';\nimport { RouterService } from './router.service';\n\n@NgModule({\n  imports: [NGRouterModule],\n  exports: [NGRouterModule]\n})\nexport class RouterModule {\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: RouterModule,\n      providers: [RouterService, RouterEffects]\n    };\n  }\n}","import { Type } from '@angular/core';\r\nimport {\r\n    Route,\r\n    ActivatedRouteSnapshot,\r\n    Event,\r\n    NavigationCancel,\r\n    NavigationEnd,\r\n    NavigationError,\r\n    NavigationStart,\r\n    RoutesRecognized,\r\n    RouterStateSnapshot,\r\n    UrlSegment,\r\n    Params,\r\n    Data\r\n} from '@angular/router';\r\n\r\nimport { build, assignProps } from '../shared/utils';\r\nimport { Dictionary } from '../shared/models';\r\n\r\nexport class ActivatedRoutePayload {\r\n    routeName = '';\r\n    parent?: string;\r\n}\r\n\r\nexport class Breadcrumbs {\r\n\r\n    constructor(public segments: RouteSegment[]) {\r\n    }\r\n\r\n}\r\n\r\nexport class CustomRoute implements Route {\r\n    public children: Route[] = [];\r\n    public lazyChildren: Route[] = [];\r\n    public component: Type<any>;\r\n    private _path = '';\r\n\r\n    constructor(props: Dictionary<any>) {\r\n        assignProps(this, props);\r\n    }\r\n\r\n    get path() {\r\n        return this._path;\r\n    }\r\n\r\n    set path(value: string) {\r\n        this._path = value;\r\n    }\r\n\r\n    get route(): Route {\r\n        return {\r\n            component: this.component,\r\n            children: [\r\n                ...this.children,\r\n                ...this.lazyChildren\r\n            ]\r\n        }\r\n    }\r\n}\r\n\r\nexport class LazyRoute extends CustomRoute {\r\n\r\n    constructor(props: Dictionary<any>) {\r\n        super(props);\r\n        this.path = '';\r\n    }\r\n}\r\n\r\nexport interface RouterEvent {\r\n    eventType: any;\r\n    event: Event;\r\n    navigationCancel?: NavigationCancel;\r\n    navigationEnd?: NavigationEnd;\r\n    navigationError?: NavigationError;\r\n    navigationStart?: NavigationStart;\r\n    routesRecognized?: RoutesRecognized;\r\n}\r\n\r\nexport enum NavigationStatus {\r\n    Default,\r\n    NavigationStart,\r\n    NavigationCancel,\r\n    NavigationError,\r\n    RoutesRecognized,\r\n    NavigationEnd\r\n}\r\n\r\nexport class RouteSegment {\r\n    /** The static and resolved data of this route */\r\n    data: Data;\r\n    /** The URL fragment shared by all the routes */\r\n    fragment = '';\r\n    /** The order of the segment in the route */\r\n    order = 0;\r\n    /** The outlet name of the route */\r\n    outlet = '';\r\n    /** The path from the root of the router state tree to this route */\r\n    pathFromRoot: ActivatedRouteSnapshot[];\r\n    /** The matrix parameters scoped to this route */\r\n    params: Params;\r\n    /** The label to pass to the anchor tag */\r\n    routeLabel = '';\r\n    /** The unique identifier for the route segment */\r\n    routeName = '';\r\n    /** The URL segments matched by this route */\r\n    url: UrlSegment[];\r\n\r\n    /** The link to pass to the anchor tag */\r\n    get routerLink(): string {\r\n        return this.pathFromRoot\r\n            .map(r => r.url)\r\n            .reduce((acc, x) => {\r\n                const segment = RouterState.BuildUrlSegment(x);\r\n                return segment && segment !== '/' ? `${acc}${segment}` : acc;\r\n            }, '');\r\n    }\r\n}\r\n\r\nexport class RouterState {\r\n    id = 0;\r\n    activatedRoute: ActivatedRouteSnapshot;\r\n    error: any = undefined;\r\n    events: RouterEvent[] = [];\r\n    history: VisitedRoute[] = [];\r\n    navigationStatus: NavigationStatus = NavigationStatus.Default;\r\n    reason = '';\r\n    rootRoute: ActivatedRouteSnapshot;\r\n    state: RouterStateSnapshot = undefined;\r\n    url = '';\r\n    urlAfterRedirects = '';\r\n\r\n    static BuildRoute(props: Dictionary<any>): Route {\r\n        const r = new CustomRoute(props);\r\n        return <Route>r;\r\n    }\r\n\r\n    static BuildLazyRoute(props: Dictionary<any>): Route {\r\n        const r = new LazyRoute(props);\r\n        return <Route>r;\r\n    }\r\n\r\n    static BuildUrlSegment(url: UrlSegment[]): string {\r\n        return url.reduce((acc, segment) => segment.path && segment.path !== '/' ? `${acc}/${segment.path}` : acc, '');\r\n    }\r\n\r\n    static GetActivatedOutlets(root: ActivatedRouteSnapshot, index = 0): Dictionary<RouteSegment> {\r\n        return root ? root.children.reduce((acc: Dictionary<RouteSegment>, r: ActivatedRouteSnapshot, currentIndex) => {\r\n            const i = index + currentIndex;\r\n            const routeName = RouterState.GetRouteName(r);\r\n            const existing = build(RouteSegment, acc[routeName]);\r\n            const outlet = RouterState.GetRouteSegment(r, existing, i);\r\n            return routeName ? Object.assign(acc, RouterState.GetActivatedOutlets(r, i + 1), { [routeName]: outlet })\r\n                : Object.assign(acc, RouterState.GetActivatedOutlets(r, i + 1));\r\n        }, {}) : {};\r\n    }\r\n\r\n    static GetActivatedRoute(root: ActivatedRouteSnapshot): ActivatedRouteSnapshot {\r\n        return root.children.reduce((acc: ActivatedRouteSnapshot, r: ActivatedRouteSnapshot) => {\r\n            return RouterState.GetActivatedRoute(r);\r\n        }, root);\r\n    }\r\n\r\n    static GetAllParams(route: ActivatedRouteSnapshot): any {\r\n        return route ? route.children.reduce((acc: any, r: ActivatedRouteSnapshot) => {\r\n            return Object.assign({}, acc, RouterState.GetAllParams(r));\r\n        }, Object.assign({}, route.params, route.queryParams)) : {};\r\n    }\r\n\r\n    static GetRouteData(route: ActivatedRouteSnapshot): any {\r\n        return route.data;\r\n    }\r\n\r\n    static GetRouteSegment(route: ActivatedRouteSnapshot, existing: RouteSegment = new RouteSegment(), index = 0): RouteSegment {\r\n        const routeName = RouterState.GetRouteName(route);\r\n        return build(RouteSegment, existing, {\r\n            data: route.data,\r\n            fragment: route.fragment,\r\n            order: index,\r\n            outlet: route.outlet,\r\n            pathFromRoot: route.pathFromRoot,\r\n            params: route.params,\r\n            routeName,\r\n            routeLabel: RouterState.GetRouteData(route)['routeLabel'] || existing.routeLabel\r\n        });\r\n    }\r\n\r\n    static GetRouteName(route: ActivatedRouteSnapshot): string {\r\n        return route ? RouterState.GetRouteData(route)['routeName'] : '';\r\n    }\r\n\r\n    get activatedOutlets(): Dictionary<RouteSegment> {\r\n        return RouterState.GetActivatedOutlets(this.rootRoute);\r\n    }\r\n\r\n    get lastEvent(): RouterEvent {\r\n        return this.events[-1];\r\n    }\r\n\r\n    get params(): any {\r\n        return RouterState.GetAllParams(this.rootRoute);\r\n    }\r\n\r\n    get routeName(): string {\r\n        return RouterState.GetRouteName(this.activatedRoute);\r\n    }\r\n\r\n    get visited(): string[] {\r\n        return this.history.map(x => x.link);\r\n    }\r\n\r\n    addRouterEvent(e: Event, eventType: any): RouterEvent[] {\r\n        const newEvent = <RouterEvent>{ eventType: eventType, event: e };\r\n        return [\r\n            ...this.events,\r\n            newEvent\r\n        ];\r\n    }\r\n\r\n    navigationCancel(payload: NavigationCancel): RouterState {\r\n        return build(RouterState, this,\r\n            {\r\n                navigationStatus: NavigationStatus.NavigationCancel,\r\n                events: this.addRouterEvent(payload, NavigationStatus.NavigationCancel),\r\n                id: payload.id,\r\n                url: payload.url,\r\n                reason: payload.reason\r\n            });\r\n    }\r\n\r\n    navigationEnd(payload: NavigationEnd): RouterState {\r\n        const history = [payload.toString(), ...this.history];\r\n        return build(RouterState, this,\r\n            {\r\n                history,\r\n                navigationStatus: NavigationStatus.NavigationEnd,\r\n                events: this.addRouterEvent(payload, NavigationStatus.NavigationEnd),\r\n                id: payload.id,\r\n                url: payload.url,\r\n                urlAfterRedirects: payload.urlAfterRedirects\r\n            });\r\n    }\r\n\r\n    navigationError(payload: NavigationError): RouterState {\r\n        return build(RouterState, this,\r\n            {\r\n                navigationStatus: NavigationStatus.NavigationError,\r\n                events: this.addRouterEvent(payload, NavigationStatus.NavigationError),\r\n                id: payload.id,\r\n                url: payload.url,\r\n                error: payload.error\r\n            });\r\n    }\r\n\r\n    navigationStart(payload: NavigationStart): RouterState {\r\n        return build(RouterState, this,\r\n            {\r\n                navigationStatus: NavigationStatus.NavigationStart,\r\n                events: this.addRouterEvent(payload, NavigationStatus.NavigationStart),\r\n                id: payload.id,\r\n                url: payload.url\r\n            });\r\n    }\r\n\r\n    routesRecognized(payload: RoutesRecognized): RouterState {\r\n        const rootRoute = payload.state.root;\r\n        const activatedRoute = RouterState.GetActivatedRoute(rootRoute);\r\n        return build(RouterState, this,\r\n            {\r\n                activatedRoute,\r\n                rootRoute,\r\n                navigationStatus: NavigationStatus.RoutesRecognized,\r\n                events: this.addRouterEvent(payload, NavigationStatus.RoutesRecognized),\r\n                id: payload.id,\r\n                state: payload.state,\r\n                url: payload.url,\r\n                urlAfterRedirects: payload.urlAfterRedirects\r\n            });\r\n    }\r\n\r\n}\r\n\r\nexport class VisitedRoute {\r\n    label = '';\r\n    link = '';\r\n    name = '';\r\n    visitTime = new Date();\r\n}\r\n","import { Store } from '@ngrx/store';\r\nimport { Observable, of, combineLatest } from 'rxjs';\r\nimport { map, distinctUntilChanged } from 'rxjs/operators';\r\n\r\nimport { RouterState, Breadcrumbs } from './models';\r\nimport { QueryModel } from '../shared/models';\r\nimport { toArray, toInt } from '../shared/utils';\r\n\r\nexport function routeSelector(store: Store<any>): Observable<RouterState> {\r\n    return store.select('route');\r\n}\r\n\r\nexport function breadcrumbsSelector(store: Store<any>): Observable<Breadcrumbs> {\r\n    return routeSelector(store).pipe(\r\n        map(r => {\r\n            const outlets = r.activatedOutlets;\r\n            return new Breadcrumbs(Object.keys(outlets).map(key => outlets[key]));\r\n        })\r\n    );\r\n}\r\n\r\nexport function routeNameSelector(store: Store<any>): Observable<string> {\r\n    return routeSelector(store).pipe(\r\n        map(r => r.routeName),\r\n        distinctUntilChanged()\r\n    );\r\n}\r\n\r\nexport function routeParamsSelector(store: Store<any>): Observable<any> {\r\n    return routeSelector(store).pipe(\r\n        map(r => r.params),\r\n        distinctUntilChanged()\r\n    );\r\n}\r\n\r\nexport function lazyRouteParamsSelector(store: Store<any>, key: string): Observable<any> {\r\n    return routeParamsSelector(store).pipe(\r\n        map(params => params[key]),\r\n        distinctUntilChanged()\r\n    );\r\n}\r\n\r\nexport function routeParamSelector(store: Store<any>, key: string, defaultValue = null): Observable<any> {\r\n    return combineLatest(of(defaultValue), lazyRouteParamsSelector(store, key), (x, y) => {\r\n        return y || x;\r\n    });\r\n}\r\n\r\nexport function routeParamArraySelector(store: Store<any>, key: string): Observable<any[]> {\r\n    return routeParamSelector(store, key, []).pipe(\r\n        map(x => toArray(x))\r\n    );\r\n}\r\n\r\nexport function routeParamIdSelector(store: Store<any>, key: string): Observable<number> {\r\n    return routeParamIntSelector(store, key);\r\n}\r\n\r\nexport function routeParamIntSelector(store: Store<any>, key: string): Observable<number> {\r\n    return routeParamSelector(store, key, 0).pipe(\r\n        map(x => toInt(x))\r\n    );\r\n}\r\n\r\nexport function urlSelector(store: Store<any>): Observable<string> {\r\n    return routeSelector(store).pipe(\r\n        map(r => r.url),\r\n        distinctUntilChanged()\r\n    );\r\n}\r\n\r\nexport function querySelector(store: Store<any>): Observable<QueryModel<any>> {\r\n    const skip$ = routeParamIntSelector(store, 'skip');\r\n    const take$ = routeParamIntSelector(store, 'take');\r\n    const term$ = routeParamSelector(store, 'term');\r\n    return combineLatest(skip$, take$, term$,\r\n        (skip, take, term) => (\r\n            Object.assign(new QueryModel<any>(),\r\n                {\r\n                    skip,\r\n                    take,\r\n                    term\r\n                }\r\n            )\r\n        ));\r\n}\r\n","export class Token {\r\n    access_token = '';\r\n    expiresIn = 0;\r\n    expiresInDate: Date;\r\n\r\n    get authenticated(): boolean {\r\n        return !this.expired;\r\n    }\r\n\r\n    get expires_in(): number {\r\n        return this.expiresIn;\r\n    }\r\n\r\n    set expires_in(value: number) {\r\n        this.expiresIn = value;\r\n        this.expiresInDate = new Date();\r\n    }\r\n\r\n    get expirationDate(): Date {\r\n        const t = new Date(this.expiresInDate);\r\n        t.setSeconds(t.getSeconds() + this.expiresIn);\r\n        return t;\r\n    }\r\n\r\n    get expired(): boolean {\r\n        const now = new Date();\r\n        return this.access_token && this.expiresIn && this.expiresInDate ? now > this.expirationDate : true;\r\n    }\r\n\r\n    toString(): string {\r\n        return this.expired ? '' : this.access_token;\r\n    }\r\n\r\n}\r\n","export class Window {\r\n    windowHeight = 0;\r\n    windowWidth = 0;\r\n\r\n    get windowWidthSmall(): boolean {\r\n        return this.windowWidth < 1200;\r\n    }\r\n\r\n    get windowWidthMedium(): boolean {\r\n        return !this.windowWidthSmall && this.windowWidth < 1300;\r\n    }\r\n\r\n    get windowWidthLarge(): boolean {\r\n        return this.windowWidth >= 1300;\r\n    }\r\n}\r\n\r\nexport class WindowResize {\r\n    windowHeight = 0;\r\n    windowWidth = 0;\r\n}\r\n","import { Store } from '@ngrx/store';\r\nimport { Observable, of } from 'rxjs';\r\nimport { map, distinctUntilChanged } from 'rxjs/operators';\r\n\r\nimport { Config } from '../shared/config';\r\nimport { Token } from '../shared/token';\r\nimport { CurrentUser } from '../shared/user';\r\nimport { build } from '../shared/utils';\r\nimport { Window } from '../shared/window';\r\n\r\nexport function allSelector(store: Store<any>): Observable<any> {\r\n    return store.pipe(\r\n        map(x => x)\r\n    );\r\n}\r\n\r\nexport function emptySelector(store: Store<any>): Observable<any> {\r\n    return of({});\r\n}\r\n\r\nexport function currentUserSelector(store: Store<any>): Observable<CurrentUser> {\r\n    return store.select('currentUser');\r\n}\r\n\r\nexport function authenticatedSelector(store: Store<any>): Observable<boolean> {\r\n    return currentUserSelector(store).pipe(\r\n        map(user => user.authenticated),\r\n        distinctUntilChanged()\r\n    );\r\n}\r\n\r\nexport function configSelector(store: Store<any>): Observable<Config> {\r\n    return store.select('config');\r\n}\r\n\r\nexport function windowSelector(store: Store<any>): Observable<Window> {\r\n    return store.select('window').pipe(\r\n        map(w => build(Window, w))\r\n    );\r\n}\r\n\r\nexport function windowHeightSelector(store: Store<any>): Observable<number> {\r\n    return windowSelector(store).pipe(\r\n        map(window => window.windowHeight),\r\n        distinctUntilChanged()\r\n    );\r\n}\r\n\r\nexport function windowWidthSelector(store: Store<any>): Observable<number> {\r\n    return windowSelector(store).pipe(\r\n        map(window => window.windowWidth),\r\n        distinctUntilChanged()\r\n    );\r\n}\r\n\r\nexport function containerHeightSelector(store: Store<any>): Observable<number> {\r\n    return windowHeightSelector(store).pipe(\r\n        map(h => h === 0 ? 700 : h)\r\n    );\r\n}\r\n\r\nexport function containerWidthSelector(store: Store<any>): Observable<number> {\r\n    return windowWidthSelector(store).pipe(\r\n        map(w => w === 0 ? 1200 : w)\r\n    );\r\n}\r\n\r\nexport function contentHeightSelector(store: Store<any>): Observable<number> {\r\n    return windowHeightSelector(store).pipe(\r\n        map(h => h === 0 ? 700 : h)\r\n    );\r\n}\r\n\r\nexport function contentWidthSelector(store: Store<any>): Observable<number> {\r\n    return windowWidthSelector(store).pipe(\r\n        map(w => w === 0 ? 1200 : w)\r\n    );\r\n}\r\n\r\nexport function sidenavOpenedSelector(store: Store<any>): Observable<boolean> {\r\n    return (<Observable<boolean>>store.select('sidenav')).pipe(\r\n        distinctUntilChanged()\r\n    );\r\n}\r\n\r\nexport function apiBaseUrlSelector(store: Store<any>): Observable<string> {\r\n    return configSelector(store).pipe(\r\n        map(config => config.apiBaseUrl)\r\n    );\r\n}\r\n\r\nexport function authTokenSelector(store: Store<any>): Observable<string> {\r\n    return currentUserSelector(store).pipe(\r\n        map(user => {\r\n            const token: Token = user && user.token ? build(Token, user.token) : new Token();\r\n            return token.toString();\r\n        })\r\n    );\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\r\nimport { Store } from '@ngrx/store';\r\nimport { Observable } from 'rxjs';\r\n\r\nimport { authenticatedSelector } from '../../store/selectors';\r\n\r\n@Injectable()\r\nexport class AuthenticatedGuard implements CanActivate {\r\n\r\n    authenticated$: Observable<boolean>;\r\n\r\n    constructor(public store: Store<any>) {\r\n        this.authenticated$ = authenticatedSelector(this.store);\r\n    }\r\n\r\n    canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<boolean> | boolean {\r\n        return this.authenticated$;\r\n    }\r\n\r\n}\r\n","import { OnDestroy } from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { MatDialog } from '@angular/material';\r\nimport { Store, Action } from '@ngrx/store';\r\nimport { Subscription } from 'rxjs';\r\n\r\nimport { HasId } from './models';\r\nimport { getValue, truthy } from './utils';\r\n\r\nexport class DumbComponent implements OnDestroy {\r\n\r\n    dialog: MatDialog;\r\n    dialogRef: Subscription;\r\n    form: FormGroup;\r\n    requestState: 'DEFAULT' | 'SUCCESS' | 'ERROR' = 'DEFAULT';\r\n    subscriptions: Subscription[] = [];\r\n\r\n    constructor() {\r\n    }\r\n\r\n    get inErrorState(): boolean {\r\n        return this.requestState === 'ERROR';\r\n    }\r\n\r\n    get inSuccessState(): boolean {\r\n        return this.requestState === 'SUCCESS';\r\n    }\r\n\r\n    get message(): string {\r\n        return this.inErrorState ? `An error has occurred. Please try again later.`\r\n            : this.inSuccessState ? `Saved successfully!` : '';\r\n    }\r\n\r\n    get showMessage(): boolean {\r\n        return this.inErrorState || this.inSuccessState;\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.removeSubscriptions();\r\n    }\r\n\r\n    addSubscription(subscription: Subscription) {\r\n        this.subscriptions.push(subscription);\r\n    }\r\n\r\n    closeDialog(result: any) {\r\n        this.dialogRef.unsubscribe();\r\n    }\r\n\r\n    openDialog(component: any, config = {}) {\r\n        const dialogRef = this.dialog.open(component, config);\r\n        this.dialogRef = dialogRef.afterClosed().subscribe(result => {\r\n            this.closeDialog(result);\r\n        });\r\n    }\r\n\r\n    removeSubscriptions() {\r\n        this.subscriptions.forEach(s => {\r\n            s.unsubscribe();\r\n        });\r\n    }\r\n\r\n    subscribe(subscriptions: Subscription[]) {\r\n        subscriptions.forEach(s => {\r\n            this.addSubscription(s);\r\n        });\r\n    }\r\n\r\n    flashErrorMessage(duration = 5000) {\r\n        this.toErrorState();\r\n        setTimeout(() => {\r\n            this.resetRequestState();\r\n        }, duration);\r\n    }\r\n\r\n    flashSuccessMessage(duration = 5000) {\r\n        this.toSucessState();\r\n        setTimeout(() => {\r\n            this.resetRequestState();\r\n        }, duration);\r\n    }\r\n\r\n    onError(e: any) {\r\n        this.flashErrorMessage();\r\n    }\r\n\r\n    onSuccess(e: any) {\r\n        this.flashSuccessMessage();\r\n    }\r\n\r\n    resetRequestState() {\r\n        this.requestState = 'DEFAULT';\r\n    }\r\n\r\n    setValue(value: any) {\r\n        if (this.form && this.form.setValue) {\r\n            this.form.setValue(getValue(value));\r\n        }\r\n    }\r\n\r\n    toErrorState() {\r\n        this.requestState = 'ERROR';\r\n    }\r\n\r\n    toSucessState() {\r\n        this.requestState = 'SUCCESS';\r\n    }\r\n\r\n}\r\n\r\nexport class FormComponent extends DumbComponent {\r\n\r\n    form: FormGroup;\r\n    model: HasId;\r\n\r\n    get editing(): boolean {\r\n        return truthy(this.id);\r\n    }\r\n\r\n    get id(): number | string {\r\n        return this.model.id;\r\n    }\r\n\r\n    get isValid(): boolean {\r\n      return this.form.valid;\r\n    }\r\n\r\n    markAsSubmitted() {\r\n        this.form.markAsTouched();\r\n        Object.keys(this.form.controls).forEach(key => {\r\n            this.form.controls[key].markAsTouched();\r\n        });\r\n    }\r\n\r\n}\r\n\r\nexport class SmartComponent extends DumbComponent {\r\n\r\n    events;\r\n\r\n    constructor(public store: Store<any>) {\r\n        super();\r\n    }\r\n\r\n    dispatch(action: Action) {\r\n        this.store.dispatch(action);\r\n    }\r\n\r\n    dispatchAndSubscribe(action: Action, onSuccess?: (e: any) => void, onError?: (e: any) => void) {\r\n        const f1 = onSuccess ? onSuccess : e => {\r\n            this.flashSuccessMessage();\r\n        };\r\n\r\n        const f2 = onError ? onError : e => {\r\n            this.flashErrorMessage();\r\n        };\r\n\r\n        if (this.events && this.events.dispatch) {\r\n            this.addSubscription(this.events.dispatch(action).subscribe(f1, f2));\r\n        } else {\r\n            this.store.dispatch(action);\r\n        }\r\n    }\r\n\r\n}","export class Config {\r\n    dev = false;\r\n    test = false;\r\n    staging = false;\r\n    production = false;\r\n    apiBaseUrl = '';\r\n}\r\n\r\nexport class ViewConfig extends Config {\r\n    viewMode: 'Default' | 'Classic' | 'Material' = 'Default';\r\n}\r\n","import { Collection } from './collection';\r\nimport { DateHelper } from './date';\r\nimport { build } from './utils';\r\n\r\nexport class Question {\r\n    answer?: any;\r\n    lookup?: any;\r\n    key: string | number;\r\n    question = '';\r\n    title?= '';\r\n    type?: string | AnswerType;\r\n}\r\n\r\nexport type AnswerType = 'date' | 'monthyear' | 'yesno';\r\n\r\nexport class Questions extends Collection<Question> {\r\n\r\n    static AnswerQuestions(questions: Question[], answers: any): Question[] {\r\n        return questions.map(question => Questions.AnswerQuestion(question, answers[question.key]));\r\n    }\r\n\r\n    static AnswerQuestion(question: Question, answerData: any): Question {\r\n        let answer = answerData;\r\n        switch (question.type) {\r\n            case 'date':\r\n                answer = answerData;\r\n                break;\r\n            case 'monthyear':\r\n                answer = DateHelper.ToMonthYearName(answerData);\r\n                break;\r\n            case 'yesno':\r\n                answer = answerData ? 'Yes' : 'No';\r\n                break;\r\n        }\r\n        return build(Question, question, { answer });\r\n    }\r\n\r\n    answerQuestions(answers: any): Question[] {\r\n        return Questions.AnswerQuestions(this.toArray(), answers);\r\n    }\r\n}\r\n\r\nexport abstract class QuestionsModel {\r\n    ignore = ['isAdd', 'questions'];\r\n    abstract questions: Question[];\r\n\r\n    get answers(): Question[] {\r\n        return Questions.AnswerQuestions(this.questions, this);\r\n    }\r\n}\r\n","import { TypeConstructor } from './models';\r\nimport { compareNumbers } from './utils';\r\n\r\nexport class TreeItem<T> {\r\n\r\n    id = 0;\r\n    order = 0;\r\n    parentId = 0;\r\n    treeId = 0;\r\n    index = 0;\r\n\r\n    static Build<T>(item: T): TreeItem<T> {\r\n        return <TreeItem<T>>{\r\n            item: item,\r\n            id: item['id'],\r\n            order: item['order'],\r\n            parentId: item['parentId']\r\n        };\r\n    }\r\n\r\n    constructor(public item: T, public parent?: T) {\r\n\r\n    }\r\n\r\n    get hasParent(): boolean {\r\n        return this.parentId ? true : false;\r\n    }\r\n\r\n    get sortOrder(): number {\r\n        return this.parentId ? this.treeId + (.1 * this.order) : this.treeId;\r\n    }\r\n\r\n    get treeOrder(): number {\r\n        return this.parentId ? this.order : 0;\r\n    }\r\n}\r\n\r\nexport class Tree<T> {\r\n    _activeId = 0;\r\n    _activeIndex = -1;\r\n\r\n    static FindParent<T>(items: TreeItem<T>[], item: TreeItem<T>): TreeItem<T> {\r\n        return items.find(x => x.id === item.parentId) || new TreeItem<T>(<T>{});\r\n    }\r\n\r\n    static FindParentOrder<T>(items: TreeItem<T>[], item: TreeItem<T>): number {\r\n        const parent = Tree.FindParent(items, item);\r\n        return parent.order;\r\n    }\r\n\r\n    static Build<T>(items: TreeItem<T>[], ctor: TypeConstructor<T>): Tree<T> {\r\n        const treeItems = items.reduce((acc, item) => {\r\n            item.treeId = item.parentId ? Tree.FindParentOrder(items, item) : item.order;\r\n            const treeItem = Object.assign(new TreeItem<T>(<T>{}), item);\r\n            return [...acc, treeItem];\r\n        }, []);\r\n        const orderedItems = items.sort((a, b) => compareNumbers(a.sortOrder, b.sortOrder))\r\n            .reduce((acc: TreeItem<T>[], treeItem: TreeItem<T>, index: number) => {\r\n                const item = treeItem.item;\r\n                const parent = treeItem.parent;\r\n                return [...acc, <TreeItem<T>>Object.assign(new TreeItem<T>(item, parent), treeItem, { index: index + 1 })];\r\n            }, []);\r\n        return new Tree<T>(orderedItems, ctor);\r\n    }\r\n\r\n    constructor(private _treeItems: TreeItem<T>[], public ctor: TypeConstructor<T>) {\r\n    }\r\n\r\n    get activeId(): number {\r\n        return this._activeId;\r\n    }\r\n\r\n    set activeId(id: number) {\r\n        this._activeId = id;\r\n        this._activeIndex = this.getIndexById(id);\r\n    }\r\n\r\n    get activeIndex(): number {\r\n        return this._activeIndex;\r\n    }\r\n\r\n    set activeIndex(index: number) {\r\n        this._activeIndex = index;\r\n        this._activeId = this.getIdByIndex(index);\r\n    }\r\n\r\n    get copy(): Tree<T> {\r\n        return Object.assign(new Tree<T>(this._treeItems, this.ctor), this);\r\n    }\r\n\r\n    get instance(): T {\r\n        return new this.ctor() || <T>{};\r\n    }\r\n\r\n    get next(): TreeItem<T> {\r\n        return this.getNext(this.activeIndex);\r\n    }\r\n\r\n    get nextId(): number {\r\n        return this.next.id;\r\n    }\r\n\r\n    get nextIndex(): number {\r\n        return this.activeIndex + 1;\r\n    }\r\n\r\n    get previous(): TreeItem<T> {\r\n        return this.getPrevious(this.activeIndex);\r\n    }\r\n\r\n    get previousId(): number {\r\n        return this.previous.id;\r\n    }\r\n\r\n    get previousIndex(): number {\r\n        return this.activeIndex - 1;\r\n    }\r\n\r\n    get items(): T[] {\r\n        return this._treeItems.map(x => x.item);\r\n    }\r\n\r\n    get treeItems(): TreeItem<T>[] {\r\n        return this._treeItems;\r\n    }\r\n\r\n    get orderedItems(): TreeItem<T>[] {\r\n        return this.treeItems.sort((a, b) => compareNumbers(a.index, b.index));\r\n    }\r\n\r\n    get subtrees(): Tree<T>[] {\r\n        const trees = this.treeItems.reduce((acc, item) => {\r\n            const treeId = item.treeId;\r\n            const subitems = acc[treeId] || [];\r\n            acc[treeId] = [...subitems, item];\r\n            return acc;\r\n        }, {});\r\n        return Object.keys(trees).map(key => Tree.Build(trees[key], this.ctor));\r\n    }\r\n\r\n    get subtreeItems(): TreeItem<T>[][] {\r\n        return this.subtrees.map(tree => tree.treeItems.sort((a, b) => compareNumbers(a.index, b.index)));\r\n    }\r\n\r\n    getIdByIndex(index: number): number {\r\n        const item = this.getItemByIndex(index);\r\n        return item.id;\r\n    }\r\n\r\n    getIndexById(id: number): number {\r\n        return this.getItemById(id).index;\r\n    }\r\n\r\n    getItemById(id: number): TreeItem<T> {\r\n        return this.treeItems.find(item => item.id === id) || new TreeItem<T>(this.instance);\r\n    }\r\n\r\n    getItemByIndex(index: number): TreeItem<T> {\r\n        return this.treeItems.find(item => item.index === index) || new TreeItem<T>(this.instance);\r\n    }\r\n\r\n    getNext(index: number): TreeItem<T> {\r\n        return this.getItemByIndex(index + 1);\r\n    }\r\n\r\n    getNextId(index: number): number {\r\n        return this.getNext(index).id;\r\n    }\r\n\r\n    getPrevious(index: number): TreeItem<T> {\r\n        return this.getItemByIndex(index - 1);\r\n    }\r\n\r\n    getPreviousId(index: number): number {\r\n        return this.getPrevious(index).id;\r\n    }\r\n}\r\n","import { Token } from './token';\r\nimport { build } from './utils';\r\n\r\nexport class User {\r\n    email = '';\r\n    firstName = '';\r\n    lastName = '';\r\n    fullName = '';\r\n    password = '';\r\n    confirmPassword = '';\r\n    userName = '';\r\n}\r\n\r\nexport class CurrentUser extends User {\r\n\r\n    token: Token = new Token();\r\n\r\n    static Build(data: CurrentUser): CurrentUser {\r\n        const token = data && data.token ? build(Token, data.token) : new Token();\r\n        return build(CurrentUser, data, { token });\r\n    }\r\n\r\n    get authenticated(): boolean {\r\n        return this.token && this.token.authenticated;\r\n    }\r\n\r\n    get userRoles(): UserRoles {\r\n        return new UserRoles(this);\r\n    }\r\n\r\n}\r\n\r\nexport class UserRoles {\r\n\r\n    constructor(public user: CurrentUser = new CurrentUser()) {\r\n    }\r\n\r\n}\r\n\r\nexport class Login {\r\n    grant_type = 'password';\r\n    userName = '';\r\n    password = '';\r\n}\r\n\r\nexport class ResetPassword {\r\n    passwordResetCode = '';\r\n    password = '';\r\n    confirmPassword = '';\r\n}\r\n","import { Action } from '../store/models';\r\n\r\nexport class StorageActions {\r\n    static UPDATE_LOCAL_STORAGE = '[Storage] Update Local Storage';\r\n    static UPDATE_SESSION_STORAGE = '[Storage] Update Session Storage';\r\n    static INIT_STORE = '[Storage] Init Store';\r\n\r\n    static initStore(localStore: any, sessionStore: any): Action {\r\n        return {\r\n            type: StorageActions.INIT_STORE,\r\n            payload: { localStore, sessionStore }\r\n        };\r\n    }\r\n\r\n}\r\n","import { Action } from '../store/models';\r\n\r\nexport class ActionStore {\r\n    store: any;\r\n    constructor(public lastAction: Action) {\r\n    }\r\n}\r\n\r\nexport class Storage {\r\n    [key: string]: any;\r\n    localStore: any = {};\r\n    sessionStore: any = {};\r\n}\r\n","import { Injectable, Inject } from '@angular/core';\nimport { Store } from '@ngrx/store';\n\nimport { StorageActions } from './storage.actions';\nimport { ActionStore } from './storage.models';\nimport { STORE_KEY } from './storage.module';\nimport { Action } from '../store/models';\nimport { build, inArray, filterState } from '../shared/utils';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class StorageService {\n\n  localStorageActions: string[] = [];\n  sessionStorageActions: string[] = [];\n  localStorageMapper: (state: any) => any = s => s;\n  sessionStorageMapper: (state: any) => any = s => s;\n\n  constructor(public store: Store<any>, @Inject(STORE_KEY) public storeKey: string) {\n  }\n\n  get localStore(): any {\n    return localStorage.getItem(this.storeKey);\n  }\n\n  get sessionStore(): any {\n    return sessionStorage.getItem(this.storeKey);\n  }\n\n  get storage(): Storage {\n    const localStore = this.localStore;\n    const sessionStore = this.sessionStore;\n    return build(Storage, Object.assign({}, localStore, sessionStore), {\n      localStore,\n      sessionStore\n    });\n  }\n\n  /**\n   * Initialize the use of local storage and/or session storage\n   * @param localStorageMapper Mapper function for mapping state to local store\n   * @param sessionStorageMapper Mapper function for mapping state to session store\n   * @param localStorageActions Actions after which to save to local storage\n   * @param sessionStorageActions Actions after which to save to session storage\n   */\n  init(localStorageMapper: (state: any) => any = s => s, sessionStorageMapper: (state: any) => any = s => s, localStorageActions = [], sessionStorageActions = []) {\n    const localStore = this.initLocalStore(localStorageMapper, localStorageActions);\n    const sessionStore = this.initSessionStore(sessionStorageMapper, sessionStorageActions);\n    this.store.dispatch(StorageActions.initStore(localStore, sessionStore));\n  }\n\n  /**\n   * Initialize the use of local storage\n   * @param localStorageMapper Mapper function for mapping state to local store\n   * @param localStorageActions Actions after which to save to local storage\n   */\n  initLocalStore(localStorageMapper: (state: any) => any = s => s, localStorageActions = []): any {\n    this.localStorageMapper = localStorageMapper;\n    this.localStorageActions = localStorageActions;\n    const ls = this.localStore;\n    const localStore = ls ? JSON.parse(ls) : {};\n    return localStore;\n  }\n\n  /**\n   * Initialize the use of session storage\n   * @param sessionStorageMapper Mapper function for mapping state to session store\n   * @param sessionStorageActions Actions after which to save to session storage\n   */\n  initSessionStore(sessionStorageMapper: (state: any) => any = s => s, sessionStorageActions = []) {\n    this.sessionStorageMapper = sessionStorageMapper;\n    this.sessionStorageActions = sessionStorageActions;\n    const ss = this.sessionStore;\n    const sessionStore = ss ? JSON.parse(ss) : {};\n    return sessionStorage;\n  }\n\n  inLocalStorage(actionType: string): boolean {\n    return inArray(this.localStorageActions, actionType);\n  }\n\n  inSessionStorage(actionType: string): boolean {\n    return inArray(this.sessionStorageActions, actionType);\n  }\n\n  /**\n   * Store state to local storage.\n   */\n  storeLocal(state: any, action: Action) {\n    try {\n      // const filteredState = new ActionStore(action, this.filterState(Object.assign({}, state)));\n      const filteredState = Object.assign(\n        filterState(new ActionStore(action)),\n        filterState(Object.assign({},\n          this.localStorageMapper(state))));\n      const serializedState = JSON.stringify(filteredState);\n      localStorage.removeItem(this.storeKey);\n      localStorage.setItem(this.storeKey, serializedState);\n    } catch (err) {\n      console.error(`ERROR SAVING LOCAL STATE!\\nAction:\\t${action.actionType}\\n`, err);\n    }\n  }\n\n  /**\n   * Store state to session storage.\n   */\n  storeSession(state: any, action: Action) {\n    try {\n      // const filteredState = new ActionStore(action, this.filterState(Object.assign({}, state)));\n      // const filteredState = this.filterState(Object.assign({}, state));\n      const filteredState = Object.assign(\n        filterState(new ActionStore(action)),\n        filterState(Object.assign({},\n          this.sessionStorageMapper(state))));\n      const serializedState = JSON.stringify(filteredState);\n      localStorage.removeItem(this.storeKey);\n      sessionStorage.setItem(this.storeKey, serializedState);\n    } catch (err) {\n      console.error(`ERROR SAVING SESSION STATE!\\nAction:\\t${action.actionType}\\n`, err);\n    }\n  }\n\n}\n","import { Injectable } from '@angular/core';\r\nimport { Effect, ofType, Actions } from '@ngrx/effects';\r\nimport { Store } from '@ngrx/store';\r\nimport { Observable } from 'rxjs';\r\nimport { map, filter, withLatestFrom } from 'rxjs/operators';\r\n\r\nimport { StorageActions } from './storage.actions';\r\nimport { StorageService } from './storage.service';\r\nimport { Action } from '../store/models';\r\nimport { toPayload } from '../shared/utils';\r\n\r\n\r\n@Injectable()\r\nexport class StorageEffects {\r\n\r\n    actionTypes: string[];\r\n\r\n    /**\r\n     * Listens for dispatched actions, updates local storage in response.\r\n     */\r\n    @Effect() onSyncLocalStorage: Observable<Action> = this.actions$.pipe(\r\n        filter((action: Action) => this.service.inLocalStorage(action.type)),\r\n        map(action => ({\r\n            type: StorageActions.UPDATE_LOCAL_STORAGE,\r\n            payload: action\r\n        }))\r\n    );\r\n\r\n    /**\r\n     * Listens for dispatched actions, updates session storage in response.\r\n     */\r\n    @Effect() onSyncSessionStorage: Observable<Action> = this.actions$.pipe(\r\n        filter((action: Action) => this.service.inSessionStorage(action.type)),\r\n        map(action => ({\r\n            type: StorageActions.UPDATE_SESSION_STORAGE,\r\n            payload: action\r\n        }))\r\n    );\r\n\r\n    /**\r\n     * Stores state to local storage after each action.\r\n     */\r\n    @Effect({ dispatch: false }) onStoreLocal: Observable<void> = this.actions$.pipe(\r\n        ofType(StorageActions.UPDATE_LOCAL_STORAGE),\r\n        map(toPayload),\r\n        withLatestFrom(this.state$, (action: Action, state: any) => {\r\n            this.service.storeLocal(state, action);\r\n        })\r\n    );\r\n\r\n    /**\r\n     * Stores state to local storage after each action.\r\n     */\r\n    @Effect({ dispatch: false }) onStoreSession: Observable<void> = this.actions$.pipe(\r\n        ofType(StorageActions.UPDATE_SESSION_STORAGE),\r\n        map(toPayload),\r\n        withLatestFrom(this.state$, (action: Action, state: any) => {\r\n            this.service.storeSession(state, action);\r\n        })\r\n    );\r\n\r\n    constructor(\r\n        private actions$: Actions,\r\n        private service: StorageService,\r\n        private state$: Store<any>\r\n    ) { }\r\n\r\n}\r\n","import { NgModule, ModuleWithProviders, InjectionToken } from '@angular/core';\r\nimport { Store } from '@ngrx/store';\r\n\r\nimport { StorageEffects } from './storage.effects';\r\nimport { StorageService } from './storage.service';\r\n\r\nexport const STORE_KEY = new InjectionToken<string>('Local/Session Storage Key');\r\n\r\nexport function storageServiceFactory(store: Store<any>, storeKey: string): StorageService {\r\n  return new StorageService(store, storeKey);\r\n}\r\n\r\nexport function provideStorage(storeKey: string): any[] {\r\n  return [\r\n    StorageEffects,\r\n    { provide: StorageService, useFactory: storageServiceFactory, deps: [Store, STORE_KEY] },\r\n    { provide: STORE_KEY, useValue: storeKey },\r\n  ];\r\n}\r\n\r\n@NgModule()\r\nexport class StorageModule {\r\n\r\n  /**\r\n   * Provides StorageModule with storage service and effects.\r\n   * @param storeKey - The name of the key containing the store in storage.\r\n   */\r\n  static forRoot(storeKey: string): ModuleWithProviders {\r\n    return {\r\n      ngModule: StorageModule,\r\n      providers: provideStorage(storeKey)\r\n    };\r\n  }\r\n\r\n}\r\n","import { NgModule, InjectionToken, ModuleWithProviders } from '@angular/core';\nimport { StoreModule as NgrxStoreModule, ActionReducer, Action, ActionReducerMap } from '@ngrx/store';\n\n@NgModule({\n  imports: [\n    NgrxStoreModule,\n  ],\n  declarations: [],\n  exports: [\n    NgrxStoreModule,\n  ]\n})\nexport class StoreModule {\n\n  static forRoot<T, V extends Action = Action>(reducers: ActionReducerMap<T, V> | InjectionToken<ActionReducerMap<T, V>>, config?: any): ModuleWithProviders {\n    return NgrxStoreModule.forRoot(reducers, config);\n  }\n\n  static forFeatures<T, V extends Action = Action>(featureName: string, reducers: ActionReducerMap<T, V> | InjectionToken<ActionReducerMap<T, V>>, config?: any): ModuleWithProviders {\n    return NgrxStoreModule.forFeature(featureName, reducers, config);\n  }\n\n  static forFeature<T, V extends Action = Action>(featureName: string, reducer: ActionReducer<T, V> | InjectionToken<ActionReducer<T, V>>, config?: any): ModuleWithProviders {\n    return NgrxStoreModule.forFeature(featureName, reducer, config);\n  }\n\n}\n","import { ErrorActions } from './errors.actions';\r\nimport { Collection } from '../shared/collection';\r\nimport { Dictionary } from '../shared/models';\r\nimport { Action } from '../store/models';\r\n\r\n\r\nexport function errorsReducer(state: Dictionary<Error> = {}, action: Action): Dictionary<Error> {\r\n    switch (action.type) {\r\n\r\n        case ErrorActions.ADD:\r\n            let newState = Collection.AddItem(state, 'lastError', action.payload.error);\r\n            if (action.payload.key === 'lastError') {\r\n                return newState;\r\n            }\r\n            return Collection.AddItem(state, action.payload.key, action.payload.error);\r\n\r\n        case ErrorActions.REMOVE:\r\n            return Collection.RemoveItem(state, action.payload);\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n","import { EventActions } from './events.actions';\r\nimport { Events } from './events.models';\r\nimport { Action } from '../store/models';\r\n\r\nexport function eventsReducer(state: Events = new Events(), action: Action): Events {\r\n    switch (action.type) {\r\n\r\n        case EventActions.ADD_EVENT:\r\n            return state.addEvent(action.payload);\r\n\r\n        case EventActions.REMOVE_EVENT:\r\n            return state.removeEvent(action.payload);\r\n\r\n        case EventActions.TRIGGER_EVENT:\r\n            return state.triggerEvent(action.payload);\r\n\r\n        case EventActions.UPDATE_VALUE:\r\n            return state.updateValue(action.payload);\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n","import { TypeConstructor } from '../shared/models';\r\nimport { ValidatorFn, AsyncValidatorFn } from '@angular/forms';\r\n\r\nimport { buildControlFromModel, buildArrayFromType } from './utils';\r\n\r\n/**\r\n * Decorates an abstract control property built using form builder.\r\n */\r\nexport function Control<T>(ctor: TypeConstructor<T>) {\r\n    const propertyDecorator = (target: any, propertySignature: string) => {\r\n        const decoratedProperty = buildControlFromModel(new ctor());\r\n        target[propertySignature] = decoratedProperty;\r\n        return target;\r\n    };\r\n    return propertyDecorator;\r\n}\r\n\r\n/**\r\n * Decorates an abstract control property built using form builder.\r\n */\r\nexport function ArrayControl<T>(ctor: TypeConstructor<T>, validator?: ValidatorFn, asyncValidator?: AsyncValidatorFn) {\r\n    const propertyDecorator = (target: any, propertySignature: string) => {\r\n        const decoratedProperty = buildArrayFromType(ctor, validator, asyncValidator);\r\n        target[propertySignature] = decoratedProperty;\r\n        return target;\r\n    };\r\n    return propertyDecorator;\r\n}\r\n","import { LookupActions } from './lookup.actions';\r\nimport { Lookups, Lookup } from './lookup.models';\r\nimport { AppActions } from '../store/actions';\r\nimport { Action } from '../store/models';\r\nimport { build, toArray } from '../shared/utils';\r\n\r\nexport function lookupReducer(state: Lookups = new Lookups(), action: Action): Lookups {\r\n    switch (action.type) {\r\n\r\n        case LookupActions.ADD_KEYS:\r\n            return Lookups.AddLookups(state, toArray(action.payload).map(x => build(Lookup, x)));\r\n\r\n        case LookupActions.ADD_KEY:\r\n            return Lookups.AddLookup(state, action.payload);\r\n\r\n        case LookupActions.ADD_VALUES:\r\n            return Lookups.AddLookups(state, action.payload);\r\n\r\n        case LookupActions.REMOVE_KEY:\r\n            return Lookups.RemoveLookup(state, action.payload);\r\n\r\n        case AppActions.INIT_STORE:\r\n            return build(Lookups, action.payload['lookup']);\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n","import { RouterActions } from './actions';\r\nimport { RouterState } from './models';\r\nimport { Action } from '../store/models';\r\n\r\nexport function routerReducer(state: RouterState = new RouterState(), action: Action): RouterState {\r\n    switch (action.type) {\r\n\r\n        case RouterActions.ACTIVATE:\r\n            return state;\r\n\r\n        case RouterActions.NAVIGATION_CANCEL:\r\n            // console.log(RouterActions.NAVIGATION_CANCEL, action.payload);\r\n            return state.navigationCancel(action.payload);\r\n\r\n        case RouterActions.NAVIGATION_END:\r\n            // console.log(RouterActions.NAVIGATION_END, action.payload);\r\n            return state.navigationEnd(action.payload);\r\n\r\n        case RouterActions.NAVIGATION_ERROR:\r\n            // console.log(RouterActions.NAVIGATION_ERROR, action.payload);\r\n            return state.navigationError(action.payload);\r\n\r\n        case RouterActions.NAVIGATION_START:\r\n            // console.log(RouterActions.NAVIGATION_START, action.payload);\r\n            return state.navigationStart(action.payload);\r\n\r\n        case RouterActions.ROUTES_RECOGNIZED:\r\n            // console.log(RouterActions.ROUTES_RECOGNIZED, action.payload);\r\n            // console.log(getAllParams(action.payload.state.root));\r\n            return state.routesRecognized(action.payload);\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}","import { WindowActions, ConfigActions, SidenavActions } from './actions';\r\nimport { Action } from './models';\r\nimport { Config } from '../shared/config';\r\nimport { build } from '../shared/utils';\r\nimport { Window, WindowResize } from '../shared/window';\r\n\r\nexport function configReducer(state: Config = new Config(), action: Action): Config {\r\n    switch (action.type) {\r\n\r\n        case ConfigActions.INITIALIZE:\r\n            return build(Config, state, action.payload);\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport function sidenavReducer(state = true, action: Action): boolean {\r\n    switch (action.type) {\r\n\r\n        case SidenavActions.CLOSE:\r\n            return false;\r\n\r\n        case SidenavActions.OPEN:\r\n            return true;\r\n\r\n        case SidenavActions.TOGGLE:\r\n            return !state;\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport function windowReducer(state: Window = new Window(), action: Action): Window {\r\n    switch (action.type) {\r\n\r\n        case WindowActions.RESIZE:\r\n            return build(Window, state, <WindowResize>action.payload);\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n"]}
/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { ChangeDetectionStrategy, Component, EventEmitter, Input, Output, forwardRef, ChangeDetectorRef } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { MatDialog } from '@angular/material';
import { EditorWindowComponent } from './editor-window/editor-window.component';
export var /** @type {?} */ EDITOR_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef(function () { return EditorComponent; }),
    multi: true
};
var EditorComponent = /** @class */ (function () {
    function EditorComponent(dialog, ref) {
        this.dialog = dialog;
        this.ref = ref;
        this.type = 'full';
        this.expanded = false;
        this.height = 100;
        this.plugins = [
            'advlist autolink lists link image charmap print preview hr anchor pagebreak',
            'searchreplace wordcount visualblocks visualchars code fullscreen',
            'insertdatetime media nonbreaking save table contextmenu directionality',
            'emoticons template paste textcolor colorpicker textpattern imagetools toc help'
        ];
        this.skinUrl = '/assets/skins/lightgray-gradient';
        this.templates = [
            { title: 'Test template 1', content: 'Test 1' },
            { title: 'Test template 2', content: 'Test 2' }
        ];
        this.changes = new EventEmitter();
    }
    Object.defineProperty(EditorComponent.prototype, "value", {
        get: /**
         * @return {?}
         */
        function () {
            return this._value;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            this._value = val;
            this.setContent(this._value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EditorComponent.prototype, "basic", {
        get: /**
         * @return {?}
         */
        function () {
            return this.type === 'basic';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EditorComponent.prototype, "full", {
        get: /**
         * @return {?}
         */
        function () {
            return this.type === 'full';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EditorComponent.prototype, "config", {
        get: /**
         * @return {?}
         */
        function () {
            switch (this.type) {
                case 'basic':
                    return this.configBasic;
                case 'full':
                    return this.configFull;
                default:
                    return this.configFull;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EditorComponent.prototype, "configBasic", {
        get: /**
         * @return {?}
         */
        function () {
            var _this = this;
            return {
                height: this.height,
                selector: '#' + this.elementId,
                menubar: false,
                skin_url: this.skinUrl,
                theme: 'modern',
                plugins: [
                    'advlist autolink lists link image charmap print preview anchor',
                    'searchreplace visualblocks code fullscreen',
                    'insertdatetime media table contextmenu paste code'
                ],
                toolbar: "undo redo | insert | styleselect | bold italic |\n       alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link",
                content_css: [
                    '//fonts.googleapis.com/css?family=Lato:300,300i,400,400i',
                    '//www.tinymce.com/css/codepen.min.css'
                ],
                setup: function (editor) {
                    _this.editorRef = editor;
                    editor.on('keyup', function (e) {
                        e.preventDefault();
                        var /** @type {?} */ content = editor.getContent();
                        _this.onKeyup(content);
                    });
                    editor.on('change', function (e) {
                        e.preventDefault();
                        var /** @type {?} */ content = editor.getContent();
                        _this.onChange(content);
                    });
                    editor.on('viewcontentloaded', function (e) {
                        editor.setContent('');
                    });
                },
            };
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EditorComponent.prototype, "configFull", {
        get: /**
         * @return {?}
         */
        function () {
            var _this = this;
            return {
                height: this.height,
                selector: '#' + this.elementId,
                plugins: this.plugins,
                skin_url: this.skinUrl,
                templates: this.templates,
                theme: 'modern',
                toolbar1: "undo redo | insert | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent",
                toolbar2: 'print preview | forecolor backcolor | link',
                setup: function (editor) {
                    _this.editorRef = editor;
                    editor.on('keyup', function (e) {
                        e.preventDefault();
                        var /** @type {?} */ content = editor.getContent();
                        _this.onKeyup(content);
                    });
                    editor.on('change', function (e) {
                        e.preventDefault();
                        var /** @type {?} */ content = editor.getContent();
                        _this.onChange(content);
                    });
                    editor.on('viewcontentloaded', function (e) {
                        editor.setContent('');
                    });
                },
                image_advtab: true,
                content_css: [
                    '//fonts.googleapis.com/css?family=Lato:300,300i,400,400i',
                    '//www.tinymce.com/css/codepen.min.css'
                ]
            };
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EditorComponent.prototype, "hasValue", {
        get: /**
         * @return {?}
         */
        function () {
            return this.value ? true : false;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EditorComponent.prototype, "showExpand", {
        get: /**
         * @return {?}
         */
        function () {
            return this.full && !this.expanded;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    EditorComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @return {?}
     */
    EditorComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        tinymce.init(this.config);
    };
    /**
     * @return {?}
     */
    EditorComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        tinymce.remove(this.editorRef);
    };
    /**
     * @return {?}
     */
    EditorComponent.prototype.clear = /**
     * @return {?}
     */
    function () {
        this.value = '';
    };
    /**
     * @param {?} e
     * @return {?}
     */
    EditorComponent.prototype.expand = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        if (e && e.preventDefault) {
            e.preventDefault();
        }
        var /** @type {?} */ config = {
            data: this.editorRef.getContent(),
            width: '1200px'
        };
        this.openDialog(config);
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    EditorComponent.prototype.registerOnChange = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.onModelChange = fn;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    EditorComponent.prototype.registerOnTouched = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.onTouch = fn;
    };
    /**
     * @param {?} value
     * @return {?}
     */
    EditorComponent.prototype.writeValue = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        this.value = value;
    };
    /**
     * @param {?} value
     * @return {?}
     */
    EditorComponent.prototype.onChange = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        this.value = value;
        this.changes.emit(value);
        if (this.onModelChange) {
            this.onModelChange(value);
        }
    };
    /**
     * @param {?} value
     * @return {?}
     */
    EditorComponent.prototype.onUpdate = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        this.onChange(value);
        this.setContent(this.value);
    };
    /**
     * @param {?} value
     * @return {?}
     */
    EditorComponent.prototype.onKeyup = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        this.onChange(value);
    };
    /**
     * @param {?} value
     * @return {?}
     */
    EditorComponent.prototype.onBlur = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        this.focused = '';
    };
    /**
     * @param {?} value
     * @return {?}
     */
    EditorComponent.prototype.onFocus = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        this.focused = value;
        if (this.onTouch) {
            this.onTouch();
        }
    };
    /**
     * @param {?} config
     * @return {?}
     */
    EditorComponent.prototype.openDialog = /**
     * @param {?} config
     * @return {?}
     */
    function (config) {
        var _this = this;
        var /** @type {?} */ dialogRef = this.dialog.open(EditorWindowComponent, config);
        this.dialogRef = dialogRef.afterClosed().subscribe(function (result) {
            _this.closeDialog(result);
        });
    };
    /**
     * @param {?} value
     * @return {?}
     */
    EditorComponent.prototype.closeDialog = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if (value) {
            this.onChange(value);
        }
        this.dialogRef.unsubscribe();
    };
    /**
     * @param {?} value
     * @return {?}
     */
    EditorComponent.prototype.setContent = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if (this.editorRef && this.editorRef.getContent) {
            var /** @type {?} */ content = this.editorRef.getContent();
            if (value && content != value) {
                this.editorRef.setContent(value);
            }
        }
    };
    EditorComponent.decorators = [
        { type: Component, args: [{
                    selector: 'iu-editor',
                    template: "<mat-card class=\"editor\">\n  <textarea [id]=\"elementId\">\n    <ng-content *ngIf=\"!hasValue\"></ng-content>\n    <span *ngIf=\"hasValue\">{{ value }}</span>\n  </textarea>\n  <button *ngIf=\"showExpand\" id=\"expand-editor\" (click)=\"expand($event)\" mat-button>\n    <mat-icon>fullscreen</mat-icon>\n  </button>\n</mat-card>\n",
                    styles: [".mat-card{display:block;clear:both;padding:1px 3px 1px 1px;border-radius:2px}#expand-editor{font-size:36px;position:absolute;right:3px;top:3px;color:#fff;text-align:center;min-width:36px;line-height:24px;padding:2px}.mat-icon{font-size:36px;position:relative;left:-6px;top:-7px}"],
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    providers: [EDITOR_ACCESSOR]
                },] },
    ];
    /** @nocollapse */
    EditorComponent.ctorParameters = function () { return [
        { type: MatDialog },
        { type: ChangeDetectorRef }
    ]; };
    EditorComponent.propDecorators = {
        type: [{ type: Input }],
        elementId: [{ type: Input }],
        expanded: [{ type: Input }],
        height: [{ type: Input }],
        plugins: [{ type: Input }],
        skinUrl: [{ type: Input }],
        templates: [{ type: Input }],
        changes: [{ type: Output }],
        value: [{ type: Input }]
    };
    return EditorComponent;
}());
export { EditorComponent };
function EditorComponent_tsickle_Closure_declarations() {
    /** @type {?} */
    EditorComponent.prototype.type;
    /** @type {?} */
    EditorComponent.prototype.elementId;
    /** @type {?} */
    EditorComponent.prototype.expanded;
    /** @type {?} */
    EditorComponent.prototype.height;
    /** @type {?} */
    EditorComponent.prototype.plugins;
    /** @type {?} */
    EditorComponent.prototype.skinUrl;
    /** @type {?} */
    EditorComponent.prototype.templates;
    /** @type {?} */
    EditorComponent.prototype.changes;
    /** @type {?} */
    EditorComponent.prototype.onModelChange;
    /** @type {?} */
    EditorComponent.prototype.onTouch;
    /** @type {?} */
    EditorComponent.prototype._value;
    /** @type {?} */
    EditorComponent.prototype.focused;
    /** @type {?} */
    EditorComponent.prototype.dialogRef;
    /** @type {?} */
    EditorComponent.prototype.editorRef;
    /** @type {?} */
    EditorComponent.prototype.dialog;
    /** @type {?} */
    EditorComponent.prototype.ref;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZWRpdG9yLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BjYWl1L2xpYnJhcnkvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy9lZGl0b3IvZWRpdG9yLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUNMLHVCQUF1QixFQUN2QixTQUFTLEVBQ1QsWUFBWSxFQUNaLEtBQUssRUFHTCxNQUFNLEVBRU4sVUFBVSxFQUNWLGlCQUFpQixFQUNsQixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQXdCLGlCQUFpQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDekUsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRzlDLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLHlDQUF5QyxDQUFDO0FBSWhGLE1BQU0sQ0FBQyxxQkFBTSxlQUFlLEdBQVE7SUFDbEMsT0FBTyxFQUFFLGlCQUFpQjtJQUMxQixXQUFXLEVBQUUsVUFBVSxDQUFDLGNBQU0sT0FBQSxlQUFlLEVBQWYsQ0FBZSxDQUFDO0lBQzlDLEtBQUssRUFBRSxJQUFJO0NBQ1osQ0FBQzs7SUEyQ0EseUJBQW1CLE1BQWlCLEVBQVUsR0FBc0I7UUFBakQsV0FBTSxHQUFOLE1BQU0sQ0FBVztRQUFVLFFBQUcsR0FBSCxHQUFHLENBQW1CO29CQXZCbEMsTUFBTTt3QkFFcEIsS0FBSztzQkFDUCxHQUFHO3VCQUNGO1lBQ2pCLDZFQUE2RTtZQUM3RSxrRUFBa0U7WUFDbEUsd0VBQXdFO1lBQ3hFLGdGQUFnRjtTQUNqRjt1QkFDa0Isa0NBQWtDO3lCQUNoQztZQUNuQixFQUFFLEtBQUssRUFBRSxpQkFBaUIsRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFO1lBQy9DLEVBQUUsS0FBSyxFQUFFLGlCQUFpQixFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUU7U0FDaEQ7dUJBQ21CLElBQUksWUFBWSxFQUFPO0tBUThCO0lBRXpFLHNCQUFhLGtD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S0FBYTtRQUN0QixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztZQUNoRCxxQkFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUM1QyxFQUFFLENBQUMsQ0FBQyxLQUFLLElBQUksT0FBTyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUM7Z0JBQzlCLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO2FBQ2xDO1NBQ0Y7S0FDRjs7Z0JBN09GLFNBQVMsU0FBQztvQkFDVCxRQUFRLEVBQUUsV0FBVztvQkFDckIsUUFBUSxFQUFFLDhVQVNYO29CQUNDLE1BQU0sRUFBRSxDQUFDLHdSQUF3UixDQUFDO29CQUNsUyxlQUFlLEVBQUUsdUJBQXVCLENBQUMsTUFBTTtvQkFDL0MsU0FBUyxFQUFFLENBQUMsZUFBZSxDQUFDO2lCQUM3Qjs7OztnQkE1QlEsU0FBUztnQkFIaEIsaUJBQWlCOzs7dUJBa0NoQixLQUFLOzRCQUNMLEtBQUs7MkJBQ0wsS0FBSzt5QkFDTCxLQUFLOzBCQUNMLEtBQUs7MEJBTUwsS0FBSzs0QkFDTCxLQUFLOzBCQUlMLE1BQU07d0JBVU4sS0FBSzs7MEJBckVSOztTQTBDYSxlQUFlIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcclxuICBDb21wb25lbnQsXHJcbiAgRXZlbnRFbWl0dGVyLFxyXG4gIElucHV0LFxyXG4gIE9uRGVzdHJveSxcclxuICBPbkluaXQsXHJcbiAgT3V0cHV0LFxyXG4gIEFmdGVyVmlld0luaXQsXHJcbiAgZm9yd2FyZFJlZixcclxuICBDaGFuZ2VEZXRlY3RvclJlZlxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBDb250cm9sVmFsdWVBY2Nlc3NvciwgTkdfVkFMVUVfQUNDRVNTT1IgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCB7IE1hdERpYWxvZyB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsJztcclxuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XHJcblxyXG5pbXBvcnQgeyBFZGl0b3JXaW5kb3dDb21wb25lbnQgfSBmcm9tICcuL2VkaXRvci13aW5kb3cvZWRpdG9yLXdpbmRvdy5jb21wb25lbnQnO1xyXG5cclxuZGVjbGFyZSB2YXIgdGlueW1jZTogYW55O1xyXG5cclxuZXhwb3J0IGNvbnN0IEVESVRPUl9BQ0NFU1NPUjogYW55ID0ge1xyXG4gIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxyXG4gIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IEVkaXRvckNvbXBvbmVudCksXHJcbiAgbXVsdGk6IHRydWVcclxufTtcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnaXUtZWRpdG9yJyxcclxuICB0ZW1wbGF0ZTogYDxtYXQtY2FyZCBjbGFzcz1cImVkaXRvclwiPlxyXG4gIDx0ZXh0YXJlYSBbaWRdPVwiZWxlbWVudElkXCI+XHJcbiAgICA8bmctY29udGVudCAqbmdJZj1cIiFoYXNWYWx1ZVwiPjwvbmctY29udGVudD5cclxuICAgIDxzcGFuICpuZ0lmPVwiaGFzVmFsdWVcIj57eyB2YWx1ZSB9fTwvc3Bhbj5cclxuICA8L3RleHRhcmVhPlxyXG4gIDxidXR0b24gKm5nSWY9XCJzaG93RXhwYW5kXCIgaWQ9XCJleHBhbmQtZWRpdG9yXCIgKGNsaWNrKT1cImV4cGFuZCgkZXZlbnQpXCIgbWF0LWJ1dHRvbj5cclxuICAgIDxtYXQtaWNvbj5mdWxsc2NyZWVuPC9tYXQtaWNvbj5cclxuICA8L2J1dHRvbj5cclxuPC9tYXQtY2FyZD5cclxuYCxcclxuICBzdHlsZXM6IFtgLm1hdC1jYXJke2Rpc3BsYXk6YmxvY2s7Y2xlYXI6Ym90aDtwYWRkaW5nOjFweCAzcHggMXB4IDFweDtib3JkZXItcmFkaXVzOjJweH0jZXhwYW5kLWVkaXRvcntmb250LXNpemU6MzZweDtwb3NpdGlvbjphYnNvbHV0ZTtyaWdodDozcHg7dG9wOjNweDtjb2xvcjojZmZmO3RleHQtYWxpZ246Y2VudGVyO21pbi13aWR0aDozNnB4O2xpbmUtaGVpZ2h0OjI0cHg7cGFkZGluZzoycHh9Lm1hdC1pY29ue2ZvbnQtc2l6ZTozNnB4O3Bvc2l0aW9uOnJlbGF0aXZlO2xlZnQ6LTZweDt0b3A6LTdweH1gXSxcclxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcclxuICBwcm92aWRlcnM6IFtFRElUT1JfQUNDRVNTT1JdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBFZGl0b3JDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSwgQWZ0ZXJWaWV3SW5pdCwgQ29udHJvbFZhbHVlQWNjZXNzb3Ige1xyXG5cclxuICBASW5wdXQoKSB0eXBlOiAnYmFzaWMnIHwgJ2Z1bGwnID0gJ2Z1bGwnO1xyXG4gIEBJbnB1dCgpIGVsZW1lbnRJZDogc3RyaW5nO1xyXG4gIEBJbnB1dCgpIGV4cGFuZGVkID0gZmFsc2U7XHJcbiAgQElucHV0KCkgaGVpZ2h0ID0gMTAwO1xyXG4gIEBJbnB1dCgpIHBsdWdpbnMgPSBbXHJcbiAgICAnYWR2bGlzdCBhdXRvbGluayBsaXN0cyBsaW5rIGltYWdlIGNoYXJtYXAgcHJpbnQgcHJldmlldyBociBhbmNob3IgcGFnZWJyZWFrJyxcclxuICAgICdzZWFyY2hyZXBsYWNlIHdvcmRjb3VudCB2aXN1YWxibG9ja3MgdmlzdWFsY2hhcnMgY29kZSBmdWxsc2NyZWVuJyxcclxuICAgICdpbnNlcnRkYXRldGltZSBtZWRpYSBub25icmVha2luZyBzYXZlIHRhYmxlIGNvbnRleHRtZW51IGRpcmVjdGlvbmFsaXR5JyxcclxuICAgICdlbW90aWNvbnMgdGVtcGxhdGUgcGFzdGUgdGV4dGNvbG9yIGNvbG9ycGlja2VyIHRleHRwYXR0ZXJuIGltYWdldG9vbHMgdG9jIGhlbHAnXHJcbiAgXTtcclxuICBASW5wdXQoKSBza2luVXJsID0gJy9hc3NldHMvc2tpbnMvbGlnaHRncmF5LWdyYWRpZW50JztcclxuICBASW5wdXQoKSB0ZW1wbGF0ZXMgPSBbXHJcbiAgICB7IHRpdGxlOiAnVGVzdCB0ZW1wbGF0ZSAxJywgY29udGVudDogJ1Rlc3QgMScgfSxcclxuICAgIHsgdGl0bGU6ICdUZXN0IHRlbXBsYXRlIDInLCBjb250ZW50OiAnVGVzdCAyJyB9XHJcbiAgXTtcclxuICBAT3V0cHV0KCkgY2hhbmdlcyA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gIHByaXZhdGUgb25Nb2RlbENoYW5nZTogRnVuY3Rpb247XHJcbiAgcHJpdmF0ZSBvblRvdWNoOiBGdW5jdGlvbjtcclxuICBfdmFsdWU6IHN0cmluZztcclxuICBmb2N1c2VkOiBzdHJpbmc7XHJcbiAgZGlhbG9nUmVmOiBTdWJzY3JpcHRpb247XHJcbiAgZWRpdG9yUmVmOiBhbnk7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBkaWFsb2c6IE1hdERpYWxvZywgcHJpdmF0ZSByZWY6IENoYW5nZURldGVjdG9yUmVmKSB7IH1cclxuXHJcbiAgQElucHV0KCkgc2V0IHZhbHVlKHZhbDogc3RyaW5nKSB7XHJcbiAgICB0aGlzLl92YWx1ZSA9IHZhbDtcclxuICAgIHRoaXMuc2V0Q29udGVudCh0aGlzLl92YWx1ZSk7XHJcbiAgfVxyXG5cclxuICBnZXQgdmFsdWUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fdmFsdWU7XHJcbiAgfVxyXG5cclxuICBnZXQgYmFzaWMoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy50eXBlID09PSAnYmFzaWMnO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGZ1bGwoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy50eXBlID09PSAnZnVsbCc7XHJcbiAgfVxyXG5cclxuICBnZXQgY29uZmlnKCk6IGFueSB7XHJcbiAgICBzd2l0Y2ggKHRoaXMudHlwZSkge1xyXG4gICAgICBjYXNlICdiYXNpYyc6XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnQmFzaWM7XHJcbiAgICAgIGNhc2UgJ2Z1bGwnOlxyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZ0Z1bGw7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnRnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldCBjb25maWdCYXNpYygpOiBhbnkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaGVpZ2h0OiB0aGlzLmhlaWdodCxcclxuICAgICAgc2VsZWN0b3I6ICcjJyArIHRoaXMuZWxlbWVudElkLFxyXG4gICAgICBtZW51YmFyOiBmYWxzZSxcclxuICAgICAgc2tpbl91cmw6IHRoaXMuc2tpblVybCxcclxuICAgICAgdGhlbWU6ICdtb2Rlcm4nLFxyXG4gICAgICBwbHVnaW5zOiBbXHJcbiAgICAgICAgJ2Fkdmxpc3QgYXV0b2xpbmsgbGlzdHMgbGluayBpbWFnZSBjaGFybWFwIHByaW50IHByZXZpZXcgYW5jaG9yJyxcclxuICAgICAgICAnc2VhcmNocmVwbGFjZSB2aXN1YWxibG9ja3MgY29kZSBmdWxsc2NyZWVuJyxcclxuICAgICAgICAnaW5zZXJ0ZGF0ZXRpbWUgbWVkaWEgdGFibGUgY29udGV4dG1lbnUgcGFzdGUgY29kZSdcclxuICAgICAgXSxcclxuICAgICAgdG9vbGJhcjogYHVuZG8gcmVkbyB8IGluc2VydCB8IHN0eWxlc2VsZWN0IHwgYm9sZCBpdGFsaWMgfFxyXG4gICAgICAgYWxpZ25sZWZ0IGFsaWduY2VudGVyIGFsaWducmlnaHQgYWxpZ25qdXN0aWZ5IHwgYnVsbGlzdCBudW1saXN0IG91dGRlbnQgaW5kZW50IHwgbGlua2AsXHJcbiAgICAgIGNvbnRlbnRfY3NzOiBbXHJcbiAgICAgICAgJy8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzP2ZhbWlseT1MYXRvOjMwMCwzMDBpLDQwMCw0MDBpJyxcclxuICAgICAgICAnLy93d3cudGlueW1jZS5jb20vY3NzL2NvZGVwZW4ubWluLmNzcydcclxuICAgICAgXSxcclxuICAgICAgc2V0dXA6IGVkaXRvciA9PiB7XHJcbiAgICAgICAgdGhpcy5lZGl0b3JSZWYgPSBlZGl0b3I7XHJcbiAgICAgICAgZWRpdG9yLm9uKCdrZXl1cCcsIChlKSA9PiB7XHJcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gZWRpdG9yLmdldENvbnRlbnQoKTtcclxuICAgICAgICAgIHRoaXMub25LZXl1cChjb250ZW50KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBlZGl0b3Iub24oJ2NoYW5nZScsIChlKSA9PiB7XHJcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gZWRpdG9yLmdldENvbnRlbnQoKTtcclxuICAgICAgICAgIHRoaXMub25DaGFuZ2UoY29udGVudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZWRpdG9yLm9uKCd2aWV3Y29udGVudGxvYWRlZCcsIChlKSA9PiB7XHJcbiAgICAgICAgICBlZGl0b3Iuc2V0Q29udGVudCgnJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgZ2V0IGNvbmZpZ0Z1bGwoKTogYW55IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGhlaWdodDogdGhpcy5oZWlnaHQsXHJcbiAgICAgIHNlbGVjdG9yOiAnIycgKyB0aGlzLmVsZW1lbnRJZCxcclxuICAgICAgcGx1Z2luczogdGhpcy5wbHVnaW5zLFxyXG4gICAgICBza2luX3VybDogdGhpcy5za2luVXJsLFxyXG4gICAgICB0ZW1wbGF0ZXM6IHRoaXMudGVtcGxhdGVzLFxyXG4gICAgICB0aGVtZTogJ21vZGVybicsXHJcbiAgICAgIHRvb2xiYXIxOiBgdW5kbyByZWRvIHwgaW5zZXJ0IHwgc3R5bGVzZWxlY3QgfCBib2xkIGl0YWxpYyB8IGFsaWdubGVmdCBhbGlnbmNlbnRlciBhbGlnbnJpZ2h0IGFsaWduanVzdGlmeSB8IGJ1bGxpc3QgbnVtbGlzdCBvdXRkZW50IGluZGVudGAsXHJcbiAgICAgIHRvb2xiYXIyOiAncHJpbnQgcHJldmlldyB8IGZvcmVjb2xvciBiYWNrY29sb3IgfCBsaW5rJyxcclxuICAgICAgc2V0dXA6IGVkaXRvciA9PiB7XHJcbiAgICAgICAgdGhpcy5lZGl0b3JSZWYgPSBlZGl0b3I7XHJcbiAgICAgICAgZWRpdG9yLm9uKCdrZXl1cCcsIChlKSA9PiB7XHJcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gZWRpdG9yLmdldENvbnRlbnQoKTtcclxuICAgICAgICAgIHRoaXMub25LZXl1cChjb250ZW50KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBlZGl0b3Iub24oJ2NoYW5nZScsIChlKSA9PiB7XHJcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gZWRpdG9yLmdldENvbnRlbnQoKTtcclxuICAgICAgICAgIHRoaXMub25DaGFuZ2UoY29udGVudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZWRpdG9yLm9uKCd2aWV3Y29udGVudGxvYWRlZCcsIChlKSA9PiB7XHJcbiAgICAgICAgICBlZGl0b3Iuc2V0Q29udGVudCgnJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGltYWdlX2FkdnRhYjogdHJ1ZSxcclxuICAgICAgY29udGVudF9jc3M6IFtcclxuICAgICAgICAnLy9mb250cy5nb29nbGVhcGlzLmNvbS9jc3M/ZmFtaWx5PUxhdG86MzAwLDMwMGksNDAwLDQwMGknLFxyXG4gICAgICAgICcvL3d3dy50aW55bWNlLmNvbS9jc3MvY29kZXBlbi5taW4uY3NzJ1xyXG4gICAgICBdXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgZ2V0IGhhc1ZhbHVlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmFsdWUgPyB0cnVlIDogZmFsc2U7XHJcbiAgfVxyXG5cclxuICBnZXQgc2hvd0V4cGFuZCgpIHtcclxuICAgIHJldHVybiB0aGlzLmZ1bGwgJiYgIXRoaXMuZXhwYW5kZWQ7XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICB9XHJcblxyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICAgIHRpbnltY2UuaW5pdCh0aGlzLmNvbmZpZyk7XHJcbiAgfVxyXG5cclxuICBuZ09uRGVzdHJveSgpIHtcclxuICAgIHRpbnltY2UucmVtb3ZlKHRoaXMuZWRpdG9yUmVmKTtcclxuICB9XHJcblxyXG4gIGNsZWFyKCkge1xyXG4gICAgdGhpcy52YWx1ZSA9ICcnO1xyXG4gIH1cclxuXHJcbiAgZXhwYW5kKGU6IGFueSkge1xyXG4gICAgaWYgKGUgJiYgZS5wcmV2ZW50RGVmYXVsdCkge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBjb25maWcgPSB7XHJcbiAgICAgIGRhdGE6IHRoaXMuZWRpdG9yUmVmLmdldENvbnRlbnQoKSxcclxuICAgICAgd2lkdGg6ICcxMjAwcHgnXHJcbiAgICB9O1xyXG4gICAgdGhpcy5vcGVuRGlhbG9nKGNvbmZpZyk7XHJcbiAgfVxyXG5cclxuICByZWdpc3Rlck9uQ2hhbmdlKGZuOiBGdW5jdGlvbikge1xyXG4gICAgdGhpcy5vbk1vZGVsQ2hhbmdlID0gZm47XHJcbiAgfVxyXG5cclxuICByZWdpc3Rlck9uVG91Y2hlZChmbjogRnVuY3Rpb24pIHtcclxuICAgIHRoaXMub25Ub3VjaCA9IGZuO1xyXG4gIH1cclxuXHJcbiAgd3JpdGVWYWx1ZSh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgfVxyXG5cclxuICBvbkNoYW5nZSh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICB0aGlzLmNoYW5nZXMuZW1pdCh2YWx1ZSk7XHJcbiAgICBpZiAodGhpcy5vbk1vZGVsQ2hhbmdlKSB7XHJcbiAgICAgIHRoaXMub25Nb2RlbENoYW5nZSh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvblVwZGF0ZSh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICB0aGlzLm9uQ2hhbmdlKHZhbHVlKTtcclxuICAgIHRoaXMuc2V0Q29udGVudCh0aGlzLnZhbHVlKTtcclxuICB9XHJcblxyXG4gIG9uS2V5dXAodmFsdWU6IHN0cmluZykge1xyXG4gICAgdGhpcy5vbkNoYW5nZSh2YWx1ZSk7XHJcbiAgfVxyXG5cclxuICBvbkJsdXIodmFsdWU6IHN0cmluZykge1xyXG4gICAgdGhpcy5mb2N1c2VkID0gJyc7XHJcbiAgfVxyXG5cclxuICBvbkZvY3VzKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuZm9jdXNlZCA9IHZhbHVlO1xyXG4gICAgaWYgKHRoaXMub25Ub3VjaCkge1xyXG4gICAgICB0aGlzLm9uVG91Y2goKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9wZW5EaWFsb2coY29uZmlnOiBhbnkpIHtcclxuICAgIGNvbnN0IGRpYWxvZ1JlZiA9IHRoaXMuZGlhbG9nLm9wZW4oRWRpdG9yV2luZG93Q29tcG9uZW50LCBjb25maWcpO1xyXG4gICAgdGhpcy5kaWFsb2dSZWYgPSBkaWFsb2dSZWYuYWZ0ZXJDbG9zZWQoKS5zdWJzY3JpYmUocmVzdWx0ID0+IHtcclxuICAgICAgdGhpcy5jbG9zZURpYWxvZyhyZXN1bHQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZURpYWxvZyh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICBpZiAodmFsdWUpIHtcclxuICAgICAgdGhpcy5vbkNoYW5nZSh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmRpYWxvZ1JlZi51bnN1YnNjcmliZSgpO1xyXG4gIH1cclxuXHJcbiAgc2V0Q29udGVudCh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICBpZiAodGhpcy5lZGl0b3JSZWYgJiYgdGhpcy5lZGl0b3JSZWYuZ2V0Q29udGVudCkge1xyXG4gICAgICBjb25zdCBjb250ZW50ID0gdGhpcy5lZGl0b3JSZWYuZ2V0Q29udGVudCgpO1xyXG4gICAgICBpZiAodmFsdWUgJiYgY29udGVudCAhPSB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuZWRpdG9yUmVmLnNldENvbnRlbnQodmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufVxyXG4iXX0=
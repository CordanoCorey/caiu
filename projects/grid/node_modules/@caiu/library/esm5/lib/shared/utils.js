/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Metadata } from './models';
/**
 * @param {?} derived
 * @param {?} baseCtors
 * @return {?}
 */
export function applyDecorators(derived, baseCtors) {
    baseCtors.forEach(function (baseCtor) {
        Object.getOwnPropertyNames(baseCtor.prototype).forEach(function (name) {
            derived[name] = baseCtor.prototype[name];
        });
    });
}
/**
 * @param {?} derivedCtor The clas Constructor
 * @param {?} baseCtors
 * @return {?}
 */
export function applyMixins(derivedCtor, baseCtors) {
    baseCtors.forEach(function (baseCtor) {
        Object.getOwnPropertyNames(baseCtor.prototype).forEach(function (name) {
            derivedCtor.prototype[name] = baseCtor.prototype[name];
        });
    });
}
/**
 * Find distinct elements in the union of 2 arrays.
 * @param {?} array1
 * @param {?} array2
 * @return {?}
 */
export function arrayUnion(array1, array2) {
    var /** @type {?} */ a = tslib_1.__spread(array1, array2);
    for (var /** @type {?} */ i = 0; i < a.length; ++i) {
        for (var /** @type {?} */ j = i + 1; j < a.length; ++j) {
            if (a[i] === a[j]) {
                a.splice(j--, 1);
            }
        }
    }
    return a;
}
/**
 * @param {?} target
 * @param {?} props
 * @return {?}
 */
export function assignProps(target, props) {
    Object.keys(props).forEach(function (key) {
        if (target[key]) {
            target[key] = props[key];
        }
    });
}
/**
 * @template T
 * @param {?} ctor
 * @param {...?} args
 * @return {?}
 */
export function build(ctor) {
    var args = [];
    for (var _i = 1; _i < arguments.length; _i++) {
        args[_i - 1] = arguments[_i];
    }
    var /** @type {?} */ instance = new ctor();
    return args.reduce(function (acc, next) {
        var /** @type {?} */ ret;
        try {
            ret = Object.assign(acc, next);
        }
        catch (/** @type {?} */ e) {
            console.warn(e);
            ret = acc;
        }
        finally {
            return ret;
        }
    }, instance);
}
/**
 * @param {?} a
 * @param {?} b
 * @return {?}
 */
export function compareDates(a, b) {
    return new Date(b).getTime() - new Date(a).getTime();
}
/**
 * @param {?} a
 * @param {?} b
 * @return {?}
 */
export function compareNumbers(a, b) {
    return a - b;
}
/**
 * @param {?} a
 * @param {?} b
 * @return {?}
 */
export function compareStrings(a, b) {
    var /** @type {?} */ x = a.toLowerCase();
    var /** @type {?} */ y = b.toLowerCase();
    if (x < y) {
        return -1;
    }
    else if (x > y) {
        return 1;
    }
    return 0;
}
/**
 * @param {?} arr
 * @param {?=} key
 * @return {?}
 */
export function distinct(arr, key) {
    if (key === void 0) { key = ''; }
    return key ? arr.reduce(function (acc, x) { return acc.findIndex(function (y) { return y[key] === x[key]; }) === -1 ? tslib_1.__spread(acc, [x]) : acc; }, [])
        : arr.reduce(function (acc, x) { return acc.indexOf(x) === -1 ? tslib_1.__spread(acc, [x]) : acc; }, []);
}
/**
 * @param {?} x1
 * @param {?} x2
 * @return {?}
 */
export function equals(x1, x2) {
    // check whether x1 and x2 have the same type
    if (typeof (x1) !== typeof (x2)) {
        return false;
    }
    // check whether x1 and x2 are both null or both undefined
    if ((x1 === null && x2 === null) || (x1 === undefined && x2 === undefined)) {
        return true;
    }
    // account for non-matching null and undefined values
    if (((x1 === null || x1 === undefined) && x2 !== null && x2 !== undefined)
        || ((x2 === null || x2 === undefined) && x1 !== null && x1 !== undefined)) {
        return false;
    }
    // compare two arrays
    if (Array.isArray(x1) && Array.isArray(x2) && x1.length === x2.length) {
        return x1.findIndex(function (x, index) { return !equals(x, x2[index]); }) === -1 ? true : false;
    }
    // compare two objects
    if (x1 && typeof (x1) === 'object' && typeof (x2) === 'object'
        && Object.keys(x1).length === Object.keys(x2).length
        && Object.keys(x2).length === arrayUnion(Object.keys(x1), Object.keys(x2)).length) {
        return Object.keys(x1).findIndex(function (key) { return !equals(x1[key], x2[key]); }) === -1;
    }
    // compare two primitives with the same type
    return x1 === x2;
}
/**
 * Extends an object with the *enumerable* and *own* properties of one or more source objects,
 * similar to Object.assign.
 *
 * @param {?} dest The object which will have properties copied to it.
 * @param {...?} sources The source objects from which properties will be copied.
 * @return {?}
 */
export function extendObject(dest) {
    var sources = [];
    for (var _i = 1; _i < arguments.length; _i++) {
        sources[_i - 1] = arguments[_i];
    }
    if (dest == null) {
        throw TypeError('Cannot convert undefined or null to object');
    }
    try {
        for (var sources_1 = tslib_1.__values(sources), sources_1_1 = sources_1.next(); !sources_1_1.done; sources_1_1 = sources_1.next()) {
            var source = sources_1_1.value;
            if (source != null) {
                for (var /** @type {?} */ key in source) {
                    if (source.hasOwnProperty(key)) {
                        dest[key] = source[key];
                    }
                }
            }
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (sources_1_1 && !sources_1_1.done && (_a = sources_1.return)) _a.call(sources_1);
        }
        finally { if (e_1) throw e_1.error; }
    }
    return dest;
    var e_1, _a;
}
/**
 * @param {?} value
 * @return {?}
 */
export function falsy(value) {
    return value === null || value === 0 || value === '' || value === undefined;
}
/**
 * Remove problematic or undesired store properties.
 * @param {?} obj
 * @return {?}
 */
export function filterState(obj) {
    return removeCycles(removeProps(obj));
}
/**
 * @param {?} ctor
 * @return {?}
 */
export function findMetadata(ctor) {
    var /** @type {?} */ instance = new ctor();
    return instance && instance.metadata ? instance.metadata : new Metadata();
}
/**
 * @return {?}
 */
export function findSchoolYear() {
    var /** @type {?} */ date = new Date();
    var /** @type {?} */ year = date.getFullYear();
    var /** @type {?} */ month = date.getMonth();
    return month >= 7 ? year + "-" + (year + 1) : year - 1 + "-" + year;
}
/**
 * @param {?} obj
 * @param {?} parents
 * @return {?}
 */
export function flattenKeys(obj, parents) {
    return Object.keys(obj).reduce(function (acc, key) {
        var /** @type {?} */ pathToRoot = tslib_1.__spread(parents, [key]);
        var /** @type {?} */ val = obj[key];
        if (!Array.isArray(val) && Object.keys(val).length > 0) {
            return tslib_1.__spread(acc, flattenKeys(val, pathToRoot));
        }
        return tslib_1.__spread(acc, pathToRoot);
    }, []);
}
/**
 * @param {?=} number
 * @return {?}
 */
export function formatPhoneNumber(number) {
    if (number === void 0) { number = ''; }
    if (!number) {
        return '000-000-0000';
    }
    var /** @type {?} */ l = number.length;
    return number && (l === 7 || l === 10) ?
        l === 7 ? format7DigitPhoneNumber(number)
            : format10DigitPhoneNumber(number)
        : '000-000-0000';
}
/**
 * @param {?=} number
 * @return {?}
 */
export function format7DigitPhoneNumber(number) {
    if (number === void 0) { number = '0000000'; }
    var /** @type {?} */ first3 = number.substring(0, 3);
    var /** @type {?} */ last4 = number.substring(3, 7);
    return first3 + " -" + last4 + " ";
}
/**
 * @param {?=} number
 * @return {?}
 */
export function format10DigitPhoneNumber(number) {
    if (number === void 0) { number = '0000000000'; }
    var /** @type {?} */ first3 = number.substring(0, 3);
    var /** @type {?} */ last7 = format7DigitPhoneNumber(number.substring(3, 10));
    return first3 + " -" + last7 + " ";
}
/**
 * @param {?} total
 * @return {?}
 */
export function formatPrice(total) {
    var /** @type {?} */ dollars = total.toFixed(2).replace(/./g, function (c, i, a) {
        return i && c !== '.' && ((a.length - i) % 3 === 0) ? ',' + c : c;
    });
    return "$" + dollars;
}
/**
 * @param {?} type
 * @return {?}
 */
export function getTypeNameForDebugging(type) {
    return type['name'] || typeof type;
}
/**
 * @param {?} obj
 * @return {?}
 */
export function getAllProps(obj) {
    var /** @type {?} */ mapped = obj['metadata'] && obj['metadata']['include'] && Array.isArray(obj['metadata']['include']) ?
        obj['metadata']['include'].reduce(function (acc, key) {
            return Object.assign({}, acc, (_a = {}, _a[key] = obj[key], _a));
            var _a;
        }, {}) : obj;
    if (obj['metadata'] && obj['metadata']['exclude'] && Array.isArray(obj['metadata']['exclude'])) {
        obj['metadata']['exclude'].forEach(function (key) {
            delete mapped[key];
        });
    }
    return tslib_1.__spread(Object.keys(mapped), getGetters(mapped));
}
/**
 * @param {?} obj
 * @return {?}
 */
export function getGetters(obj) {
    return Object.keys(obj.constructor.prototype).filter(function (name) {
        return typeof Object.getOwnPropertyDescriptor(obj.constructor.prototype, name)['get'] === 'function';
    });
}
/**
 * @param {?} model
 * @return {?}
 */
export function getKeyValues(model) {
    var /** @type {?} */ keys = getAllProps(model);
    return model['metadata'] && model['metadata']['include'] ?
        toArray(model['metadata']['include']).reduce(function (acc, key) {
            return Object.assign({}, acc, (_a = {}, _a[key] = model[key], _a));
            var _a;
        }, {})
        : keys.reduce(function (acc, key) {
            return Object.assign({}, acc, (_a = {}, _a[key] = model[key], _a));
            var _a;
        }, {});
}
/**
 * @param {?} obj
 * @return {?}
 */
export function getSetters(obj) {
    return Object.keys(obj.prototype).filter(function (name) {
        return typeof Object.getOwnPropertyDescriptor(obj.prototype, name)['set'] === 'function';
    });
}
/**
 * @param {?} el
 * @param {?} styleProp
 * @return {?}
 */
export function getStyle(el, styleProp) {
    var /** @type {?} */ value;
    var /** @type {?} */ defaultView = el.ownerDocument.defaultView;
    // W3C standard way:
    if (defaultView && defaultView.getComputedStyle) {
        // sanitize property name to css notation (hypen separated words eg. font-Size)
        styleProp = styleProp.replace(/([A-Z])/g, '-$1').toLowerCase();
        return defaultView.getComputedStyle(el, null).getPropertyValue(styleProp);
    }
    else if (el['currentStyle']) {
        // IE
        // sanitize property name to camelCase
        styleProp = styleProp.replace(/\-(\w)/g, function (str, letter) {
            return letter.toUpperCase();
        });
        value = el['currentStyle'][styleProp];
        return value;
    }
    return '';
}
/**
 * @param {?} model
 * @return {?}
 */
export function getValue(model) {
    if (model === null || typeof (model) === 'string' || typeof (model) === 'string' || model instanceof Date) {
        return model;
    }
    var /** @type {?} */ keys = getAllProps(model);
    var /** @type {?} */ props = keys.filter(function (key) { return key !== 'metadata' && !ignoreKey(model, key); })
        .map(function (key) {
        var /** @type {?} */ obj = {};
        obj[key] = model[key] && typeof model[key] === 'object' ?
            (Array.isArray(model[key]) ?
                (model[key].length > 0 ?
                    model[key].map(function (x) { return (typeof x === 'object' ? getValue(x) : x); }) : [])
                : getValue(model[key])) : model[key];
        return obj;
    });
    return props.reduce(function (acc, val) {
        return Object.assign({}, acc, val);
    }, {});
}
/**
 * @return {?}
 */
export function guid() {
    /**
     * @return {?}
     */
    function s4() {
        return Math.floor((1 + Math.random()) * 0x10000)
            .toString(16)
            .substring(1);
    }
    return s4() + s4() + '-' + s4() + '-' + s4() + '-' +
        s4() + '-' + s4() + s4() + s4();
}
/**
 * @param {?} changes
 * @param {?} key
 * @param {?} props
 * @return {?}
 */
export function hasChanged(changes, key, props) {
    var /** @type {?} */ currentValue = changes[key] && changes[key].currentValue ? changes[key].currentValue : {};
    var /** @type {?} */ previousValue = changes[key] && changes[key].previousValue ? changes[key].previousValue : {};
    return props.reduce(function (acc, prop) {
        return acc ? true : currentValue[prop] !== previousValue[prop];
    }, false);
}
/**
 * @param {?} changes
 * @param {?} key
 * @return {?}
 */
export function idChanged(changes, key) {
    var /** @type {?} */ newId = changes[key].currentValue ? changes[key].currentValue['id'] || 0 : 0;
    var /** @type {?} */ oldId = changes[key].previousValue ? changes[key].previousValue['id'] || 0 : 0;
    return newId !== oldId;
}
/**
 * @param {?} model
 * @param {?} key
 * @return {?}
 */
export function ignoreKey(model, key) {
    if (model['metadata'] && model['metadata']['ignore']) {
        return inArray(model['metadata']['ignore'], key);
    }
    return false;
}
/**
 * @param {?} arr
 * @param {?} val
 * @return {?}
 */
export function inArray(arr, val) {
    return arr.filter(function (item) { return item === val; }).length > 0;
}
/**
 * @param {?} arr
 * @param {?} val
 * @param {?} key
 * @return {?}
 */
export function inArrayByKey(arr, val, key) {
    return arr.findIndex(function (item) { return item[key] === val; }) !== -1;
}
/**
 * @param {?} n
 * @return {?}
 */
export function integerArray(n) {
    return Array.from(Array(n).keys());
}
/**
 * @param {?} dateFrom
 * @param {?} dateTo
 * @param {?} dateCheck
 * @return {?}
 */
export function isBetweenDates(dateFrom, dateTo, dateCheck) {
    var /** @type {?} */ d1 = dateFrom.toLocaleDateString().split('/');
    var /** @type {?} */ d2 = dateTo.toLocaleDateString().split('/');
    var /** @type {?} */ c = dateCheck.toLocaleDateString().split('/');
    var /** @type {?} */ from = new Date(d1[2], toInt(d1[1]) - 1, d1[0]); // -1 because months are from 0 to 11
    var /** @type {?} */ to = new Date(d2[2], toInt(d2[1]) - 1, d2[0]);
    var /** @type {?} */ check = new Date(c[2], toInt(c[1]) - 1, c[0]);
    return (check >= from && check <= to);
}
/**
 * Detects cycles in an object.
 * @param {?} obj
 * @return {?}
 */
export function isCyclic(obj) {
    var /** @type {?} */ seenObjects = [];
    var /** @type {?} */ detect = function (x) {
        if (x && typeof x === 'object') {
            if (seenObjects.indexOf(x) !== -1) {
                return true;
            }
            seenObjects.push(x);
            for (var /** @type {?} */ key in x) {
                if (x.hasOwnProperty(key) && detect(x[key])) {
                    return true;
                }
            }
        }
        return false;
    };
    return detect(obj);
}
/**
 * @param {?} fromState The last state object from the store
 * @param {?} dState A partial class containing all properties that have changed wrt fromState
 * @return {?} The current/updated state of the application (toState)
 */
export function nextState(fromState, dState) {
    var /** @type {?} */ toState = Object.assign({}, fromState, dState);
    return toState;
}
/**
 * @param {?} n
 * @return {?}
 */
export function positiveIntegerArray(n) {
    return integerArray(n).map(function (x) { return x + 1; });
}
/**
 * Remove store props that contain cycles.
 * @param {?} obj
 * @return {?}
 */
export function removeCycles(obj) {
    if (obj && typeof obj === 'object') {
        for (var /** @type {?} */ key in obj) {
            if (obj.hasOwnProperty(key) && isCyclic(obj[key])) {
                delete obj[key];
            }
        }
    }
    return obj;
}
/**
 * Remove any props that should not appear in the store.
 * @param {?} obj
 * @return {?}
 */
export function removeProps(obj) {
    return obj;
}
/**
 * @param {?} model
 * @return {?}
 */
export function serialize(model) {
    if (Array.isArray(model)) {
        return model.map(function (x) { return serialize(x); });
    }
    if (model.serialize && typeof model.serialize === 'function') {
        return serialize(model.serialize());
    }
    if (model === null || typeof (model) === 'number' || typeof (model) === 'string' || model instanceof Date) {
        return model;
    }
    var /** @type {?} */ keys = getAllProps(model);
    if (keys.length === 0) {
        return model;
    }
    return keys.reduce(function (acc, key) {
        var /** @type {?} */ val = null;
        if (model[key] !== null && typeof (model[key]) === 'object' && !(model[key] instanceof Date)) {
            if (model[key].serialize && typeof model[key].serialize === 'function') {
                val = model[key].serialize();
            }
            else {
                val = serialize(model[key]);
            }
        }
        else {
            val = model[key];
        }
        return Object.assign({}, acc, (_a = {},
            _a[key] = val,
            _a));
        var _a;
    }, {});
}
/**
 * @param {?} token
 * @return {?}
 */
export function stringify(token) {
    if (typeof token === 'string') {
        return token;
    }
    if (token == null) {
        return '' + token;
    }
    if (token.overriddenName) {
        return "" + token.overriddenName;
    }
    if (token.name) {
        return "" + token.name;
    }
    var /** @type {?} */ res = token.toString();
    var /** @type {?} */ newLineIndex = res.indexOf('\n');
    return newLineIndex === -1 ? res : res.substring(0, newLineIndex);
}
/**
 * @param {?} str
 * @return {?}
 */
export function str2CharCode(str) {
    return str.charCodeAt(0);
}
/**
 * @param {?} str
 * @return {?}
 */
export function str2Id(str) {
    var /** @type {?} */ charCodes = str ? str.split('').reduce(function (acc, x) { return "" + acc + str2CharCode(x); }, '') : '';
    return toInt(charCodes);
}
/**
 * @param {?} str
 * @return {?}
 */
export function str2int(str) {
    return parseInt(str, 10);
}
/**
 * @param {?} strArray
 * @return {?}
 */
export function strArray2Id(strArray) {
    var /** @type {?} */ str = strArray.reduce(function (acc, x) { return "" + acc + x; }, '');
    return str2Id(str);
}
/**
 * @param {?} errorName
 * @param {?} errorMessage
 * @return {?}
 */
export function throwException(errorName, errorMessage) {
    throw {
        name: errorName,
        level: 'Show Stopper',
        message: errorMessage,
        htmlMessage: 'Error detected. Please contact the <a href=\'mailto:agendamanager@caiu.com\'>system administrator</a>.',
        toString: function () { return errorName + ': ' + errorMessage; }
    };
}
/**
 * @return {?}
 */
export function throwNotImplementedException() {
    throwException('Not Implemented', 'Not Implemented');
}
/**
 * @param {?} val
 * @return {?}
 */
export function toArray(val) {
    return val ? (Array.isArray(val) ? val : [val]) : [];
}
/**
 * @param {?} val
 * @return {?}
 */
export function toInt(val) {
    return val && val.toString ? str2int(val.toString()) : 0;
}
/**
 * @param {?} action
 * @return {?}
 */
export function toPayload(action) {
    return action ? action.payload : null;
}
/**
 * @param {?} n
 * @return {?}
 */
export function toPx(n) {
    return n + "px";
}
/**
 * @param {?} value
 * @return {?}
 */
export function truthy(value) {
    return !falsy(value);
}
/**
 * @param {?} obj
 * @param {?} type
 * @return {?}
 */
export function tryCast(obj, type) {
    var /** @type {?} */ retObj = new type();
    for (var /** @type {?} */ key in obj) {
        if (typeof (retObj[key]) !== 'undefined') {
            retObj[key] = obj[key];
        }
    }
    return retObj;
}
/**
 * @param {?} changes
 * @param {?=} key
 * @return {?}
 */
export function valueChanged(changes, key) {
    if (key === void 0) { key = ''; }
    return key ? changes[key].currentValue !== changes[key].previousValue
        : Object.keys(changes).reduce(function (acc, currentKey) {
            return acc ? true : changes[currentKey].currentValue !== changes[currentKey].previousValue;
        }, false);
}
/**
 * @param {?} value
 * @param {?} formValue
 * @return {?}
 */
export function valueEquals(value, formValue) {
    return equals(getValue(value), formValue);
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AY2FpdS9saWJyYXJ5LyIsInNvdXJjZXMiOlsibGliL3NoYXJlZC91dGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUVBLE9BQU8sRUFBRSxRQUFRLEVBQTRDLE1BQU0sVUFBVSxDQUFDOzs7Ozs7QUFROUUsTUFBTSwwQkFBMEIsT0FBWSxFQUFFLFNBQWdCO0lBQzFELFNBQVMsQ0FBQyxPQUFPLENBQUMsVUFBQSxRQUFRO1FBQ3RCLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQUEsSUFBSTtZQUN2RCxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsUUFBUSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUM1QyxDQUFDLENBQUM7S0FDTixDQUFDLENBQUM7Q0FDTjs7Ozs7O0FBT0QsTUFBTSxzQkFBc0IsV0FBZ0IsRUFBRSxTQUFnQjtJQUMxRCxTQUFTLENBQUMsT0FBTyxDQUFDLFVBQUEsUUFBUTtRQUN0QixNQUFNLENBQUMsbUJBQW1CLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxVQUFBLElBQUk7WUFDdkQsV0FBVyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsR0FBRyxRQUFRLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQzFELENBQUMsQ0FBQztLQUNOLENBQUMsQ0FBQztDQUNOOzs7Ozs7O0FBT0QsTUFBTSxxQkFBcUIsTUFBTSxFQUFFLE1BQU07SUFDckMscUJBQU0sQ0FBQyxvQkFBTyxNQUFNLEVBQUssTUFBTSxDQUFDLENBQUM7SUFDakMsR0FBRyxDQUFDLENBQUMscUJBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDO1FBQ2hDLEdBQUcsQ0FBQyxDQUFDLHFCQUFJLENBQUMsR0FBRyxD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R0FBRyxDQUFDLENBQUM7U0FDdEIsQ0FBQyxDQUFDO0tBQ047SUFFRCxNQUFNLGtCQUFLLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUssVUFBVSxDQUFDLE1BQU0sQ0FBQyxFQUFFO0NBQzFEOzs7OztBQUVELE1BQU0scUJBQXFCLEdBQVE7SUFDL0IsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxNQUFNLENBQUMsVUFBQSxJQUFJO1FBQ3JELE1BQU0sQ0FBQyxPQUFPLE1BQU0sQ0FBQyx3QkFBd0IsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxVQUFVLENBQUM7S0FDeEcsQ0FBQyxDQUFDO0NBQ047Ozs7O0FBRUQsTUFBTSx1QkFBdUIsS0FBVTtJQUNuQyxxQkFBTSxJQUFJLEdBQUcsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2hDLE1BQU0sQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLElBQUksS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7UUFDdEQsT0FBTyxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxVQUFDLEdBQUcsRUFBRSxHQUFHO1lBQUssT0FBQSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxHQUFHLFlBQUksR0FBQyxHQUFHLElBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxNQUFHOztRQUE3QyxDQUE2QyxFQUFFLEVBQUUsQ0FBQztRQUM3RyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFDLEdBQUcsRUFBRSxHQUFHO1lBQUssT0FBQSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxHQUFHLFlBQUksR0FBQyxHQUFHLElBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxNQUFHOztRQUE3QyxDQUE2QyxFQUFF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QkFBQSxFQUFBLFFBQVE7SUFDekQsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLFlBQVksS0FBSyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsYUFBYTtRQUNqRSxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsVUFBQyxHQUFHLEVBQUUsVUFBVTtZQUMxQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxZQUFZLEtBQUssT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDLGFBQWEsQ0FBQztTQUM5RixFQUFFLEtBQUssQ0FBQyxDQUFDO0NBQ2pCOzs7Ozs7QUFFRCxNQUFNLHNCQUFzQixLQUFLLEVBQUUsU0FBUztJQUN4QyxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsRUFBRSxTQUFTLENBQUMsQ0FBQztDQUM3QyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNpbXBsZUNoYW5nZXMgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcbmltcG9ydCB7IE1ldGFkYXRhLCBEaWN0aW9uYXJ5LCBUeXBlQ29uc3RydWN0b3IsIEhhc01ldGFkYXRhIH0gZnJvbSAnLi9tb2RlbHMnO1xyXG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tICcuLi9zdG9yZS9tb2RlbHMnO1xyXG5cclxuLyoqXHJcbiAqIEBwYXJhbSBkZXJpdmVkQ3RvciBUaGUgY2xhcyBDb25zdHJ1Y3RvclxyXG4gKiBAcGFyYW0gYmFzZUN0b3IgVGhlIG1peGlucyB0byBhcHBseVxyXG4gKiBFeGFtcGxlIFVzYWdlOiBhcHBseU1peGlucyhVbml2ZXJzaXR5UHJvZmVzc29yLCBbRW1wbG95ZWUsIFJlc2VhcmNoZXJdKVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5RGVjb3JhdG9ycyhkZXJpdmVkOiBhbnksIGJhc2VDdG9yczogYW55W10pIHtcclxuICAgIGJhc2VDdG9ycy5mb3JFYWNoKGJhc2VDdG9yID0+IHtcclxuICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhiYXNlQ3Rvci5wcm90b3R5cGUpLmZvckVhY2gobmFtZSA9PiB7XHJcbiAgICAgICAgICAgIGRlcml2ZWRbbmFtZV0gPSBiYXNlQ3Rvci5wcm90b3R5cGVbbmFtZV07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBwYXJhbSBkZXJpdmVkQ3RvciBUaGUgY2xhcyBDb25zdHJ1Y3RvclxyXG4gKiBAcGFyYW0gYmFzZUN0b3IgVGhlIG1peGlucyB0byBhcHBseVxyXG4gKiBFeGFtcGxlIFVzYWdlOiBhcHBseU1peGlucyhVbml2ZXJzaXR5UHJvZmVzc29yLCBbRW1wbG95ZWUsIFJlc2VhcmNoZXJdKVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5TWl4aW5zKGRlcml2ZWRDdG9yOiBhbnksIGJhc2VDdG9yczogYW55W10pIHtcclxuICAgIGJhc2VDdG9ycy5mb3JFYWNoKGJhc2VDdG9yID0+IHtcclxuICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhiYXNlQ3Rvci5wcm90b3R5cGUpLmZvckVhY2gobmFtZSA9PiB7XHJcbiAgICAgICAgICAgIGRlcml2ZWRDdG9yLnByb3RvdHlwZVtuYW1lXSA9IGJhc2VDdG9yLnByb3RvdHlwZVtuYW1lXTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogRmluZCBkaXN0aW5jdCBlbGVtZW50cyBpbiB0aGUgdW5pb24gb2YgMiBhcnJheXMuXHJcbiAqIEBwYXJhbSBhcnJheTFcclxuICogQHBhcmFtIGFycmF5MlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGFycmF5VW5pb24oYXJyYXkxLCBhcnJheTIpIHtcclxuICAgIGNvbnN0IGEgPSBbLi4uYXJyYXkxLCAuLi5hcnJheTJdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IGkgKyAxOyBqIDwgYS5sZW5ndGg7ICsraikge1xyXG4gICAgICAgICAgICBpZiAoYVtpXSA9PT0gYVtqXSkge1xyXG4gICAgICAgICAgICAgICAgYS5zcGxpY2Uoai0tLCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnblByb3BzKHRhcmdldDogYW55LCBwcm9wczogRGljdGlvbmFyeTxhbnk+KSB7XHJcbiAgICBPYmplY3Qua2V5cyhwcm9wcykuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICAgIGlmICh0YXJnZXRba2V5XSkge1xyXG4gICAgICAgICAgICB0YXJnZXRba2V5XSA9IHByb3BzW2tleV07XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBidWlsZDxUPihjdG9yOiBUeXBlQ29uc3RydWN0b3I8VD4sIC4uLmFyZ3MpOiBUIHtcclxuICAgIGNvbnN0IGluc3RhbmNlID0gbmV3IGN0b3IoKTtcclxuICAgIHJldHVybiBhcmdzLnJlZHVjZSgoYWNjLCBuZXh0KSA9PiB7XHJcbiAgICAgICAgbGV0IHJldDtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXQgPSBPYmplY3QuYXNzaWduKGFjYywgbmV4dCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oZSk7XHJcbiAgICAgICAgICAgIHJldCA9IGFjYztcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgfSwgaW5zdGFuY2UpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY29tcGFyZURhdGVzKGE6IERhdGUsIGI6IERhdGUpIHtcclxuICAgIHJldHVybiBuZXcgRGF0ZShiKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShhKS5nZXRUaW1lKCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjb21wYXJlTnVtYmVycyhhOiBudW1iZXIsIGI6IG51bWJlcikge1xyXG4gICAgcmV0dXJuIGEgLSBiO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY29tcGFyZVN0cmluZ3MoYTogc3RyaW5nLCBiOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IHggPSBhLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBjb25zdCB5ID0gYi50b0xvd2VyQ2FzZSgpO1xyXG4gICAgaWYgKHggPCB5KSB7XHJcbiAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgfSBlbHNlIGlmICh4ID4geSkge1xyXG4gICAgICAgIHJldHVybiAxO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIDA7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkaXN0aW5jdChhcnI6IGFueVtdLCBrZXkgPSAnJyk6IGFueVtdIHtcclxuICAgIHJldHVybiBrZXkgPyBhcnIucmVkdWNlKChhY2MsIHgpID0+IGFjYy5maW5kSW5kZXgoeSA9PiB5W2tleV0gPT09IHhba2V5XSkgPT09IC0xID8gWy4uLmFjYywgeF0gOiBhY2MsIFtdKVxyXG4gICAgICAgIDogYXJyLnJlZHVjZSgoYWNjLCB4KSA9PiBhY2MuaW5kZXhPZih4KSA9PT0gLTEgPyBbLi4uYWNjLCB4XSA6IGFjYywgW10pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKHgxOiBhbnksIHgyOiBhbnkpOiBib29sZWFuIHtcclxuXHJcbiAgICAvLyBjaGVjayB3aGV0aGVyIHgxIGFuZCB4MiBoYXZlIHRoZSBzYW1lIHR5cGVcclxuICAgIGlmICh0eXBlb2YgKHgxKSAhPT0gdHlwZW9mICh4MikpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY2hlY2sgd2hldGhlciB4MSBhbmQgeDIgYXJlIGJvdGggbnVsbCBvciBib3RoIHVuZGVmaW5lZFxyXG4gICAgaWYgKCh4MSA9PT0gbnVsbCAmJiB4MiA9PT0gbnVsbCkgfHwgKHgxID09PSB1bmRlZmluZWQgJiYgeDIgPT09IHVuZGVmaW5lZCkpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBhY2NvdW50IGZvciBub24tbWF0Y2hpbmcgbnVsbCBhbmQgdW5kZWZpbmVkIHZhbHVlc1xyXG4gICAgaWYgKCgoeDEgPT09IG51bGwgfHwgeDEgPT09IHVuZGVmaW5lZCkgJiYgeDIgIT09IG51bGwgJiYgeDIgIT09IHVuZGVmaW5lZClcclxuICAgICAgICB8fCAoKHgyID09PSBudWxsIHx8IHgyID09PSB1bmRlZmluZWQpICYmIHgxICE9PSBudWxsICYmIHgxICE9PSB1bmRlZmluZWQpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNvbXBhcmUgdHdvIGFycmF5c1xyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoeDEpICYmIEFycmF5LmlzQXJyYXkoeDIpICYmIHgxLmxlbmd0aCA9PT0geDIubGVuZ3RoKSB7XHJcblxyXG4gICAgICAgIHJldHVybiB4MS5maW5kSW5kZXgoKHgsIGluZGV4KSA9PiAhZXF1YWxzKHgsIHgyW2luZGV4XSkpID09PSAtMSA/IHRydWUgOiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBjb21wYXJlIHR3byBvYmplY3RzXHJcbiAgICBpZiAoeDEgJiYgdHlwZW9mICh4MSkgPT09ICdvYmplY3QnICYmIHR5cGVvZiAoeDIpID09PSAnb2JqZWN0J1xyXG4gICAgICAgICYmIE9iamVjdC5rZXlzKHgxKS5sZW5ndGggPT09IE9iamVjdC5rZXlzKHgyKS5sZW5ndGhcclxuICAgICAgICAmJiBPYmplY3Qua2V5cyh4MikubGVuZ3RoID09PSBhcnJheVVuaW9uKE9iamVjdC5rZXlzKHgxKSwgT2JqZWN0LmtleXMoeDIpKS5sZW5ndGgpIHtcclxuXHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHgxKS5maW5kSW5kZXgoa2V5ID0+ICFlcXVhbHMoeDFba2V5XSwgeDJba2V5XSkpID09PSAtMTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBjb21wYXJlIHR3byBwcmltaXRpdmVzIHdpdGggdGhlIHNhbWUgdHlwZVxyXG4gICAgcmV0dXJuIHgxID09PSB4MjtcclxufVxyXG5cclxuLyoqXHJcbiAqIEV4dGVuZHMgYW4gb2JqZWN0IHdpdGggdGhlICplbnVtZXJhYmxlKiBhbmQgKm93biogcHJvcGVydGllcyBvZiBvbmUgb3IgbW9yZSBzb3VyY2Ugb2JqZWN0cyxcclxuICogc2ltaWxhciB0byBPYmplY3QuYXNzaWduLlxyXG4gKlxyXG4gKiBAcGFyYW0gZGVzdCBUaGUgb2JqZWN0IHdoaWNoIHdpbGwgaGF2ZSBwcm9wZXJ0aWVzIGNvcGllZCB0byBpdC5cclxuICogQHBhcmFtIHNvdXJjZXMgVGhlIHNvdXJjZSBvYmplY3RzIGZyb20gd2hpY2ggcHJvcGVydGllcyB3aWxsIGJlIGNvcGllZC5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBleHRlbmRPYmplY3QoZGVzdDogYW55LCAuLi5zb3VyY2VzOiBhbnlbXSk6IGFueSB7XHJcbiAgICBpZiAoZGVzdCA9PSBudWxsKSB7XHJcbiAgICAgICAgdGhyb3cgVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3QnKTtcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKGNvbnN0IHNvdXJjZSBvZiBzb3VyY2VzKSB7XHJcbiAgICAgICAgaWYgKHNvdXJjZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHNvdXJjZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVzdFtrZXldID0gc291cmNlW2tleV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGRlc3Q7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmYWxzeSh2YWx1ZTogYW55KTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IDAgfHwgdmFsdWUgPT09ICcnIHx8IHZhbHVlID09PSB1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gICAqIFJlbW92ZSBwcm9ibGVtYXRpYyBvciB1bmRlc2lyZWQgc3RvcmUgcHJvcGVydGllcy5cclxuICAgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlclN0YXRlKG9iajogYW55KTogYW55IHtcclxuICAgIHJldHVybiByZW1vdmVDeWNsZXMocmVtb3ZlUHJvcHMob2JqKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmaW5kTWV0YWRhdGEoY3RvcjogVHlwZUNvbnN0cnVjdG9yPEhhc01ldGFkYXRhIHwgYW55Pikge1xyXG4gICAgY29uc3QgaW5zdGFuY2UgPSBuZXcgY3RvcigpO1xyXG4gICAgcmV0dXJuIGluc3RhbmNlICYmIGluc3RhbmNlLm1ldGFkYXRhID8gaW5zdGFuY2UubWV0YWRhdGEgOiBuZXcgTWV0YWRhdGEoKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGZpbmRTY2hvb2xZZWFyKCk6IHN0cmluZyB7XHJcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICBjb25zdCBtb250aCA9IGRhdGUuZ2V0TW9udGgoKTtcclxuICAgIHJldHVybiBtb250aCA+PSA3ID8gYCR7eWVhcn0tJHt5ZWFyICsgMX1gIDogYCR7eWVhciAtIDF9LSR7eWVhcn1gO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGZsYXR0ZW5LZXlzKG9iajogT2JqZWN0LCBwYXJlbnRzOiBzdHJpbmdbXSk6IGFueVtdIHtcclxuICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopLnJlZHVjZSgoYWNjLCBrZXkpID0+IHtcclxuICAgICAgICBjb25zdCBwYXRoVG9Sb290ID0gWy4uLnBhcmVudHMsIGtleV07XHJcbiAgICAgICAgY29uc3QgdmFsID0gb2JqW2tleV07XHJcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbCkgJiYgT2JqZWN0LmtleXModmFsKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbLi4uYWNjLCAuLi5mbGF0dGVuS2V5cyh2YWwsIHBhdGhUb1Jvb3QpXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFsuLi5hY2MsIC4uLnBhdGhUb1Jvb3RdO1xyXG4gICAgfSwgW10pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0UGhvbmVOdW1iZXIobnVtYmVyID0gJycpOiBzdHJpbmcge1xyXG4gICAgaWYgKCFudW1iZXIpIHtcclxuICAgICAgICByZXR1cm4gJzAwMC0wMDAtMDAwMCc7XHJcbiAgICB9XHJcbiAgICBjb25zdCBsID0gbnVtYmVyLmxlbmd0aDtcclxuICAgIHJldHVybiBudW1iZXIgJiYgKGwgPT09IDcgfHwgbCA9PT0gMTApID9cclxuICAgICAgICBsID09PSA3ID8gZm9ybWF0N0RpZ2l0UGhvbmVOdW1iZXIobnVtYmVyKVxyXG4gICAgICAgICAgICA6IGZvcm1hdDEwRGlnaXRQaG9uZU51bWJlcihudW1iZXIpXHJcbiAgICAgICAgOiAnMDAwLTAwMC0wMDAwJztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdDdEaWdpdFBob25lTnVtYmVyKG51bWJlciA9ICcwMDAwMDAwJyk6IHN0cmluZyB7XHJcbiAgICBjb25zdCBmaXJzdDMgPSBudW1iZXIuc3Vic3RyaW5nKDAsIDMpO1xyXG4gICAgY29uc3QgbGFzdDQgPSBudW1iZXIuc3Vic3RyaW5nKDMsIDcpO1xyXG4gICAgcmV0dXJuIGAke2ZpcnN0M30gLSR7bGFzdDR9IGA7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXQxMERpZ2l0UGhvbmVOdW1iZXIobnVtYmVyID0gJzAwMDAwMDAwMDAnKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IGZpcnN0MyA9IG51bWJlci5zdWJzdHJpbmcoMCwgMyk7XHJcbiAgICBjb25zdCBsYXN0NyA9IGZvcm1hdDdEaWdpdFBob25lTnVtYmVyKG51bWJlci5zdWJzdHJpbmcoMywgMTApKTtcclxuICAgIHJldHVybiBgJHtmaXJzdDN9IC0ke2xhc3Q3fSBgO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0UHJpY2UodG90YWw6IG51bWJlcik6IHN0cmluZyB7XHJcbiAgICBjb25zdCBkb2xsYXJzID0gdG90YWwudG9GaXhlZCgyKS5yZXBsYWNlKC8uL2csIGZ1bmN0aW9uIChjLCBpLCBhKSB7XHJcbiAgICAgICAgcmV0dXJuIGkgJiYgYyAhPT0gJy4nICYmICgoYS5sZW5ndGggLSBpKSAlIDMgPT09IDApID8gJywnICsgYyA6IGM7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBgJCR7ZG9sbGFyc31gO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHlwZU5hbWVGb3JEZWJ1Z2dpbmcodHlwZTogYW55KTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0eXBlWyduYW1lJ10gfHwgdHlwZW9mIHR5cGU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRBbGxQcm9wcyhvYmo6IGFueSk6IHN0cmluZ1tdIHtcclxuICAgIGNvbnN0IG1hcHBlZCA9IG9ialsnbWV0YWRhdGEnXSAmJiBvYmpbJ21ldGFkYXRhJ11bJ2luY2x1ZGUnXSAmJiBBcnJheS5pc0FycmF5KG9ialsnbWV0YWRhdGEnXVsnaW5jbHVkZSddKSA/XHJcbiAgICAgICAgb2JqWydtZXRhZGF0YSddWydpbmNsdWRlJ10ucmVkdWNlKChhY2MsIGtleSkgPT4gT2JqZWN0LmFzc2lnbih7fSwgYWNjLCB7IFtrZXldOiBvYmpba2V5XSB9KSwge30pIDogb2JqO1xyXG5cclxuICAgIGlmIChvYmpbJ21ldGFkYXRhJ10gJiYgb2JqWydtZXRhZGF0YSddWydleGNsdWRlJ10gJiYgQXJyYXkuaXNBcnJheShvYmpbJ21ldGFkYXRhJ11bJ2V4Y2x1ZGUnXSkpIHtcclxuICAgICAgICBvYmpbJ21ldGFkYXRhJ11bJ2V4Y2x1ZGUnXS5mb3JFYWNoKGtleSA9PiB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSBtYXBwZWRba2V5XTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gWy4uLk9iamVjdC5rZXlzKG1hcHBlZCksIC4uLmdldEdldHRlcnMobWFwcGVkKV07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRHZXR0ZXJzKG9iajogYW55KTogc3RyaW5nW10ge1xyXG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iai5jb25zdHJ1Y3Rvci5wcm90b3R5cGUpLmZpbHRlcihuYW1lID0+IHtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwgbmFtZSlbJ2dldCddID09PSAnZnVuY3Rpb24nO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRLZXlWYWx1ZXMobW9kZWw6IGFueSk6IGFueSB7XHJcbiAgICBjb25zdCBrZXlzID0gZ2V0QWxsUHJvcHMobW9kZWwpO1xyXG4gICAgcmV0dXJuIG1vZGVsWydtZXRhZGF0YSddICYmIG1vZGVsWydtZXRhZGF0YSddWydpbmNsdWRlJ10gP1xyXG4gICAgICAgIHRvQXJyYXkobW9kZWxbJ21ldGFkYXRhJ11bJ2luY2x1ZGUnXSkucmVkdWNlKChhY2MsIGtleSkgPT4gT2JqZWN0LmFzc2lnbih7fSwgYWNjLCB7IFtrZXldOiBtb2RlbFtrZXldIH0pLCB7fSlcclxuICAgICAgICA6IGtleXMucmVkdWNlKChhY2MsIGtleSkgPT4gT2JqZWN0LmFzc2lnbih7fSwgYWNjLCB7IFtrZXldOiBtb2RlbFtrZXldIH0pLCB7fSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRTZXR0ZXJzKG9iajogYW55KTogc3RyaW5nW10ge1xyXG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iai5wcm90b3R5cGUpLmZpbHRlcihuYW1lID0+IHtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLnByb3RvdHlwZSwgbmFtZSlbJ3NldCddID09PSAnZnVuY3Rpb24nO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8vIEdpc3QgYWRhcHRlZCBmcm9tOiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9jbXMvMzY5MTMzXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRTdHlsZShlbDogRWxlbWVudCwgc3R5bGVQcm9wOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgbGV0IHZhbHVlO1xyXG4gICAgY29uc3QgZGVmYXVsdFZpZXcgPSBlbC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O1xyXG4gICAgLy8gVzNDIHN0YW5kYXJkIHdheTpcclxuICAgIGlmIChkZWZhdWx0VmlldyAmJiBkZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKSB7XHJcbiAgICAgICAgLy8gc2FuaXRpemUgcHJvcGVydHkgbmFtZSB0byBjc3Mgbm90YXRpb24gKGh5cGVuIHNlcGFyYXRlZCB3b3JkcyBlZy4gZm9udC1TaXplKVxyXG4gICAgICAgIHN0eWxlUHJvcCA9IHN0eWxlUHJvcC5yZXBsYWNlKC8oW0EtWl0pL2csICctJDEnKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIHJldHVybiBkZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKGVsLCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKHN0eWxlUHJvcCk7XHJcbiAgICB9IGVsc2UgaWYgKGVsWydjdXJyZW50U3R5bGUnXSkgeyAvLyBJRVxyXG4gICAgICAgIC8vIHNhbml0aXplIHByb3BlcnR5IG5hbWUgdG8gY2FtZWxDYXNlXHJcbiAgICAgICAgc3R5bGVQcm9wID0gc3R5bGVQcm9wLnJlcGxhY2UoL1xcLShcXHcpL2csIGZ1bmN0aW9uIChzdHIsIGxldHRlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gbGV0dGVyLnRvVXBwZXJDYXNlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFsdWUgPSBlbFsnY3VycmVudFN0eWxlJ11bc3R5bGVQcm9wXTtcclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuICcnO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmFsdWUobW9kZWw6IGFueSk6IGFueSB7XHJcbiAgICBpZiAobW9kZWwgPT09IG51bGwgfHwgdHlwZW9mIChtb2RlbCkgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiAobW9kZWwpID09PSAnc3RyaW5nJyB8fCBtb2RlbCBpbnN0YW5jZW9mIERhdGUpIHtcclxuICAgICAgICByZXR1cm4gbW9kZWw7XHJcbiAgICB9XHJcbiAgICBjb25zdCBrZXlzID0gZ2V0QWxsUHJvcHMobW9kZWwpO1xyXG4gICAgY29uc3QgcHJvcHMgPSBrZXlzLmZpbHRlcihrZXkgPT4ga2V5ICE9PSAnbWV0YWRhdGEnICYmICFpZ25vcmVLZXkobW9kZWwsIGtleSkpXHJcbiAgICAgICAgLm1hcChrZXkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBvYmogPSB7fTtcclxuICAgICAgICAgICAgb2JqW2tleV0gPSBtb2RlbFtrZXldICYmIHR5cGVvZiBtb2RlbFtrZXldID09PSAnb2JqZWN0JyA/XHJcbiAgICAgICAgICAgICAgICAoQXJyYXkuaXNBcnJheShtb2RlbFtrZXldKSA/XHJcbiAgICAgICAgICAgICAgICAgICAgKG1vZGVsW2tleV0ubGVuZ3RoID4gMCA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsW2tleV0ubWFwKHggPT4gKHR5cGVvZiB4ID09PSAnb2JqZWN0JyA/IGdldFZhbHVlKHgpIDogeCkpIDogW10pXHJcbiAgICAgICAgICAgICAgICAgICAgOiBnZXRWYWx1ZShtb2RlbFtrZXldKSkgOiBtb2RlbFtrZXldO1xyXG4gICAgICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgICAgIH0pO1xyXG4gICAgcmV0dXJuIHByb3BzLnJlZHVjZSgoYWNjLCB2YWwpID0+IHtcclxuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgYWNjLCB2YWwpO1xyXG4gICAgfSwge30pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ3VpZCgpIHtcclxuICAgIGZ1bmN0aW9uIHM0KCkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKCgxICsgTWF0aC5yYW5kb20oKSkgKiAweDEwMDAwKVxyXG4gICAgICAgICAgICAudG9TdHJpbmcoMTYpXHJcbiAgICAgICAgICAgIC5zdWJzdHJpbmcoMSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gczQoKSArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICsgczQoKSArICctJyArXHJcbiAgICAgICAgczQoKSArICctJyArIHM0KCkgKyBzNCgpICsgczQoKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhhc0NoYW5nZWQoY2hhbmdlczogU2ltcGxlQ2hhbmdlcywga2V5OiBzdHJpbmcsIHByb3BzOiBzdHJpbmdbXSkge1xyXG4gICAgY29uc3QgY3VycmVudFZhbHVlID0gY2hhbmdlc1trZXldICYmIGNoYW5nZXNba2V5XS5jdXJyZW50VmFsdWUgPyBjaGFuZ2VzW2tleV0uY3VycmVudFZhbHVlIDoge307XHJcbiAgICBjb25zdCBwcmV2aW91c1ZhbHVlID0gY2hhbmdlc1trZXldICYmIGNoYW5nZXNba2V5XS5wcmV2aW91c1ZhbHVlID8gY2hhbmdlc1trZXldLnByZXZpb3VzVmFsdWUgOiB7fTtcclxuICAgIHJldHVybiBwcm9wcy5yZWR1Y2UoKGFjYywgcHJvcCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBhY2MgPyB0cnVlIDogY3VycmVudFZhbHVlW3Byb3BdICE9PSBwcmV2aW91c1ZhbHVlW3Byb3BdO1xyXG4gICAgfSwgZmFsc2UpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaWRDaGFuZ2VkKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMsIGtleTogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBuZXdJZCA9IGNoYW5nZXNba2V5XS5jdXJyZW50VmFsdWUgPyBjaGFuZ2VzW2tleV0uY3VycmVudFZhbHVlWydpZCddIHx8IDAgOiAwO1xyXG4gICAgY29uc3Qgb2xkSWQgPSBjaGFuZ2VzW2tleV0ucHJldmlvdXNWYWx1ZSA/IGNoYW5nZXNba2V5XS5wcmV2aW91c1ZhbHVlWydpZCddIHx8IDAgOiAwO1xyXG4gICAgcmV0dXJuIG5ld0lkICE9PSBvbGRJZDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlnbm9yZUtleShtb2RlbDogYW55LCBrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgaWYgKG1vZGVsWydtZXRhZGF0YSddICYmIG1vZGVsWydtZXRhZGF0YSddWydpZ25vcmUnXSkge1xyXG4gICAgICAgIHJldHVybiBpbkFycmF5KG1vZGVsWydtZXRhZGF0YSddWydpZ25vcmUnXSwga2V5KTtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGluQXJyYXkoYXJyOiBhbnlbXSwgdmFsOiBhbnkpIHtcclxuICAgIHJldHVybiBhcnIuZmlsdGVyKGl0ZW0gPT4gaXRlbSA9PT0gdmFsKS5sZW5ndGggPiAwO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW5BcnJheUJ5S2V5KGFycjogYW55W10sIHZhbDogYW55LCBrZXk6IHN0cmluZyB8IG51bWJlcikge1xyXG4gICAgcmV0dXJuIGFyci5maW5kSW5kZXgoaXRlbSA9PiBpdGVtW2tleV0gPT09IHZhbCkgIT09IC0xO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW50ZWdlckFycmF5KG46IG51bWJlcik6IG51bWJlcltdIHtcclxuICAgIHJldHVybiBBcnJheS5mcm9tKEFycmF5KG4pLmtleXMoKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0JldHdlZW5EYXRlcyhkYXRlRnJvbSwgZGF0ZVRvLCBkYXRlQ2hlY2spIHtcclxuICAgIGNvbnN0IGQxID0gZGF0ZUZyb20udG9Mb2NhbGVEYXRlU3RyaW5nKCkuc3BsaXQoJy8nKTtcclxuICAgIGNvbnN0IGQyID0gZGF0ZVRvLnRvTG9jYWxlRGF0ZVN0cmluZygpLnNwbGl0KCcvJyk7XHJcbiAgICBjb25zdCBjID0gZGF0ZUNoZWNrLnRvTG9jYWxlRGF0ZVN0cmluZygpLnNwbGl0KCcvJyk7XHJcblxyXG4gICAgY29uc3QgZnJvbSA9IG5ldyBEYXRlKGQxWzJdLCB0b0ludChkMVsxXSkgLSAxLCBkMVswXSk7ICAvLyAtMSBiZWNhdXNlIG1vbnRocyBhcmUgZnJvbSAwIHRvIDExXHJcbiAgICBjb25zdCB0byA9IG5ldyBEYXRlKGQyWzJdLCB0b0ludChkMlsxXSkgLSAxLCBkMlswXSk7XHJcbiAgICBjb25zdCBjaGVjayA9IG5ldyBEYXRlKGNbMl0sIHRvSW50KGNbMV0pIC0gMSwgY1swXSk7XHJcblxyXG4gICAgcmV0dXJuIChjaGVjayA+PSBmcm9tICYmIGNoZWNrIDw9IHRvKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIERldGVjdHMgY3ljbGVzIGluIGFuIG9iamVjdC5cclxuICogQHBhcmFtIG9ialxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzQ3ljbGljKG9iajogYW55KSB7XHJcbiAgICBjb25zdCBzZWVuT2JqZWN0czogYW55W10gPSBbXTtcclxuXHJcbiAgICBjb25zdCBkZXRlY3QgPSAoeDogYW55KSA9PiB7XHJcbiAgICAgICAgaWYgKHggJiYgdHlwZW9mIHggPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIGlmIChzZWVuT2JqZWN0cy5pbmRleE9mKHgpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2Vlbk9iamVjdHMucHVzaCh4KTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4geCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHguaGFzT3duUHJvcGVydHkoa2V5KSAmJiBkZXRlY3QoeFtrZXldKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIGRldGVjdChvYmopO1xyXG59XHJcblxyXG4vKipcclxuICogQHBhcmFtIGZyb21TdGF0ZSBUaGUgbGFzdCBzdGF0ZSBvYmplY3QgZnJvbSB0aGUgc3RvcmVcclxuICogQHBhcmFtIGRTdGF0ZSBBIHBhcnRpYWwgY2xhc3MgY29udGFpbmluZyBhbGwgcHJvcGVydGllcyB0aGF0IGhhdmUgY2hhbmdlZCB3cnQgZnJvbVN0YXRlXHJcbiAqIEByZXR1cm4gVGhlIGN1cnJlbnQvdXBkYXRlZCBzdGF0ZSBvZiB0aGUgYXBwbGljYXRpb24gKHRvU3RhdGUpXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gbmV4dFN0YXRlKGZyb21TdGF0ZTogYW55LCBkU3RhdGU6IGFueSk6IGFueSB7XHJcbiAgICBjb25zdCB0b1N0YXRlOiBhbnkgPSBPYmplY3QuYXNzaWduKHt9LCBmcm9tU3RhdGUsIGRTdGF0ZSk7XHJcbiAgICByZXR1cm4gdG9TdGF0ZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBvc2l0aXZlSW50ZWdlckFycmF5KG46IG51bWJlcik6IG51bWJlcltdIHtcclxuICAgIHJldHVybiBpbnRlZ2VyQXJyYXkobikubWFwKHggPT4geCArIDEpO1xyXG59XHJcblxyXG4vKipcclxuICogUmVtb3ZlIHN0b3JlIHByb3BzIHRoYXQgY29udGFpbiBjeWNsZXMuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ3ljbGVzKG9iajogYW55KTogYW55IHtcclxuICAgIGlmIChvYmogJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcclxuICAgICAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIGlzQ3ljbGljKG9ialtrZXldKSkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIG9ialtrZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9iajtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlbW92ZSBhbnkgcHJvcHMgdGhhdCBzaG91bGQgbm90IGFwcGVhciBpbiB0aGUgc3RvcmUuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlUHJvcHMob2JqOiBhbnkpOiBhbnkge1xyXG4gICAgcmV0dXJuIG9iajtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZShtb2RlbDogYW55KSB7XHJcbiAgICBpZiAoQXJyYXkuaXNBcnJheShtb2RlbCkpIHtcclxuICAgICAgICByZXR1cm4gbW9kZWwubWFwKHggPT4gc2VyaWFsaXplKHgpKTtcclxuICAgIH1cclxuICAgIGlmIChtb2RlbC5zZXJpYWxpemUgJiYgdHlwZW9mIG1vZGVsLnNlcmlhbGl6ZSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHJldHVybiBzZXJpYWxpemUobW9kZWwuc2VyaWFsaXplKCkpO1xyXG4gICAgfVxyXG4gICAgaWYgKG1vZGVsID09PSBudWxsIHx8IHR5cGVvZiAobW9kZWwpID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgKG1vZGVsKSA9PT0gJ3N0cmluZycgfHwgbW9kZWwgaW5zdGFuY2VvZiBEYXRlKSB7XHJcbiAgICAgICAgcmV0dXJuIG1vZGVsO1xyXG4gICAgfVxyXG4gICAgY29uc3Qga2V5cyA9IGdldEFsbFByb3BzKG1vZGVsKTtcclxuICAgIGlmIChrZXlzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiBtb2RlbDtcclxuICAgIH1cclxuICAgIHJldHVybiBrZXlzLnJlZHVjZSgoYWNjLCBrZXkpID0+IHtcclxuICAgICAgICBsZXQgdmFsID0gbnVsbDtcclxuICAgICAgICBpZiAobW9kZWxba2V5XSAhPT0gbnVsbCAmJiB0eXBlb2YgKG1vZGVsW2tleV0pID09PSAnb2JqZWN0JyAmJiAhKG1vZGVsW2tleV0gaW5zdGFuY2VvZiBEYXRlKSkge1xyXG4gICAgICAgICAgICBpZiAobW9kZWxba2V5XS5zZXJpYWxpemUgJiYgdHlwZW9mIG1vZGVsW2tleV0uc2VyaWFsaXplID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICB2YWwgPSBtb2RlbFtrZXldLnNlcmlhbGl6ZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFsID0gc2VyaWFsaXplKG1vZGVsW2tleV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFsID0gbW9kZWxba2V5XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGFjYywge1xyXG4gICAgICAgICAgICBba2V5XTogdmFsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9LCB7fSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdpZnkodG9rZW46IGFueSk6IHN0cmluZyB7XHJcbiAgICBpZiAodHlwZW9mIHRva2VuID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiB0b2tlbjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodG9rZW4gPT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiAnJyArIHRva2VuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0b2tlbi5vdmVycmlkZGVuTmFtZSkge1xyXG4gICAgICAgIHJldHVybiBgJHt0b2tlbi5vdmVycmlkZGVuTmFtZX1gO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0b2tlbi5uYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIGAke3Rva2VuLm5hbWV9YDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByZXMgPSB0b2tlbi50b1N0cmluZygpO1xyXG4gICAgY29uc3QgbmV3TGluZUluZGV4ID0gcmVzLmluZGV4T2YoJ1xcbicpO1xyXG4gICAgcmV0dXJuIG5ld0xpbmVJbmRleCA9PT0gLTEgPyByZXMgOiByZXMuc3Vic3RyaW5nKDAsIG5ld0xpbmVJbmRleCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzdHIyQ2hhckNvZGUoc3RyOiBzdHJpbmcpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KDApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc3RyMklkKHN0cjogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgIGNvbnN0IGNoYXJDb2RlcyA9IHN0ciA/IHN0ci5zcGxpdCgnJykucmVkdWNlKChhY2MsIHgpID0+IGAke2FjY30ke3N0cjJDaGFyQ29kZSh4KX1gLCAnJykgOiAnJztcclxuICAgIHJldHVybiB0b0ludChjaGFyQ29kZXMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc3RyMmludChzdHI6IHN0cmluZyk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gcGFyc2VJbnQoc3RyLCAxMCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzdHJBcnJheTJJZChzdHJBcnJheTogc3RyaW5nW10pIHtcclxuICAgIGNvbnN0IHN0ciA9IHN0ckFycmF5LnJlZHVjZSgoYWNjLCB4KSA9PiBgJHthY2N9JHt4fWAsICcnKTtcclxuICAgIHJldHVybiBzdHIySWQoc3RyKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRocm93RXhjZXB0aW9uKGVycm9yTmFtZTogc3RyaW5nLCBlcnJvck1lc3NhZ2U6IHN0cmluZykge1xyXG4gICAgdGhyb3cge1xyXG4gICAgICAgIG5hbWU6IGVycm9yTmFtZSxcclxuICAgICAgICBsZXZlbDogJ1Nob3cgU3RvcHBlcicsXHJcbiAgICAgICAgbWVzc2FnZTogZXJyb3JNZXNzYWdlLFxyXG4gICAgICAgIGh0bWxNZXNzYWdlOiAnRXJyb3IgZGV0ZWN0ZWQuIFBsZWFzZSBjb250YWN0IHRoZSA8YSBocmVmPVxcJ21haWx0bzphZ2VuZGFtYW5hZ2VyQGNhaXUuY29tXFwnPnN5c3RlbSBhZG1pbmlzdHJhdG9yPC9hPi4nLFxyXG4gICAgICAgIHRvU3RyaW5nOiBmdW5jdGlvbiAoKSB7IHJldHVybiBlcnJvck5hbWUgKyAnOiAnICsgZXJyb3JNZXNzYWdlOyB9XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdGhyb3dOb3RJbXBsZW1lbnRlZEV4Y2VwdGlvbigpIHtcclxuICAgIHRocm93RXhjZXB0aW9uKCdOb3QgSW1wbGVtZW50ZWQnLCAnTm90IEltcGxlbWVudGVkJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB0b0FycmF5KHZhbDogYW55KTogYW55W10ge1xyXG4gICAgcmV0dXJuIHZhbCA/IChBcnJheS5pc0FycmF5KHZhbCkgPyB2YWwgOiBbdmFsXSkgOiBbXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRvSW50KHZhbDogc3RyaW5nIHwgbnVtYmVyKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB2YWwgJiYgdmFsLnRvU3RyaW5nID8gc3RyMmludCh2YWwudG9TdHJpbmcoKSkgOiAwO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdG9QYXlsb2FkKGFjdGlvbjogQWN0aW9uKTogYW55IHtcclxuICAgIHJldHVybiBhY3Rpb24gPyBhY3Rpb24ucGF5bG9hZCA6IG51bGw7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB0b1B4KG46IG51bWJlcik6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gYCR7bn1weGA7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB0cnV0aHkodmFsdWU6IGFueSk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuICFmYWxzeSh2YWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB0cnlDYXN0KG9iajogYW55LCB0eXBlOiBhbnkpOiBhbnkge1xyXG4gICAgY29uc3QgcmV0T2JqID0gbmV3IHR5cGUoKTtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xyXG4gICAgICAgIGlmICh0eXBlb2YgKHJldE9ialtrZXldKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgcmV0T2JqW2tleV0gPSBvYmpba2V5XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmV0T2JqO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdmFsdWVDaGFuZ2VkKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMsIGtleSA9ICcnKSB7XHJcbiAgICByZXR1cm4ga2V5ID8gY2hhbmdlc1trZXldLmN1cnJlbnRWYWx1ZSAhPT0gY2hhbmdlc1trZXldLnByZXZpb3VzVmFsdWVcclxuICAgICAgICA6IE9iamVjdC5rZXlzKGNoYW5nZXMpLnJlZHVjZSgoYWNjLCBjdXJyZW50S2V5KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBhY2MgPyB0cnVlIDogY2hhbmdlc1tjdXJyZW50S2V5XS5jdXJyZW50VmFsdWUgIT09IGNoYW5nZXNbY3VycmVudEtleV0ucHJldmlvdXNWYWx1ZTtcclxuICAgICAgICB9LCBmYWxzZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWx1ZUVxdWFscyh2YWx1ZSwgZm9ybVZhbHVlKSB7XHJcbiAgICByZXR1cm4gZXF1YWxzKGdldFZhbHVlKHZhbHVlKSwgZm9ybVZhbHVlKTtcclxufVxyXG4iXX0=
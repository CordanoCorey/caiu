/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { Component, ContentChildren, ElementRef, Input, QueryList, Renderer2, ViewChild, ViewEncapsulation, Output, EventEmitter } from '@angular/core';
import { Grid } from './grid.model';
import { GridColumnComponent } from './grid-column/grid-column.component';
import { str2int } from '../../shared/utils';
export class GridComponent {
    /**
     * @param {?} _elementRef
     * @param {?} _renderer
     */
    constructor(_elementRef, _renderer) {
        this._elementRef = _elementRef;
        this._renderer = _renderer;
        this.advancedFilter = false;
        this.autoCalculateHeight = true;
        this.buttonColor = '#fff';
        this.buttonCount = 5;
        this.buttonClass = 'toolbar-button';
        this.pagerInfo = true;
        this.pagerType = 'numeric';
        this.pageSizes = true;
        this.previousNext = true;
        this.export = false;
        this.fileName = 'export';
        this.filter = { logic: 'and', filters: [] };
        this.filterable = true;
        this.pageSize = 20;
        this.pager = {
            pageSizes: [10, 20, 50, 100]
        };
        this.pdfHeader = '';
        this.skip = 0;
        this.sortable = { mode: 'multiple' };
        this.sort = [];
        this.total = 0;
        this.changes = new EventEmitter();
        this.columns = [];
        this.filtering = true;
    }
    /**
     * The color of the toolbar. Can be primary, accent, or warn.
     * @return {?}
     */
    get color() {
        return this._color;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set color(value) {
        this._updateColor(value);
    }
    /**
     * @param {?} newColor
     * @return {?}
     */
    _updateColor(newColor) {
        this._setElementColor(this._color, false);
        this._setElementColor(newColor, true);
        this._color = newColor;
    }
    /**
     * @param {?} color
     * @param {?} isAdd
     * @return {?}
     */
    _setElementColor(color, isAdd) {
        if (color != null && color !== '') {
            const /** @type {?} */ element = this._elementRef.nativeElement;
            if (isAdd) {
                this._renderer.addClass(element, `mat-${color}`);
            }
            else {
                this._renderer.removeClass(element, `mat-${color}`);
            }
        }
    }
    /**
     * @return {?}
     */
    get activeRows() {
        return this.pageRows(this.filterRows(this.sortRows(this.rows)));
    }
    /**
     * @return {?}
     */
    get computedRowHeight() {
        return this.rowHeightMax || 32;
    }
    /**
     * @return {?}
     */
    get dynamicHeight() {
        return this.autoCalculateHeight ? (this.activeRows.length === 0 || !this.numericHeight) ?
            null : Math.max(96 + this.headerHeight + this.pagerHeight + this.toolbarHeight, Math.min(this.computedRowHeight * this.activeRows.length + this.headerHeight + this.pagerHeight + this.toolbarHeight, this.numericHeight))
            : this.numericHeight;
    }
    /**
     * @return {?}
     */
    get excelFileName() {
        return `${this.fileName}.xlsx`;
    }
    /**
     * @return {?}
     */
    get filters() {
        return this.filter.filters;
    }
    /**
     * @return {?}
     */
    get gridData() {
        return {
            data: this.activeRows,
            total: this.total ? this.total : this.rows.length
        };
    }
    /**
     * @return {?}
     */
    get headerHeight() {
        return this.filterable ? 66 : 27;
    }
    /**
     * @return {?}
     */
    get numericHeight() {
        return typeof (this.height) === 'string' ? str2int(this.height) : this.height;
    }
    /**
     * @return {?}
     */
    get pagerHeight() {
        return this.pageable ? 46 : 0;
    }
    /**
     * @return {?}
     */
    get pagerSettings() {
        return this.pager;
    }
    /**
     * @return {?}
     */
    get pdfFileName() {
        return `${this.fileName}.pdf`;
    }
    /**
     * @return {?}
     */
    get rows() {
        return this.model.data ? this.model.data.toArray() : [];
    }
    /**
     * @return {?}
     */
    get showFilters() {
        return this.filterable && this.filtering;
    }
    /**
     * @return {?}
     */
    get take() {
        return this.pageSize || 20;
    }
    /**
     * @return {?}
     */
    get toolbarHeight() {
        return this.export ? 53 : 0;
    }
    /**
     * @return {?}
     */
    ngOnChanges() {
        this.model.update(this);
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.pageable = {
            buttonCount: this.buttonCount,
            info: this.pagerInfo,
            type: this.pagerType,
            pageSizes: this.pageSizes,
            previousNext: this.previousNext
        };
    }
    /**
     * @return {?}
     */
    ngAfterContentInit() {
        this.contentChildren.forEach(x => {
            this.columns.push(x);
        });
    }
    /**
     * @param {?} state
     * @return {?}
     */
    dataStateChange(state) {
        this.filterChange(state['filter']);
        this.pageChange({ skip: state['skip'], take: state['take'] });
        this.sortChange(state['sort']);
        this.changes.emit(state);
    }
    /**
     * @param {?} component
     * @return {?}
     */
    save(component) {
        const /** @type {?} */ options = component.workbookOptions();
        const /** @type {?} */ rows = options.sheets[0].rows;
        let /** @type {?} */ altIdx = 0;
        rows.forEach((row) => {
            if (row.type === 'data') {
                if (altIdx % 2 !== 0) {
                    row.cells.forEach((cell) => {
                        cell.background = '#aabbcc';
                    });
                }
                altIdx++;
            }
        });
        component.save(options);
    }
    /**
     * @param {?} e
     * @return {?}
     */
    filterChange(e) {
        this.filter = e;
    }
    /**
     * @param {?} e
     * @return {?}
     */
    pageChange(e) {
        this.skip = e.skip;
        this.pageSize = str2int(e.take.toString());
    }
    /**
     * @param {?} sort
     * @return {?}
     */
    sortChange(sort) {
        this.sort = sort;
    }
    /**
     * @param {?} rows
     * @return {?}
     */
    filterRows(rows) {
        return Grid.FilterRows(rows, this.filters);
    }
    /**
     * @param {?} rows
     * @return {?}
     */
    pageRows(rows) {
        return this.pager ? Grid.PageRows(rows, this.skip, this.take) : rows;
    }
    /**
     * @param {?} rows
     * @return {?}
     */
    sortRows(rows) {
        return Grid.SortRows(rows, this.sort);
    }
}
GridComponent.decorators = [
    { type: Component, args: [{
                selector: 'iu-grid',
                template: `<mat-card class="grid mat-primary" [class.mat-card]="!export">
  <kendo-grid [data]="gridData" [filter]="filter" [filterable]="showFilters" [groupable]="groupable" [height]="dynamicHeight"
    [pageSize]="pageSize" [pageable]="pagerSettings" [rowHeight]="rowHeight" [scrollable]="scrollable" [selectable]="selectable"
    [skip]="skip" [sortable]="sortable" [group]="group" [sort]="sort" (dataStateChange)="dataStateChange($event)" #kendoGridInstance="kendoGrid">

    <!-- Toolbar Template -->
    <ng-template kendoGridToolbarTemplate *ngIf="export">
      <button mat-raised-button class="toolbar-button pdf-button" kendoGridPDFCommand>
        <mat-icon>picture_as_pdf</mat-icon>Export to PDF</button>
      <button mat-raised-button class="toolbar-button excel-button" (click)="save(excelexport)">
        <mat-icon>import_export</mat-icon>Export To Excel</button>
    </ng-template>

    <!-- Grid Columns -->
    <kendo-grid-column *ngFor="let col of columns" [class]="col.class" [editable]="col.editable" [editor]="col.editor" [field]="col.colField"
      [filter]="col.filter" [filterable]="col.filterable" [footerClass]="col.footerClass" [footerStyle]="col.footerStyle" [format]="col.format"
      [headerClass]="col.headerClass" [headerStyle]="col.headerStyle" [hidden]="col.hidden" [locked]="col.locked" [media]="col.media"
      [sortable]="col.sortable" [style]="col.style" [title]="col.colTitle" [width]="col.width">
      <ng-template *ngIf="col.templateRef" kendoGridCellTemplate let-dataItem>
        <iu-grid-cell [templateRef]="col.templateRef" [dataItem]="dataItem"></iu-grid-cell>
      </ng-template>
    </kendo-grid-column>

    <!-- Export to PDF -->
    <kendo-grid-pdf *ngIf="export" [fileName]="pdfFileName" [allPages]="true" paperSize="A4" [repeatHeaders]="true" [landscape]="true">
      <kendo-grid-pdf-margin top="2cm" left="1cm" right="1cm" bottom="2cm"></kendo-grid-pdf-margin>
      <ng-template kendoGridPDFTemplate let-pageNum="pageNum" let-totalPages="totalPages">
        <div class="page-template">
          <div class="header">
            <div style="float: right">Page {{ pageNum }} of {{ totalPages }}</div>
            {{ pdfHeader }}
          </div>
          <div class="footer">
            Page {{ pageNum }} of {{ totalPages }}
          </div>
        </div>
      </ng-template>
    </kendo-grid-pdf>

    <!-- Export to Excel -->
    <kendo-excelexport [data]="activeRows" [fileName]="excelFileName" [filterable]="true" #excelexport>
      <kendo-excelexport-column *ngFor="let col of columns" [field]="col.colField" [title]="col.colTitle">
      </kendo-excelexport-column>
    </kendo-excelexport>

  </kendo-grid>
</mat-card>
`,
                styles: [`.mat-card.grid{padding:0}.grid .k-grid-header{padding-right:13px}.grid th.k-grid-header:first-child{padding-left:6px}.grid .mat-raised-button{color:#fff}.k-grid-header .k-header>.k-link{font-size:16px;padding:2px 12px}.k-grid td{border:none;padding:6px 12px}.k-widget{border:none}.k-filter-row>th{padding:4px;max-width:190px;border-width:0 0 1px 1px;border-style:solid}.k-input.k-textbox,.k-textbox{height:calc(1em + (4px * 2) + (1px * 2))!important;min-width:80px}.k-filtercell .k-filtercell-wrapper,.k-filtercell>span{padding-right:calc(1.5em + 8px + 2px + 4px)}.k-filtercell .k-dropdown-operator{display:none}.k-picker-wrap.k-state-default{border-bottom-width:1px}.page-template{font-family:"DejaVu Sans",Arial,sans-serif;position:absolute;width:100%;height:100%;top:0;left:0}.page-template .header{position:absolute;top:30px;left:30px;right:30px;border-bottom:1px solid #888;color:#888}.page-template .footer{position:absolute;bottom:30px;left:30px;right:30px;border-top:1px solid #888;text-align:center;color:#888}.toolbar-button{color:#fff;background-image:none;vertical-align:middle}`],
                encapsulation: ViewEncapsulation.None
            },] },
];
/** @nocollapse */
GridComponent.ctorParameters = () => [
    { type: ElementRef },
    { type: Renderer2 }
];
GridComponent.propDecorators = {
    model: [{ type: Input }],
    advancedFilter: [{ type: Input }],
    autoCalculateHeight: [{ type: Input }],
    buttonColor: [{ type: Input }],
    buttonCount: [{ type: Input }],
    buttonClass: [{ type: Input }],
    pagerInfo: [{ type: Input }],
    pagerType: [{ type: Input }],
    pageSizes: [{ type: Input }],
    previousNext: [{ type: Input }],
    detailRowHeight: [{ type: Input }],
    export: [{ type: Input }],
    fileName: [{ type: Input }],
    filter: [{ type: Input }],
    filterable: [{ type: Input }],
    groupable: [{ type: Input }],
    height: [{ type: Input }],
    pageSize: [{ type: Input }],
    pageable: [{ type: Input }],
    pager: [{ type: Input }],
    pdfHeader: [{ type: Input }],
    rowHeight: [{ type: Input }],
    rowHeightMax: [{ type: Input }],
    scrollable: [{ type: Input }],
    selectable: [{ type: Input }],
    skip: [{ type: Input }],
    sortable: [{ type: Input }],
    group: [{ type: Input }],
    rowClass: [{ type: Input }],
    sort: [{ type: Input }],
    total: [{ type: Input }],
    changes: [{ type: Output }],
    grid: [{ type: ViewChild, args: ['kendoGridInstance',] }],
    contentChildren: [{ type: ContentChildren, args: [GridColumnComponent,] }],
    color: [{ type: Input }]
};
function GridComponent_tsickle_Closure_declarations() {
    /** @type {?} */
    GridComponent.prototype.model;
    /** @type {?} */
    GridComponent.prototype.advancedFilter;
    /** @type {?} */
    GridComponent.prototype.autoCalculateHeight;
    /** @type {?} */
    GridComponent.prototype.buttonColor;
    /** @type {?} */
    GridComponent.prototype.buttonCount;
    /** @type {?} */
    GridComponent.prototype.buttonClass;
    /** @type {?} */
    GridComponent.prototype.pagerInfo;
    /** @type {?} */
    GridComponent.prototype.pagerType;
    /** @type {?} */
    GridComponent.prototype.pageSizes;
    /** @type {?} */
    GridComponent.prototype.previousNext;
    /** @type {?} */
    GridComponent.prototype.detailRowHeight;
    /** @type {?} */
    GridComponent.prototype.export;
    /** @type {?} */
    GridComponent.prototype.fileName;
    /** @type {?} */
    GridComponent.prototype.filter;
    /** @type {?} */
    GridComponent.prototype.filterable;
    /** @type {?} */
    GridComponent.prototype.groupable;
    /** @type {?} */
    GridComponent.prototype.height;
    /** @type {?} */
    GridComponent.prototype.pageSize;
    /** @type {?} */
    GridComponent.prototype.pageable;
    /** @type {?} */
    GridComponent.prototype.pager;
    /** @type {?} */
    GridComponent.prototype.pdfHeader;
    /** @type {?} */
    GridComponent.prototype.rowHeight;
    /** @type {?} */
    GridComponent.prototype.rowHeightMax;
    /** @type {?} */
    GridComponent.prototype.scrollable;
    /** @type {?} */
    GridComponent.prototype.selectable;
    /** @type {?} */
    GridComponent.prototype.skip;
    /** @type {?} */
    GridComponent.prototype.sortable;
    /** @type {?} */
    GridComponent.prototype.group;
    /** @type {?} */
    GridComponent.prototype.rowClass;
    /** @type {?} */
    GridComponent.prototype.sort;
    /** @type {?} */
    GridComponent.prototype.total;
    /** @type {?} */
    GridComponent.prototype.changes;
    /** @type {?} */
    GridComponent.prototype.grid;
    /** @type {?} */
    GridComponent.prototype.contentChildren;
    /** @type {?} */
    GridComponent.prototype.columns;
    /** @type {?} */
    GridComponent.prototype._color;
    /** @type {?} */
    GridComponent.prototype.filtering;
    /** @type {?} */
    GridComponent.prototype._elementRef;
    /** @type {?} */
    GridComponent.prototype._renderer;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3JpZC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AY2FpdS9saWJyYXJ5LyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvZ3JpZC9ncmlkLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUVMLFNBQVMsRUFDVCxlQUFlLEVBQ2YsVUFBVSxFQUNWLEtBQUssRUFHTCxTQUFTLEVBQ1QsU0FBUyxFQUNULFNBQVMsRUFDVCxpQkFBaUIsRUFDakIsTUFBTSxFQUNOLFlBQVksRUFDYixNQUFNLGVBQWUsQ0FBQztBQUV2QixPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sY0FBYyxDQUFDO0FBQ3BDLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLHFDQUFxQyxDQUFDO0FBVTFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQXVEN0MsTUFBTTs7Ozs7SUEwQ0osWUFBb0IsV0FBdUIsRUFBVSxTQUFvQjtRQUFyRCxnQkFBVyxHQUFYLFdBQVcsQ0FBWTtRQUFVLGNBQVMsR0FBVCxTQUFTLENBQVc7OEJBdkMvQyxLQUFLO21DQUNBLElBQUk7MkJBQ1osTUFBTTsyQkFDTixDQUFDOzJCQUNELGdCQUFnQjt5QkFDbEIsSUFBSTt5QkFDaUIsU0FBUzt5QkFDOUIsSUFBSTs0QkFDRCxJQUFJO3NCQUVWLEtBQUs7d0JBQ0gsUUFBUTtzQkFDaUIsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7MEJBQ3BELElBQUk7d0JBR04sRUFBRTtxQkFFQTtZQUNwQixTQUFTLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUM7U0FDN0I7eUJBQ29CLEVBQUU7b0JBS1AsQ0FBQzt3QkFDaUIsRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFO29CQUdwQixFQUFFO3FCQUNuQixDQUFDO3VCQUNFLElBQUksWUFBWSxFQUF3Qjt1QkFHM0IsRUFB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LFNBQVMsU0FBQztnQkFDVCxRQUFRLEVBQUUsU0FBUztnQkFDbkIsUUFBUSxFQUFFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQStDWDtnQkFDQyxNQUFNLEVBQUUsQ0FBQyxva0NBQW9rQyxDQUFDO2dCQUM5a0MsYUFBYSxFQUFFLGlCQUFpQixDQUFDLElBQUk7YUFDdEM7Ozs7WUE3RUMsVUFBVTtZQUtWLFNBQVM7OztvQkEyRVIsS0FBSzs2QkFDTCxLQUFLO2tDQUNMLEtBQUs7MEJBQ0wsS0FBSzswQkFDTCxLQUFLOzBCQUNMLEtBQUs7d0JBQ0wsS0FBSzt3QkFDTCxLQUFLO3dCQUNMLEtBQUs7MkJBQ0wsS0FBSzs4QkFDTCxLQUFLO3FCQUNMLEtBQUs7dUJBQ0wsS0FBSztxQkFDTCxLQUFLO3lCQUNMLEtBQUs7d0JBQ0wsS0FBSztxQkFDTCxLQUFLO3VCQUNMLEtBQUs7dUJBQ0wsS0FBSztvQkFDTCxLQUFLO3dCQUdMLEtBQUs7d0JBQ0wsS0FBSzsyQkFDTCxLQUFLO3lCQUNMLEtBQUs7eUJBQ0wsS0FBSzttQkFDTCxLQUFLO3VCQUNMLEtBQUs7b0JBQ0wsS0FBSzt1QkFDTCxLQUFLO21CQUNMLEtBQUs7b0JBQ0wsS0FBSztzQkFDTCxNQUFNO21CQUNOLFNBQVMsU0FBQyxtQkFBbUI7OEJBQzdCLGVBQWUsU0FBQyxtQkFBbUI7b0JBU25DLEtBQUsiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gIEFmdGVyQ29udGVudEluaXQsXHJcbiAgQ29tcG9uZW50LFxyXG4gIENvbnRlbnRDaGlsZHJlbixcclxuICBFbGVtZW50UmVmLFxyXG4gIElucHV0LFxyXG4gIE9uQ2hhbmdlcyxcclxuICBPbkluaXQsXHJcbiAgUXVlcnlMaXN0LFxyXG4gIFJlbmRlcmVyMixcclxuICBWaWV3Q2hpbGQsXHJcbiAgVmlld0VuY2Fwc3VsYXRpb24sXHJcbiAgT3V0cHV0LFxyXG4gIEV2ZW50RW1pdHRlclxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5cclxuaW1wb3J0IHsgR3JpZCB9IGZyb20gJy4vZ3JpZC5tb2RlbCc7XHJcbmltcG9ydCB7IEdyaWRDb2x1bW5Db21wb25lbnQgfSBmcm9tICcuL2dyaWQtY29sdW1uL2dyaWQtY29sdW1uLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7XHJcbiAgQ29tcG9zaXRlRmlsdGVyRGVzY3JpcHRvcixcclxuICBHcm91cGFibGVTZXR0aW5ncyxcclxuICBTb3J0RGVzY3JpcHRvcixcclxuICBTb3J0U2V0dGluZ3MsXHJcbiAgR3JpZERhdGFSZXN1bHQsXHJcbiAgRGF0YVN0YXRlQ2hhbmdlRXZlbnQsXHJcbiAgUGFnZUNoYW5nZUV2ZW50XHJcbn0gZnJvbSAnLi4vLi4vc2hhcmVkL2tlbmRvJztcclxuaW1wb3J0IHsgc3RyMmludCB9IGZyb20gJy4uLy4uL3NoYXJlZC91dGlscyc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2l1LWdyaWQnLFxyXG4gIHRlbXBsYXRlOiBgPG1hdC1jYXJkIGNsYXNzPVwiZ3JpZCBtYXQtcHJpbWFyeVwiIFtjbGFzcy5tYXQtY2FyZF09XCIhZXhwb3J0XCI+XHJcbiAgPGtlbmRvLWdyaWQgW2RhdGFdPVwiZ3JpZERhdGFcIiBbZmlsdGVyXT1cImZpbHRlclwiIFtmaWx0ZXJhYmxlXT1cInNob3dGaWx0ZXJzXCIgW2dyb3VwYWJsZV09XCJncm91cGFibGVcIiBbaGVpZ2h0XT1cImR5bmFtaWNIZWlnaHRcIlxyXG4gICAgW3BhZ2VTaXplXT1cInBhZ2VTaXplXCIgW3BhZ2VhYmxlXT1cInBhZ2VyU2V0dGluZ3NcIiBbcm93SGVpZ2h0XT1cInJvd0hlaWdodFwiIFtzY3JvbGxhYmxlXT1cInNjcm9sbGFibGVcIiBbc2VsZWN0YWJsZV09XCJzZWxlY3RhYmxlXCJcclxuICAgIFtza2lwXT1cInNraXBcIiBbc29ydGFibGVdPVwic29ydGFibGVcIiBbZ3JvdXBdPVwiZ3JvdXBcIiBbc29ydF09XCJzb3J0XCIgKGRhdGFTdGF0ZUNoYW5nZSk9XCJkYXRhU3RhdGVDaGFuZ2UoJGV2ZW50KVwiICNrZW5kb0dyaWRJbnN0YW5jZT1cImtlbmRvR3JpZFwiPlxyXG5cclxuICAgIDwhLS0gVG9vbGJhciBUZW1wbGF0ZSAtLT5cclxuICAgIDxuZy10ZW1wbGF0ZSBrZW5kb0dyaWRUb29sYmFyVGVtcGxhdGUgKm5nSWY9XCJleHBvcnRcIj5cclxuICAgICAgPGJ1dHRvbiBtYXQtcmFpc2VkLWJ1dHRvbiBjbGFzcz1cInRvb2xiYXItYnV0dG9uIHBkZi1idXR0b25cIiBrZW5kb0dyaWRQREZDb21tYW5kPlxyXG4gICAgICAgIDxtYXQtaWNvbj5waWN0dXJlX2FzX3BkZjwvbWF0LWljb24+RXhwb3J0IHRvIFBERjwvYnV0dG9uPlxyXG4gICAgICA8YnV0dG9uIG1hdC1yYWlzZWQtYnV0dG9uIGNsYXNzPVwidG9vbGJhci1idXR0b24gZXhjZWwtYnV0dG9uXCIgKGNsaWNrKT1cInNhdmUoZXhjZWxleHBvcnQpXCI+XHJcbiAgICAgICAgPG1hdC1pY29uPmltcG9ydF9leHBvcnQ8L21hdC1pY29uPkV4cG9ydCBUbyBFeGNlbDwvYnV0dG9uPlxyXG4gICAgPC9uZy10ZW1wbGF0ZT5cclxuXHJcbiAgICA8IS0tIEdyaWQgQ29sdW1ucyAtLT5cclxuICAgIDxrZW5kby1ncmlkLWNvbHVtbiAqbmdGb3I9XCJsZXQgY29sIG9mIGNvbHVtbnNcIiBbY2xhc3NdPVwiY29sLmNsYXNzXCIgW2VkaXRhYmxlXT1cImNvbC5lZGl0YWJsZVwiIFtlZGl0b3JdPVwiY29sLmVkaXRvclwiIFtmaWVsZF09XCJjb2wuY29sRmllbGRcIlxyXG4gICAgICBbZmlsdGVyXT1cImNvbC5maWx0ZXJcIiBbZmlsdGVyYWJsZV09XCJjb2wuZmlsdGVyYWJsZVwiIFtmb290ZXJDbGFzc109XCJjb2wuZm9vdGVyQ2xhc3NcIiBbZm9vdGVyU3R5bGVdPVwiY29sLmZvb3RlclN0eWxlXCIgW2Zvcm1hdF09XCJjb2wuZm9ybWF0XCJcclxuICAgICAgW2hlYWRlckNsYXNzXT1cImNvbC5oZWFkZXJDbGFzc1wiIFtoZWFkZXJTdHlsZV09XCJjb2wuaGVhZGVyU3R5bGVcIiBbaGlkZGVuXT1cImNvbC5oaWRkZW5cIiBbbG9ja2VkXT1cImNvbC5sb2NrZWRcIiBbbWVkaWFdPVwiY29sLm1lZGlhXCJcclxuICAgICAgW3NvcnRhYmxlXT1cImNvbC5zb3J0YWJsZVwiIFtzdHlsZV09XCJjb2wuc3R5bGVcIiBbdGl0bGVdPVwiY29sLmNvbFRpdGxlXCIgW3dpZHRoXT1cImNvbC53aWR0aFwiPlxyXG4gICAgICA8bmctdGVtcGxhdGUgKm5nSWY9XCJjb2wudGVtcGxhdGVSZWZcIiBrZW5kb0dyaWRDZWxsVGVtcGxhdGUgbGV0LWRhdGFJdGVtPlxyXG4gICAgICAgIDxpdS1ncmlkLWNlbGwgW3RlbXBsYXRlUmVmXT1cImNvbC50ZW1wbGF0ZVJlZlwiIFtkYXRhSXRlbV09XCJkYXRhSXRlbVwiPjwvaXUtZ3JpZC1jZWxsPlxyXG4gICAgICA8L25nLXRlbXBsYXRlPlxyXG4gICAgPC9rZW5kby1ncmlkLWNvbHVtbj5cclxuXHJcbiAgICA8IS0tIEV4cG9ydCB0byBQREYgLS0+XHJcbiAgICA8a2VuZG8tZ3JpZC1wZGYgKm5nSWY9XCJleHBvcnRcIiBbZmlsZU5hbWVdPVwicGRmRmlsZU5hbWVcIiBbYWxsUGFnZXNdPVwidHJ1ZVwiIHBhcGVyU2l6ZT1cIkE0XCIgW3JlcGVhdEhlYWRlcnNdPVwidHJ1ZVwiIFtsYW5kc2NhcGVdPVwidHJ1ZVwiPlxyXG4gICAgICA8a2VuZG8tZ3JpZC1wZGYtbWFyZ2luIHRvcD1cIjJjbVwiIGxlZnQ9XCIxY21cIiByaWdodD1cIjFjbVwiIGJvdHRvbT1cIjJjbVwiPjwva2VuZG8tZ3JpZC1wZGYtbWFyZ2luPlxyXG4gICAgICA8bmctdGVtcGxhdGUga2VuZG9HcmlkUERGVGVtcGxhdGUgbGV0LXBhZ2VOdW09XCJwYWdlTnVtXCIgbGV0LXRvdGFsUGFnZXM9XCJ0b3RhbFBhZ2VzXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInBhZ2UtdGVtcGxhdGVcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJcIj5cclxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cImZsb2F0OiByaWdodFwiPlBhZ2Uge3sgcGFnZU51bSB9fSBvZiB7eyB0b3RhbFBhZ2VzIH19PC9kaXY+XHJcbiAgICAgICAgICAgIHt7IHBkZkhlYWRlciB9fVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9vdGVyXCI+XHJcbiAgICAgICAgICAgIFBhZ2Uge3sgcGFnZU51bSB9fSBvZiB7eyB0b3RhbFBhZ2VzIH19XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9uZy10ZW1wbGF0ZT5cclxuICAgIDwva2VuZG8tZ3JpZC1wZGY+XHJcblxyXG4gICAgPCEtLSBFeHBvcnQgdG8gRXhjZWwgLS0+XHJcbiAgICA8a2VuZG8tZXhjZWxleHBvcnQgW2RhdGFdPVwiYWN0aXZlUm93c1wiIFtmaWxlTmFtZV09XCJleGNlbEZpbGVOYW1lXCIgW2ZpbHRlcmFibGVdPVwidHJ1ZVwiICNleGNlbGV4cG9ydD5cclxuICAgICAgPGtlbmRvLWV4Y2VsZXhwb3J0LWNvbHVtbiAqbmdGb3I9XCJsZXQgY29sIG9mIGNvbHVtbnNcIiBbZmllbGRdPVwiY29sLmNvbEZpZWxkXCIgW3RpdGxlXT1cImNvbC5jb2xUaXRsZVwiPlxyXG4gICAgICA8L2tlbmRvLWV4Y2VsZXhwb3J0LWNvbHVtbj5cclxuICAgIDwva2VuZG8tZXhjZWxleHBvcnQ+XHJcblxyXG4gIDwva2VuZG8tZ3JpZD5cclxuPC9tYXQtY2FyZD5cclxuYCxcclxuICBzdHlsZXM6IFtgLm1hdC1jYXJkLmdyaWR7cGFkZGluZzowfS5ncmlkIC5rLWdyaWQtaGVhZGVye3BhZGRpbmctcmlnaHQ6MTNweH0uZ3JpZCB0aC5rLWdyaWQtaGVhZGVyOmZpcnN0LWNoaWxke3BhZGRpbmctbGVmdDo2cHh9LmdyaWQgLm1hdC1yYWlzZWQtYnV0dG9ue2NvbG9yOiNmZmZ9LmstZ3JpZC1oZWFkZXIgLmstaGVhZGVyPi5rLWxpbmt7Zm9udC1zaXplOjE2cHg7cGFkZGluZzoycHggMTJweH0uay1ncmlkIHRke2JvcmRlcjpub25lO3BhZGRpbmc6NnB4IDEycHh9Lmstd2lkZ2V0e2JvcmRlcjpub25lfS5rLWZpbHRlci1yb3c+dGh7cGFkZGluZzo0cHg7bWF4LXdpZHRoOjE5MHB4O2JvcmRlci13aWR0aDowIDAgMXB4IDFweDtib3JkZXItc3R5bGU6c29saWR9LmstaW5wdXQuay10ZXh0Ym94LC5rLXRleHRib3h7aGVpZ2h0OmNhbGMoMWVtICsgKDRweCAqIDIpICsgKDFweCAqIDIpKSFpbXBvcnRhbnQ7bWluLXdpZHRoOjgwcHh9LmstZmlsdGVyY2VsbCAuay1maWx0ZXJjZWxsLXdyYXBwZXIsLmstZmlsdGVyY2VsbD5zcGFue3BhZGRpbmctcmlnaHQ6Y2FsYygxLjVlbSArIDhweCArIDJweCArIDRweCl9LmstZmlsdGVyY2VsbCAuay1kcm9wZG93bi1vcGVyYXRvcntkaXNwbGF5Om5vbmV9LmstcGlja2VyLXdyYXAuay1zdGF0ZS1kZWZhdWx0e2JvcmRlci1ib3R0b20td2lkdGg6MXB4fS5wYWdlLXRlbXBsYXRle2ZvbnQtZmFtaWx5OlwiRGVqYVZ1IFNhbnNcIixBcmlhbCxzYW5zLXNlcmlmO3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7dG9wOjA7bGVmdDowfS5wYWdlLXRlbXBsYXRlIC5oZWFkZXJ7cG9zaXRpb246YWJzb2x1dGU7dG9wOjMwcHg7bGVmdDozMHB4O3JpZ2h0OjMwcHg7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgIzg4ODtjb2xvcjojODg4fS5wYWdlLXRlbXBsYXRlIC5mb290ZXJ7cG9zaXRpb246YWJzb2x1dGU7Ym90dG9tOjMwcHg7bGVmdDozMHB4O3JpZ2h0OjMwcHg7Ym9yZGVyLXRvcDoxcHggc29saWQgIzg4ODt0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjojODg4fS50b29sYmFyLWJ1dHRvbntjb2xvcjojZmZmO2JhY2tncm91bmQtaW1hZ2U6bm9uZTt2ZXJ0aWNhbC1hbGlnbjptaWRkbGV9YF0sXHJcbiAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZVxyXG59KVxyXG5leHBvcnQgY2xhc3MgR3JpZENvbXBvbmVudCBpbXBsZW1lbnRzIE9uQ2hhbmdlcywgT25Jbml0LCBBZnRlckNvbnRlbnRJbml0IHtcclxuXHJcbiAgQElucHV0KCkgbW9kZWw6IEdyaWQ8YW55PjtcclxuICBASW5wdXQoKSBhZHZhbmNlZEZpbHRlciA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpIGF1dG9DYWxjdWxhdGVIZWlnaHQgPSB0cnVlO1xyXG4gIEBJbnB1dCgpIGJ1dHRvbkNvbG9yID0gJyNmZmYnO1xyXG4gIEBJbnB1dCgpIGJ1dHRvbkNvdW50ID0gNTtcclxuICBASW5wdXQoKSBidXR0b25DbGFzcyA9ICd0b29sYmFyLWJ1dHRvbic7XHJcbiAgQElucHV0KCkgcGFnZXJJbmZvID0gdHJ1ZTtcclxuICBASW5wdXQoKSBwYWdlclR5cGU6ICdudW1lcmljJyB8ICdpbnB1dCcgPSAnbnVtZXJpYyc7XHJcbiAgQElucHV0KCkgcGFnZVNpemVzID0gdHJ1ZTtcclxuICBASW5wdXQoKSBwcmV2aW91c05leHQgPSB0cnVlO1xyXG4gIEBJbnB1dCgpIGRldGFpbFJvd0hlaWdodDogbnVtYmVyO1xyXG4gIEBJbnB1dCgpIGV4cG9ydCA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpIGZpbGVOYW1lID0gJ2V4cG9ydCc7XHJcbiAgQElucHV0KCkgZmlsdGVyOiBDb21wb3NpdGVGaWx0ZXJEZXNjcmlwdG9yID0geyBsb2dpYzogJ2FuZCcsIGZpbHRlcnM6IFtdIH07XHJcbiAgQElucHV0KCkgZmlsdGVyYWJsZSA9IHRydWU7XHJcbiAgQElucHV0KCkgZ3JvdXBhYmxlOiBHcm91cGFibGVTZXR0aW5ncyB8IGJvb2xlYW47XHJcbiAgQElucHV0KCkgaGVpZ2h0OiBudW1iZXI7XHJcbiAgQElucHV0KCkgcGFnZVNpemUgPSAyMDtcclxuICBASW5wdXQoKSBwYWdlYWJsZTogYW55IHwgYm9vbGVhbjtcclxuICBASW5wdXQoKSBwYWdlcjogYW55ID0ge1xyXG4gICAgcGFnZVNpemVzOiBbMTAsIDIwLCA1MCwgMTAwXVxyXG4gIH07XHJcbiAgQElucHV0KCkgcGRmSGVhZGVyID0gJyc7XHJcbiAgQElucHV0KCkgcm93SGVpZ2h0OiBudW1iZXI7XHJcbiAgQElucHV0KCkgcm93SGVpZ2h0TWF4OiBudW1iZXI7XHJcbiAgQElucHV0KCkgc2Nyb2xsYWJsZTogYW55O1xyXG4gIEBJbnB1dCgpIHNlbGVjdGFibGU6IGJvb2xlYW47XHJcbiAgQElucHV0KCkgc2tpcCA9IDA7XHJcbiAgQElucHV0KCkgc29ydGFibGU6IFNvcnRTZXR0aW5ncyA9IHsgbW9kZTogJ211bHRpcGxlJyB9O1xyXG4gIEBJbnB1dCgpIGdyb3VwOiBhbnlbXTtcclxuICBASW5wdXQoKSByb3dDbGFzczogRnVuY3Rpb247XHJcbiAgQElucHV0KCkgc29ydDogU29ydERlc2NyaXB0b3JbXSA9IFtdO1xyXG4gIEBJbnB1dCgpIHRvdGFsID0gMDsgLy8gbmVlZCB0aGlzIGZvciBpbmZpbml0ZSBzY3JvbGwgd2hlbiBub3QgYWxsIHJvd3MgYXJlIGxvYWRlZFxyXG4gIEBPdXRwdXQoKSBjaGFuZ2VzID0gbmV3IEV2ZW50RW1pdHRlcjxEYXRhU3RhdGVDaGFuZ2VFdmVudD4oKTtcclxuICBAVmlld0NoaWxkKCdrZW5kb0dyaWRJbnN0YW5jZScpIGdyaWQ6IEVsZW1lbnRSZWY7XHJcbiAgQENvbnRlbnRDaGlsZHJlbihHcmlkQ29sdW1uQ29tcG9uZW50KSBjb250ZW50Q2hpbGRyZW46IFF1ZXJ5TGlzdDxHcmlkQ29sdW1uQ29tcG9uZW50PjtcclxuICBjb2x1bW5zOiBHcmlkQ29sdW1uQ29tcG9uZW50W10gPSBbXTtcclxuICBwcml2YXRlIF9jb2xvcjogc3RyaW5nO1xyXG4gIHByaXZhdGUgZmlsdGVyaW5nID0gdHJ1ZTtcclxuXHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfZWxlbWVudFJlZjogRWxlbWVudFJlZiwgcHJpdmF0ZSBfcmVuZGVyZXI6IFJlbmRlcmVyMikge1xyXG4gIH1cclxuXHJcbiAgLyoqIFRoZSBjb2xvciBvZiB0aGUgdG9vbGJhci4gQ2FuIGJlIHByaW1hcnksIGFjY2VudCwgb3Igd2Fybi4gKi9cclxuICBASW5wdXQoKVxyXG4gIGdldCBjb2xvcigpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NvbG9yO1xyXG4gIH1cclxuXHJcbiAgc2V0IGNvbG9yKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuX3VwZGF0ZUNvbG9yKHZhbHVlKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgX3VwZGF0ZUNvbG9yKG5ld0NvbG9yOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuX3NldEVsZW1lbnRDb2xvcih0aGlzLl9jb2xvciwgZmFsc2UpO1xyXG4gICAgdGhpcy5fc2V0RWxlbWVudENvbG9yKG5ld0NvbG9yLCB0cnVlKTtcclxuICAgIHRoaXMuX2NvbG9yID0gbmV3Q29sb3I7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIF9zZXRFbGVtZW50Q29sb3IoY29sb3I6IHN0cmluZywgaXNBZGQ6IGJvb2xlYW4pIHtcclxuICAgIGlmIChjb2xvciAhPSBudWxsICYmIGNvbG9yICE9PSAnJykge1xyXG4gICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5fZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50O1xyXG5cclxuICAgICAgaWYgKGlzQWRkKSB7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIuYWRkQ2xhc3MoZWxlbWVudCwgYG1hdC0ke2NvbG9yfWApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyLnJlbW92ZUNsYXNzKGVsZW1lbnQsIGBtYXQtJHtjb2xvcn1gKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0IGFjdGl2ZVJvd3MoKTogYW55W10ge1xyXG4gICAgcmV0dXJuIHRoaXMucGFnZVJvd3ModGhpcy5maWx0ZXJSb3dzKHRoaXMuc29ydFJvd3ModGhpcy5yb3dzKSkpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGNvbXB1dGVkUm93SGVpZ2h0KCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5yb3dIZWlnaHRNYXggfHwgMzI7XHJcbiAgfVxyXG5cclxuICBnZXQgZHluYW1pY0hlaWdodCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuYXV0b0NhbGN1bGF0ZUhlaWdodCA/ICh0aGlzLmFjdGl2ZVJvd3MubGVuZ3RoID09PSAwIHx8ICF0aGlzLm51bWVyaWNIZWlnaHQpID9cclxuICAgICAgbnVsbCA6IE1hdGgubWF4KDk2ICsgdGhpcy5oZWFkZXJIZWlnaHQgKyB0aGlzLnBhZ2VySGVpZ2h0ICsgdGhpcy50b29sYmFySGVpZ2h0LFxyXG4gICAgICAgIE1hdGgubWluKHRoaXMuY29tcHV0ZWRSb3dIZWlnaHQgKiB0aGlzLmFjdGl2ZVJvd3MubGVuZ3RoICsgdGhpcy5oZWFkZXJIZWlnaHQgKyB0aGlzLnBhZ2VySGVpZ2h0ICsgdGhpcy50b29sYmFySGVpZ2h0LCB0aGlzLm51bWVyaWNIZWlnaHQpKVxyXG4gICAgICA6IHRoaXMubnVtZXJpY0hlaWdodDtcclxuICB9XHJcblxyXG4gIGdldCBleGNlbEZpbGVOYW1lKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gYCR7dGhpcy5maWxlTmFtZX0ueGxzeGA7XHJcbiAgfVxyXG5cclxuICBnZXQgZmlsdGVycygpOiBhbnlbXSB7XHJcbiAgICByZXR1cm4gdGhpcy5maWx0ZXIuZmlsdGVycztcclxuICB9XHJcblxyXG4gIGdldCBncmlkRGF0YSgpOiBHcmlkRGF0YVJlc3VsdCB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBkYXRhOiB0aGlzLmFjdGl2ZVJvd3MsXHJcbiAgICAgIHRvdGFsOiB0aGlzLnRvdGFsID8gdGhpcy50b3RhbCA6IHRoaXMucm93cy5sZW5ndGhcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBnZXQgaGVhZGVySGVpZ2h0KCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5maWx0ZXJhYmxlID8gNjYgOiAyNztcclxuICB9XHJcblxyXG4gIGdldCBudW1lcmljSGVpZ2h0KCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdHlwZW9mICh0aGlzLmhlaWdodCkgPT09ICdzdHJpbmcnID8gc3RyMmludCh0aGlzLmhlaWdodCkgOiB0aGlzLmhlaWdodDtcclxuICB9XHJcblxyXG4gIGdldCBwYWdlckhlaWdodCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMucGFnZWFibGUgPyA0NiA6IDA7XHJcbiAgfVxyXG5cclxuICBnZXQgcGFnZXJTZXR0aW5ncygpOiBhbnkge1xyXG4gICAgcmV0dXJuIHRoaXMucGFnZXI7XHJcbiAgfVxyXG5cclxuICBnZXQgcGRmRmlsZU5hbWUoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBgJHt0aGlzLmZpbGVOYW1lfS5wZGZgO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHJvd3MoKTogYW55W10ge1xyXG4gICAgcmV0dXJuIHRoaXMubW9kZWwuZGF0YSA/IHRoaXMubW9kZWwuZGF0YS50b0FycmF5KCkgOiBbXTtcclxuICB9XHJcblxyXG4gIGdldCBzaG93RmlsdGVycygpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLmZpbHRlcmFibGUgJiYgdGhpcy5maWx0ZXJpbmc7XHJcbiAgfVxyXG5cclxuICBnZXQgdGFrZSgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMucGFnZVNpemUgfHwgMjA7XHJcbiAgfVxyXG5cclxuICBnZXQgdG9vbGJhckhlaWdodCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuZXhwb3J0ID8gNTMgOiAwO1xyXG4gIH1cclxuXHJcbiAgbmdPbkNoYW5nZXMoKSB7XHJcbiAgICB0aGlzLm1vZGVsLnVwZGF0ZSh0aGlzKTtcclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgdGhpcy5wYWdlYWJsZSA9IHtcclxuICAgICAgYnV0dG9uQ291bnQ6IHRoaXMuYnV0dG9uQ291bnQsXHJcbiAgICAgIGluZm86IHRoaXMucGFnZXJJbmZvLFxyXG4gICAgICB0eXBlOiB0aGlzLnBhZ2VyVHlwZSxcclxuICAgICAgcGFnZVNpemVzOiB0aGlzLnBhZ2VTaXplcyxcclxuICAgICAgcHJldmlvdXNOZXh0OiB0aGlzLnByZXZpb3VzTmV4dFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIG5nQWZ0ZXJDb250ZW50SW5pdCgpIHtcclxuICAgIHRoaXMuY29udGVudENoaWxkcmVuLmZvckVhY2goeCA9PiB7XHJcbiAgICAgIHRoaXMuY29sdW1ucy5wdXNoKHgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBkYXRhU3RhdGVDaGFuZ2Uoc3RhdGU6IERhdGFTdGF0ZUNoYW5nZUV2ZW50KTogdm9pZCB7XHJcbiAgICB0aGlzLmZpbHRlckNoYW5nZShzdGF0ZVsnZmlsdGVyJ10pO1xyXG4gICAgdGhpcy5wYWdlQ2hhbmdlKHsgc2tpcDogc3RhdGVbJ3NraXAnXSwgdGFrZTogc3RhdGVbJ3Rha2UnXSB9KTtcclxuICAgIHRoaXMuc29ydENoYW5nZShzdGF0ZVsnc29ydCddKTtcclxuICAgIHRoaXMuY2hhbmdlcy5lbWl0KHN0YXRlKTtcclxuICB9XHJcblxyXG4gIHNhdmUoY29tcG9uZW50KTogdm9pZCB7XHJcbiAgICBjb25zdCBvcHRpb25zID0gY29tcG9uZW50Lndvcmtib29rT3B0aW9ucygpO1xyXG4gICAgY29uc3Qgcm93cyA9IG9wdGlvbnMuc2hlZXRzWzBdLnJvd3M7XHJcblxyXG4gICAgbGV0IGFsdElkeCA9IDA7XHJcbiAgICByb3dzLmZvckVhY2goKHJvdykgPT4ge1xyXG4gICAgICBpZiAocm93LnR5cGUgPT09ICdkYXRhJykge1xyXG4gICAgICAgIGlmIChhbHRJZHggJSAyICE9PSAwKSB7XHJcbiAgICAgICAgICByb3cuY2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xyXG4gICAgICAgICAgICBjZWxsLmJhY2tncm91bmQgPSAnI2FhYmJjYyc7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYWx0SWR4Kys7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGNvbXBvbmVudC5zYXZlKG9wdGlvbnMpO1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIGZpbHRlckNoYW5nZShlOiBDb21wb3NpdGVGaWx0ZXJEZXNjcmlwdG9yKSB7XHJcbiAgICB0aGlzLmZpbHRlciA9IGU7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgcGFnZUNoYW5nZShlOiBQYWdlQ2hhbmdlRXZlbnQpOiB2b2lkIHtcclxuICAgIHRoaXMuc2tpcCA9IGUuc2tpcDtcclxuICAgIHRoaXMucGFnZVNpemUgPSBzdHIyaW50KGUudGFrZS50b1N0cmluZygpKTtcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBzb3J0Q2hhbmdlKHNvcnQ6IFNvcnREZXNjcmlwdG9yW10pOiB2b2lkIHtcclxuICAgIHRoaXMuc29ydCA9IHNvcnQ7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGZpbHRlclJvd3Mocm93czogYW55W10pOiBhbnlbXSB7XHJcbiAgICByZXR1cm4gR3JpZC5GaWx0ZXJSb3dzKHJvd3MsIHRoaXMuZmlsdGVycyk7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgcGFnZVJvd3Mocm93czogYW55W10pOiBhbnlbXSB7XHJcbiAgICByZXR1cm4gdGhpcy5wYWdlciA/IEdyaWQuUGFnZVJvd3Mocm93cywgdGhpcy5za2lwLCB0aGlzLnRha2UpIDogcm93cztcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBzb3J0Um93cyhyb3dzOiBhbnlbXSk6IGFueVtdIHtcclxuICAgIHJldHVybiBHcmlkLlNvcnRSb3dzKHJvd3MsIHRoaXMuc29ydCk7XHJcbiAgfVxyXG5cclxufVxyXG4iXX0=
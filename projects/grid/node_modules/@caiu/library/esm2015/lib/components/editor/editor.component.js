/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { ChangeDetectionStrategy, Component, EventEmitter, Input, Output, forwardRef, ChangeDetectorRef } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { MatDialog } from '@angular/material';
import { EditorWindowComponent } from './editor-window/editor-window.component';
export const /** @type {?} */ EDITOR_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef(() => EditorComponent),
    multi: true
};
export class EditorComponent {
    /**
     * @param {?} dialog
     * @param {?} ref
     */
    constructor(dialog, ref) {
        this.dialog = dialog;
        this.ref = ref;
        this.type = 'full';
        this.expanded = false;
        this.height = 100;
        this.plugins = [
            'advlist autolink lists link image charmap print preview hr anchor pagebreak',
            'searchreplace wordcount visualblocks visualchars code fullscreen',
            'insertdatetime media nonbreaking save table contextmenu directionality',
            'emoticons template paste textcolor colorpicker textpattern imagetools toc help'
        ];
        this.skinUrl = '/assets/skins/lightgray-gradient';
        this.templates = [
            { title: 'Test template 1', content: 'Test 1' },
            { title: 'Test template 2', content: 'Test 2' }
        ];
        this.changes = new EventEmitter();
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set value(val) {
        this._value = val;
        this.setContent(this._value);
    }
    /**
     * @return {?}
     */
    get value() {
        return this._value;
    }
    /**
     * @return {?}
     */
    get basic() {
        return this.type === 'basic';
    }
    /**
     * @return {?}
     */
    get full() {
        return this.type === 'full';
    }
    /**
     * @return {?}
     */
    get config() {
        switch (this.type) {
            case 'basic':
                return this.configBasic;
            case 'full':
                return this.configFull;
            default:
                return this.configFull;
        }
    }
    /**
     * @return {?}
     */
    get configBasic() {
        return {
            height: this.height,
            selector: '#' + this.elementId,
            menubar: false,
            skin_url: this.skinUrl,
            theme: 'modern',
            plugins: [
                'advlist autolink lists link image charmap print preview anchor',
                'searchreplace visualblocks code fullscreen',
                'insertdatetime media table contextmenu paste code'
            ],
            toolbar: `undo redo | insert | styleselect | bold italic |
       alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link`,
            content_css: [
                '//fonts.googleapis.com/css?family=Lato:300,300i,400,400i',
                '//www.tinymce.com/css/codepen.min.css'
            ],
            setup: editor => {
                this.editorRef = editor;
                editor.on('keyup', (e) => {
                    e.preventDefault();
                    const /** @type {?} */ content = editor.getContent();
                    this.onKeyup(content);
                });
                editor.on('change', (e) => {
                    e.preventDefault();
                    const /** @type {?} */ content = editor.getContent();
                    this.onChange(content);
                });
                editor.on('viewcontentloaded', (e) => {
                    editor.setContent('');
                });
            },
        };
    }
    /**
     * @return {?}
     */
    get configFull() {
        return {
            height: this.height,
            selector: '#' + this.elementId,
            plugins: this.plugins,
            skin_url: this.skinUrl,
            templates: this.templates,
            theme: 'modern',
            toolbar1: `undo redo | insert | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent`,
            toolbar2: 'print preview | forecolor backcolor | link',
            setup: editor => {
                this.editorRef = editor;
                editor.on('keyup', (e) => {
                    e.preventDefault();
                    const /** @type {?} */ content = editor.getContent();
                    this.onKeyup(content);
                });
                editor.on('change', (e) => {
                    e.preventDefault();
                    const /** @type {?} */ content = editor.getContent();
                    this.onChange(content);
                });
                editor.on('viewcontentloaded', (e) => {
                    editor.setContent('');
                });
            },
            image_advtab: true,
            content_css: [
                '//fonts.googleapis.com/css?family=Lato:300,300i,400,400i',
                '//www.tinymce.com/css/codepen.min.css'
            ]
        };
    }
    /**
     * @return {?}
     */
    get hasValue() {
        return this.value ? true : false;
    }
    /**
     * @return {?}
     */
    get showExpand() {
        return this.full && !this.expanded;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        tinymce.init(this.config);
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        tinymce.remove(this.editorRef);
    }
    /**
     * @return {?}
     */
    clear() {
        this.value = '';
    }
    /**
     * @param {?} e
     * @return {?}
     */
    expand(e) {
        if (e && e.preventDefault) {
            e.preventDefault();
        }
        const /** @type {?} */ config = {
            data: this.editorRef.getContent(),
            width: '1200px'
        };
        this.openDialog(config);
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnChange(fn) {
        this.onModelChange = fn;
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnTouched(fn) {
        this.onTouch = fn;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    writeValue(value) {
        this.value = value;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    onChange(value) {
        this.value = value;
        this.changes.emit(value);
        if (this.onModelChange) {
            this.onModelChange(value);
        }
    }
    /**
     * @param {?} value
     * @return {?}
     */
    onUpdate(value) {
        this.onChange(value);
        this.setContent(this.value);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    onKeyup(value) {
        this.onChange(value);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    onBlur(value) {
        this.focused = '';
    }
    /**
     * @param {?} value
     * @return {?}
     */
    onFocus(value) {
        this.focused = value;
        if (this.onTouch) {
            this.onTouch();
        }
    }
    /**
     * @param {?} config
     * @return {?}
     */
    openDialog(config) {
        const /** @type {?} */ dialogRef = this.dialog.open(EditorWindowComponent, config);
        this.dialogRef = dialogRef.afterClosed().subscribe(result => {
            this.closeDialog(result);
        });
    }
    /**
     * @param {?} value
     * @return {?}
     */
    closeDialog(value) {
        if (value) {
            this.onChange(value);
        }
        this.dialogRef.unsubscribe();
    }
    /**
     * @param {?} value
     * @return {?}
     */
    setContent(value) {
        if (this.editorRef && this.editorRef.getContent) {
            const /** @type {?} */ content = this.editorRef.getContent();
            if (value && content != value) {
                this.editorRef.setContent(value);
            }
        }
    }
}
EditorComponent.decorators = [
    { type: Component, args: [{
                selector: 'iu-editor',
                template: `<mat-card class="editor">
  <textarea [id]="elementId">
    <ng-content *ngIf="!hasValue"></ng-content>
    <span *ngIf="hasValue">{{ value }}</span>
  </textarea>
  <button *ngIf="showExpand" id="expand-editor" (click)="expand($event)" mat-button>
    <mat-icon>fullscreen</mat-icon>
  </button>
</mat-card>
`,
                styles: [`.mat-card{display:block;clear:both;padding:1px 3px 1px 1px;border-radius:2px}#expand-editor{font-size:36px;position:absolute;right:3px;top:3px;color:#fff;text-align:center;min-width:36px;line-height:24px;padding:2px}.mat-icon{font-size:36px;position:relative;left:-6px;top:-7px}`],
                changeDetection: ChangeDetectionStrategy.OnPush,
                providers: [EDITOR_ACCESSOR]
            },] },
];
/** @nocollapse */
EditorComponent.ctorParameters = () => [
    { type: MatDialog },
    { type: ChangeDetectorRef }
];
EditorComponent.propDecorators = {
    type: [{ type: Input }],
    elementId: [{ type: Input }],
    expanded: [{ type: Input }],
    height: [{ type: Input }],
    plugins: [{ type: Input }],
    skinUrl: [{ type: Input }],
    templates: [{ type: Input }],
    changes: [{ type: Output }],
    value: [{ type: Input }]
};
function EditorComponent_tsickle_Closure_declarations() {
    /** @type {?} */
    EditorComponent.prototype.type;
    /** @type {?} */
    EditorComponent.prototype.elementId;
    /** @type {?} */
    EditorComponent.prototype.expanded;
    /** @type {?} */
    EditorComponent.prototype.height;
    /** @type {?} */
    EditorComponent.prototype.plugins;
    /** @type {?} */
    EditorComponent.prototype.skinUrl;
    /** @type {?} */
    EditorComponent.prototype.templates;
    /** @type {?} */
    EditorComponent.prototype.changes;
    /** @type {?} */
    EditorComponent.prototype.onModelChange;
    /** @type {?} */
    EditorComponent.prototype.onTouch;
    /** @type {?} */
    EditorComponent.prototype._value;
    /** @type {?} */
    EditorComponent.prototype.focused;
    /** @type {?} */
    EditorComponent.prototype.dialogRef;
    /** @type {?} */
    EditorComponent.prototype.editorRef;
    /** @type {?} */
    EditorComponent.prototype.dialog;
    /** @type {?} */
    EditorComponent.prototype.ref;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZWRpdG9yLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BjYWl1L2xpYnJhcnkvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy9lZGl0b3IvZWRpdG9yLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUNMLHVCQUF1QixFQUN2QixTQUFTLEVBQ1QsWUFBWSxFQUNaLEtBQUssRUFHTCxNQUFNLEVBRU4sVUFBVSxFQUNWLGlCQUFpQixFQUNsQixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQXdCLGlCQUFpQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDekUsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRzlDLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLHlDQUF5QyxDQUFDO0FBSWhGLE1BQU0sQ0FBQyx1QkFBTSxlQUFlLEdBQVE7SUFDbEMsT0FBTyxFQUFFLGlCQUFpQjtJQUMxQixXQUFXLEVBQUUsVUFBVSxDQUFDLEdBQUcsRUFBRSxDQUFDLGVBQWUsQ0FBQztJQUM5QyxLQUFLLEVBQUUsSUFBSTtDQUNaLENBQUM7QUFrQkYsTUFBTTs7Ozs7SUF5QkosWUFBbUIsTUFBaUIsRUFBVSxHQUFzQjtRQUFqRCxXQUFNLEdBQU4sTUFBTSxDQUFXO1FBQVUsUUFBRyxHQUFILEdBQUcsQ0FBbUI7b0JBdkJsQyxNQUFNO3dCQUVwQixLQUFLO3NCQUNQLEdBQUc7dUJBQ0Y7WUFDakIsNkVBQTZFO1lBQzdFLGtFQUFrRTtZQUNsRSx3RUFBd0U7WUFDeEUsZ0ZBQWdGO1NBQ2pGO3VCQUNrQixrQ0FBa0M7eUJBQ2hDO1lBQ25CLEVBQUUsS0FBSyxFQUFFLGlCQUFpQixFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUU7WUFDL0MsRUFBRSxLQUFLLEVBQUUsaUJBQWlCLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRTtTQUNoRDt1QkFDbUIsSUFBSSxZQUFZLEVBQU87S0FROEI7Ozs7O0lB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QUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO2FBQ2xDO1NBQ0Y7S0FDRjs7O1lBN09GLFNBQVMsU0FBQztnQkFDVCxRQUFRLEVBQUUsV0FBVztnQkFDckIsUUFBUSxFQUFFOzs7Ozs7Ozs7Q0FTWDtnQkFDQyxNQUFNLEVBQUUsQ0FBQyx3UkFBd1IsQ0FBQztnQkFDbFMsZUFBZSxFQUFFLHVCQUF1QixDQUFDLE1BQU07Z0JBQy9DLFNBQVMsRUFBRSxDQUFDLGVBQWUsQ0FBQzthQUM3Qjs7OztZQTVCUSxTQUFTO1lBSGhCLGlCQUFpQjs7O21CQWtDaEIsS0FBSzt3QkFDTCxLQUFLO3VCQUNMLEtBQUs7cUJBQ0wsS0FBSztzQkFDTCxLQUFLO3NCQU1MLEtBQUs7d0JBQ0wsS0FBSztzQkFJTCxNQUFNO29CQVVOLEtBQUsiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxyXG4gIENvbXBvbmVudCxcclxuICBFdmVudEVtaXR0ZXIsXHJcbiAgSW5wdXQsXHJcbiAgT25EZXN0cm95LFxyXG4gIE9uSW5pdCxcclxuICBPdXRwdXQsXHJcbiAgQWZ0ZXJWaWV3SW5pdCxcclxuICBmb3J3YXJkUmVmLFxyXG4gIENoYW5nZURldGVjdG9yUmVmXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBOR19WQUxVRV9BQ0NFU1NPUiB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcclxuaW1wb3J0IHsgTWF0RGlhbG9nIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwnO1xyXG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcclxuXHJcbmltcG9ydCB7IEVkaXRvcldpbmRvd0NvbXBvbmVudCB9IGZyb20gJy4vZWRpdG9yLXdpbmRvdy9lZGl0b3Itd2luZG93LmNvbXBvbmVudCc7XHJcblxyXG5kZWNsYXJlIHZhciB0aW55bWNlOiBhbnk7XHJcblxyXG5leHBvcnQgY29uc3QgRURJVE9SX0FDQ0VTU09SOiBhbnkgPSB7XHJcbiAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXHJcbiAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gRWRpdG9yQ29tcG9uZW50KSxcclxuICBtdWx0aTogdHJ1ZVxyXG59O1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdpdS1lZGl0b3InLFxyXG4gIHRlbXBsYXRlOiBgPG1hdC1jYXJkIGNsYXNzPVwiZWRpdG9yXCI+XHJcbiAgPHRleHRhcmVhIFtpZF09XCJlbGVtZW50SWRcIj5cclxuICAgIDxuZy1jb250ZW50ICpuZ0lmPVwiIWhhc1ZhbHVlXCI+PC9uZy1jb250ZW50PlxyXG4gICAgPHNwYW4gKm5nSWY9XCJoYXNWYWx1ZVwiPnt7IHZhbHVlIH19PC9zcGFuPlxyXG4gIDwvdGV4dGFyZWE+XHJcbiAgPGJ1dHRvbiAqbmdJZj1cInNob3dFeHBhbmRcIiBpZD1cImV4cGFuZC1lZGl0b3JcIiAoY2xpY2spPVwiZXhwYW5kKCRldmVudClcIiBtYXQtYnV0dG9uPlxyXG4gICAgPG1hdC1pY29uPmZ1bGxzY3JlZW48L21hdC1pY29uPlxyXG4gIDwvYnV0dG9uPlxyXG48L21hdC1jYXJkPlxyXG5gLFxyXG4gIHN0eWxlczogW2AubWF0LWNhcmR7ZGlzcGxheTpibG9jaztjbGVhcjpib3RoO3BhZGRpbmc6MXB4IDNweCAxcHggMXB4O2JvcmRlci1yYWRpdXM6MnB4fSNleHBhbmQtZWRpdG9ye2ZvbnQtc2l6ZTozNnB4O3Bvc2l0aW9uOmFic29sdXRlO3JpZ2h0OjNweDt0b3A6M3B4O2NvbG9yOiNmZmY7dGV4dC1hbGlnbjpjZW50ZXI7bWluLXdpZHRoOjM2cHg7bGluZS1oZWlnaHQ6MjRweDtwYWRkaW5nOjJweH0ubWF0LWljb257Zm9udC1zaXplOjM2cHg7cG9zaXRpb246cmVsYXRpdmU7bGVmdDotNnB4O3RvcDotN3B4fWBdLFxyXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxyXG4gIHByb3ZpZGVyczogW0VESVRPUl9BQ0NFU1NPUl1cclxufSlcclxuZXhwb3J0IGNsYXNzIEVkaXRvckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95LCBBZnRlclZpZXdJbml0LCBDb250cm9sVmFsdWVBY2Nlc3NvciB7XHJcblxyXG4gIEBJbnB1dCgpIHR5cGU6ICdiYXNpYycgfCAnZnVsbCcgPSAnZnVsbCc7XHJcbiAgQElucHV0KCkgZWxlbWVudElkOiBzdHJpbmc7XHJcbiAgQElucHV0KCkgZXhwYW5kZWQgPSBmYWxzZTtcclxuICBASW5wdXQoKSBoZWlnaHQgPSAxMDA7XHJcbiAgQElucHV0KCkgcGx1Z2lucyA9IFtcclxuICAgICdhZHZsaXN0IGF1dG9saW5rIGxpc3RzIGxpbmsgaW1hZ2UgY2hhcm1hcCBwcmludCBwcmV2aWV3IGhyIGFuY2hvciBwYWdlYnJlYWsnLFxyXG4gICAgJ3NlYXJjaHJlcGxhY2Ugd29yZGNvdW50IHZpc3VhbGJsb2NrcyB2aXN1YWxjaGFycyBjb2RlIGZ1bGxzY3JlZW4nLFxyXG4gICAgJ2luc2VydGRhdGV0aW1lIG1lZGlhIG5vbmJyZWFraW5nIHNhdmUgdGFibGUgY29udGV4dG1lbnUgZGlyZWN0aW9uYWxpdHknLFxyXG4gICAgJ2Vtb3RpY29ucyB0ZW1wbGF0ZSBwYXN0ZSB0ZXh0Y29sb3IgY29sb3JwaWNrZXIgdGV4dHBhdHRlcm4gaW1hZ2V0b29scyB0b2MgaGVscCdcclxuICBdO1xyXG4gIEBJbnB1dCgpIHNraW5VcmwgPSAnL2Fzc2V0cy9za2lucy9saWdodGdyYXktZ3JhZGllbnQnO1xyXG4gIEBJbnB1dCgpIHRlbXBsYXRlcyA9IFtcclxuICAgIHsgdGl0bGU6ICdUZXN0IHRlbXBsYXRlIDEnLCBjb250ZW50OiAnVGVzdCAxJyB9LFxyXG4gICAgeyB0aXRsZTogJ1Rlc3QgdGVtcGxhdGUgMicsIGNvbnRlbnQ6ICdUZXN0IDInIH1cclxuICBdO1xyXG4gIEBPdXRwdXQoKSBjaGFuZ2VzID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgcHJpdmF0ZSBvbk1vZGVsQ2hhbmdlOiBGdW5jdGlvbjtcclxuICBwcml2YXRlIG9uVG91Y2g6IEZ1bmN0aW9uO1xyXG4gIF92YWx1ZTogc3RyaW5nO1xyXG4gIGZvY3VzZWQ6IHN0cmluZztcclxuICBkaWFsb2dSZWY6IFN1YnNjcmlwdGlvbjtcclxuICBlZGl0b3JSZWY6IGFueTtcclxuXHJcbiAgY29uc3RydWN0b3IocHVibGljIGRpYWxvZzogTWF0RGlhbG9nLCBwcml2YXRlIHJlZjogQ2hhbmdlRGV0ZWN0b3JSZWYpIHsgfVxyXG5cclxuICBASW5wdXQoKSBzZXQgdmFsdWUodmFsOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuX3ZhbHVlID0gdmFsO1xyXG4gICAgdGhpcy5zZXRDb250ZW50KHRoaXMuX3ZhbHVlKTtcclxuICB9XHJcblxyXG4gIGdldCB2YWx1ZSgpIHtcclxuICAgIHJldHVybiB0aGlzLl92YWx1ZTtcclxuICB9XHJcblxyXG4gIGdldCBiYXNpYygpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLnR5cGUgPT09ICdiYXNpYyc7XHJcbiAgfVxyXG5cclxuICBnZXQgZnVsbCgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLnR5cGUgPT09ICdmdWxsJztcclxuICB9XHJcblxyXG4gIGdldCBjb25maWcoKTogYW55IHtcclxuICAgIHN3aXRjaCAodGhpcy50eXBlKSB7XHJcbiAgICAgIGNhc2UgJ2Jhc2ljJzpcclxuICAgICAgICByZXR1cm4gdGhpcy5jb25maWdCYXNpYztcclxuICAgICAgY2FzZSAnZnVsbCc6XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnRnVsbDtcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICByZXR1cm4gdGhpcy5jb25maWdGdWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0IGNvbmZpZ0Jhc2ljKCk6IGFueSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0LFxyXG4gICAgICBzZWxlY3RvcjogJyMnICsgdGhpcy5lbGVtZW50SWQsXHJcbiAgICAgIG1lbnViYXI6IGZhbHNlLFxyXG4gICAgICBza2luX3VybDogdGhpcy5za2luVXJsLFxyXG4gICAgICB0aGVtZTogJ21vZGVybicsXHJcbiAgICAgIHBsdWdpbnM6IFtcclxuICAgICAgICAnYWR2bGlzdCBhdXRvbGluayBsaXN0cyBsaW5rIGltYWdlIGNoYXJtYXAgcHJpbnQgcHJldmlldyBhbmNob3InLFxyXG4gICAgICAgICdzZWFyY2hyZXBsYWNlIHZpc3VhbGJsb2NrcyBjb2RlIGZ1bGxzY3JlZW4nLFxyXG4gICAgICAgICdpbnNlcnRkYXRldGltZSBtZWRpYSB0YWJsZSBjb250ZXh0bWVudSBwYXN0ZSBjb2RlJ1xyXG4gICAgICBdLFxyXG4gICAgICB0b29sYmFyOiBgdW5kbyByZWRvIHwgaW5zZXJ0IHwgc3R5bGVzZWxlY3QgfCBib2xkIGl0YWxpYyB8XHJcbiAgICAgICBhbGlnbmxlZnQgYWxpZ25jZW50ZXIgYWxpZ25yaWdodCBhbGlnbmp1c3RpZnkgfCBidWxsaXN0IG51bWxpc3Qgb3V0ZGVudCBpbmRlbnQgfCBsaW5rYCxcclxuICAgICAgY29udGVudF9jc3M6IFtcclxuICAgICAgICAnLy9mb250cy5nb29nbGVhcGlzLmNvbS9jc3M/ZmFtaWx5PUxhdG86MzAwLDMwMGksNDAwLDQwMGknLFxyXG4gICAgICAgICcvL3d3dy50aW55bWNlLmNvbS9jc3MvY29kZXBlbi5taW4uY3NzJ1xyXG4gICAgICBdLFxyXG4gICAgICBzZXR1cDogZWRpdG9yID0+IHtcclxuICAgICAgICB0aGlzLmVkaXRvclJlZiA9IGVkaXRvcjtcclxuICAgICAgICBlZGl0b3Iub24oJ2tleXVwJywgKGUpID0+IHtcclxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBlZGl0b3IuZ2V0Q29udGVudCgpO1xyXG4gICAgICAgICAgdGhpcy5vbktleXVwKGNvbnRlbnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGVkaXRvci5vbignY2hhbmdlJywgKGUpID0+IHtcclxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBlZGl0b3IuZ2V0Q29udGVudCgpO1xyXG4gICAgICAgICAgdGhpcy5vbkNoYW5nZShjb250ZW50KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBlZGl0b3Iub24oJ3ZpZXdjb250ZW50bG9hZGVkJywgKGUpID0+IHtcclxuICAgICAgICAgIGVkaXRvci5zZXRDb250ZW50KCcnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBnZXQgY29uZmlnRnVsbCgpOiBhbnkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaGVpZ2h0OiB0aGlzLmhlaWdodCxcclxuICAgICAgc2VsZWN0b3I6ICcjJyArIHRoaXMuZWxlbWVudElkLFxyXG4gICAgICBwbHVnaW5zOiB0aGlzLnBsdWdpbnMsXHJcbiAgICAgIHNraW5fdXJsOiB0aGlzLnNraW5VcmwsXHJcbiAgICAgIHRlbXBsYXRlczogdGhpcy50ZW1wbGF0ZXMsXHJcbiAgICAgIHRoZW1lOiAnbW9kZXJuJyxcclxuICAgICAgdG9vbGJhcjE6IGB1bmRvIHJlZG8gfCBpbnNlcnQgfCBzdHlsZXNlbGVjdCB8IGJvbGQgaXRhbGljIHwgYWxpZ25sZWZ0IGFsaWduY2VudGVyIGFsaWducmlnaHQgYWxpZ25qdXN0aWZ5IHwgYnVsbGlzdCBudW1saXN0IG91dGRlbnQgaW5kZW50YCxcclxuICAgICAgdG9vbGJhcjI6ICdwcmludCBwcmV2aWV3IHwgZm9yZWNvbG9yIGJhY2tjb2xvciB8IGxpbmsnLFxyXG4gICAgICBzZXR1cDogZWRpdG9yID0+IHtcclxuICAgICAgICB0aGlzLmVkaXRvclJlZiA9IGVkaXRvcjtcclxuICAgICAgICBlZGl0b3Iub24oJ2tleXVwJywgKGUpID0+IHtcclxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBlZGl0b3IuZ2V0Q29udGVudCgpO1xyXG4gICAgICAgICAgdGhpcy5vbktleXVwKGNvbnRlbnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGVkaXRvci5vbignY2hhbmdlJywgKGUpID0+IHtcclxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBlZGl0b3IuZ2V0Q29udGVudCgpO1xyXG4gICAgICAgICAgdGhpcy5vbkNoYW5nZShjb250ZW50KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBlZGl0b3Iub24oJ3ZpZXdjb250ZW50bG9hZGVkJywgKGUpID0+IHtcclxuICAgICAgICAgIGVkaXRvci5zZXRDb250ZW50KCcnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSxcclxuICAgICAgaW1hZ2VfYWR2dGFiOiB0cnVlLFxyXG4gICAgICBjb250ZW50X2NzczogW1xyXG4gICAgICAgICcvL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2Nzcz9mYW1pbHk9TGF0bzozMDAsMzAwaSw0MDAsNDAwaScsXHJcbiAgICAgICAgJy8vd3d3LnRpbnltY2UuY29tL2Nzcy9jb2RlcGVuLm1pbi5jc3MnXHJcbiAgICAgIF1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBnZXQgaGFzVmFsdWUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy52YWx1ZSA/IHRydWUgOiBmYWxzZTtcclxuICB9XHJcblxyXG4gIGdldCBzaG93RXhwYW5kKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZnVsbCAmJiAhdGhpcy5leHBhbmRlZDtcclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gIH1cclxuXHJcbiAgbmdBZnRlclZpZXdJbml0KCkge1xyXG4gICAgdGlueW1jZS5pbml0KHRoaXMuY29uZmlnKTtcclxuICB9XHJcblxyXG4gIG5nT25EZXN0cm95KCkge1xyXG4gICAgdGlueW1jZS5yZW1vdmUodGhpcy5lZGl0b3JSZWYpO1xyXG4gIH1cclxuXHJcbiAgY2xlYXIoKSB7XHJcbiAgICB0aGlzLnZhbHVlID0gJyc7XHJcbiAgfVxyXG5cclxuICBleHBhbmQoZTogYW55KSB7XHJcbiAgICBpZiAoZSAmJiBlLnByZXZlbnREZWZhdWx0KSB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGNvbmZpZyA9IHtcclxuICAgICAgZGF0YTogdGhpcy5lZGl0b3JSZWYuZ2V0Q29udGVudCgpLFxyXG4gICAgICB3aWR0aDogJzEyMDBweCdcclxuICAgIH07XHJcbiAgICB0aGlzLm9wZW5EaWFsb2coY29uZmlnKTtcclxuICB9XHJcblxyXG4gIHJlZ2lzdGVyT25DaGFuZ2UoZm46IEZ1bmN0aW9uKSB7XHJcbiAgICB0aGlzLm9uTW9kZWxDaGFuZ2UgPSBmbjtcclxuICB9XHJcblxyXG4gIHJlZ2lzdGVyT25Ub3VjaGVkKGZuOiBGdW5jdGlvbikge1xyXG4gICAgdGhpcy5vblRvdWNoID0gZm47XHJcbiAgfVxyXG5cclxuICB3cml0ZVZhbHVlKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICB9XHJcblxyXG4gIG9uQ2hhbmdlKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgIHRoaXMuY2hhbmdlcy5lbWl0KHZhbHVlKTtcclxuICAgIGlmICh0aGlzLm9uTW9kZWxDaGFuZ2UpIHtcclxuICAgICAgdGhpcy5vbk1vZGVsQ2hhbmdlKHZhbHVlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uVXBkYXRlKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgIHRoaXMub25DaGFuZ2UodmFsdWUpO1xyXG4gICAgdGhpcy5zZXRDb250ZW50KHRoaXMudmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgb25LZXl1cCh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICB0aGlzLm9uQ2hhbmdlKHZhbHVlKTtcclxuICB9XHJcblxyXG4gIG9uQmx1cih2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICB0aGlzLmZvY3VzZWQgPSAnJztcclxuICB9XHJcblxyXG4gIG9uRm9jdXModmFsdWU6IHN0cmluZykge1xyXG4gICAgdGhpcy5mb2N1c2VkID0gdmFsdWU7XHJcbiAgICBpZiAodGhpcy5vblRvdWNoKSB7XHJcbiAgICAgIHRoaXMub25Ub3VjaCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb3BlbkRpYWxvZyhjb25maWc6IGFueSkge1xyXG4gICAgY29uc3QgZGlhbG9nUmVmID0gdGhpcy5kaWFsb2cub3BlbihFZGl0b3JXaW5kb3dDb21wb25lbnQsIGNvbmZpZyk7XHJcbiAgICB0aGlzLmRpYWxvZ1JlZiA9IGRpYWxvZ1JlZi5hZnRlckNsb3NlZCgpLnN1YnNjcmliZShyZXN1bHQgPT4ge1xyXG4gICAgICB0aGlzLmNsb3NlRGlhbG9nKHJlc3VsdCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNsb3NlRGlhbG9nKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICB0aGlzLm9uQ2hhbmdlKHZhbHVlKTtcclxuICAgIH1cclxuICAgIHRoaXMuZGlhbG9nUmVmLnVuc3Vic2NyaWJlKCk7XHJcbiAgfVxyXG5cclxuICBzZXRDb250ZW50KHZhbHVlOiBzdHJpbmcpIHtcclxuICAgIGlmICh0aGlzLmVkaXRvclJlZiAmJiB0aGlzLmVkaXRvclJlZi5nZXRDb250ZW50KSB7XHJcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSB0aGlzLmVkaXRvclJlZi5nZXRDb250ZW50KCk7XHJcbiAgICAgIGlmICh2YWx1ZSAmJiBjb250ZW50ICE9IHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5lZGl0b3JSZWYuc2V0Q29udGVudCh2YWx1ZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG59XHJcbiJdfQ==
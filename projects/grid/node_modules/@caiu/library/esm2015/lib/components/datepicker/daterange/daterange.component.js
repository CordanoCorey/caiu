/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { ChangeDetectionStrategy, Component, forwardRef, Input, ViewChild, Output, EventEmitter, ChangeDetectorRef } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { DatepickerComponent } from '../datepicker.component';
import { DateRange } from '../../../shared/date';
import { build } from '../../../shared/utils';
export const /** @type {?} */ DATERANGE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef(() => DaterangeComponent),
    multi: true
};
export class DaterangeComponent {
    /**
     * @param {?} changeDetectorRef
     */
    constructor(changeDetectorRef) {
        this.changeDetectorRef = changeDetectorRef;
        this.inline = false;
        this.startLabel = 'Start Date';
        this.endLabel = 'End Date';
        this.startDateChanged = new EventEmitter();
        this.endDateChanged = new EventEmitter();
        this._value = new DateRange();
        this.focused = new DateRange();
    }
    /**
     * @return {?}
     */
    get value() {
        return this._value;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set value(val) {
        this._value = val;
        if (this && this.changeDetectorRef && !this.changeDetectorRef['destroyed']) {
            this.changeDetectorRef.detectChanges();
        }
    }
    /**
     * @return {?}
     */
    get startDateId() {
        return this.startDatepicker.id;
    }
    /**
     * @return {?}
     */
    get startDateOpened() {
        return this.startDatepicker.opened;
    }
    /**
     * @return {?}
     */
    get endDateId() {
        return this.endDatepicker.id;
    }
    /**
     * @return {?}
     */
    get endDateOpened() {
        return this.endDatepicker.opened;
    }
    /**
     * @return {?}
     */
    get startDateValue() {
        return this.value.startDate;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set startDateValue(value) {
        this.changeStartDate(value);
    }
    /**
     * @return {?}
     */
    get endDateValue() {
        return this.value.endDate;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set endDateValue(value) {
        this.changeEndDate(value);
    }
    /**
     * @param {?} date
     * @return {?}
     */
    changeStartDate(date) {
        this.onChange(build(DateRange, {
            endDate: this.value.endDate,
            startDate: date
        }));
        this.startDateChanged.emit(date);
    }
    /**
     * @return {?}
     */
    closeStartDate() {
        this.startDatepicker.close();
    }
    /**
     * @return {?}
     */
    openStateDate() {
        this.startDatepicker.open();
    }
    /**
     * @param {?} date
     * @return {?}
     */
    changeEndDate(date) {
        this.onChange(build(DateRange, {
            endDate: date,
            startDate: this.value.startDate
        }));
        this.endDateChanged.emit(date);
    }
    /**
     * @return {?}
     */
    closeEndDate() {
        this.endDatepicker.close();
    }
    /**
     * @return {?}
     */
    openEndDate() {
        this.endDatepicker.open();
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnChange(fn) {
        this.onModelChange = fn;
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnTouched(fn) {
        this.onTouch = fn;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    writeValue(value) {
        this.value = value;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    onChange(value) {
        this.value = value;
        if (this.onModelChange) {
            this.onModelChange(value);
        }
    }
    /**
     * @param {?} value
     * @return {?}
     */
    onBlur(value) {
    }
    /**
     * @param {?} value
     * @return {?}
     */
    onFocus(value) {
        this.focused = value;
        if (this.onTouch) {
            this.onTouch();
        }
    }
}
DaterangeComponent.decorators = [
    { type: Component, args: [{
                selector: 'iu-daterange',
                template: `<div class="daterange">
  <div class="start-date" [class.date]="!inline" [class.inline-date]="inline">
    <label class="lbl-date iu-primary">{{ startLabel }}:</label>
    <iu-datepicker #startDate (selectedChanged)="changeStartDate($event)" [value]="startDateValue"></iu-datepicker>
  </div>
  <div class="end-date" [class.date]="!inline" [class.inline-date]="inline">
    <label class="lbl-date iu-primary">{{ endLabel }}:</label>
    <iu-datepicker #endDate (selectedChanged)="changeEndDate($event)" [value]="endDateValue"></iu-datepicker>
  </div>
</div>
`,
                styles: [`.daterange{display:inline-block;line-height:18px;padding:0 10px;border-radius:3px}.daterange .date{display:flex;padding:6px}.daterange .inline-date{display:inline-flex;padding:0}.daterange .inline-date.end-date{margin-left:32px}.daterange .lbl-date{width:76px;display:inline-block;font-size:14px;padding-top:22px}`],
                changeDetection: ChangeDetectionStrategy.OnPush,
                providers: [DATERANGE_ACCESSOR]
            },] },
];
/** @nocollapse */
DaterangeComponent.ctorParameters = () => [
    { type: ChangeDetectorRef }
];
DaterangeComponent.propDecorators = {
    inline: [{ type: Input }],
    min: [{ type: Input }],
    max: [{ type: Input }],
    startAt: [{ type: Input }],
    startLabel: [{ type: Input }],
    endLabel: [{ type: Input }],
    startView: [{ type: Input }],
    touchUi: [{ type: Input }],
    startDateChanged: [{ type: Output }],
    endDateChanged: [{ type: Output }],
    startDatepicker: [{ type: ViewChild, args: ['startDate',] }],
    endDatepicker: [{ type: ViewChild, args: ['endDate',] }],
    value: [{ type: Input }]
};
function DaterangeComponent_tsickle_Closure_declarations() {
    /** @type {?} */
    DaterangeComponent.prototype.inline;
    /** @type {?} */
    DaterangeComponent.prototype.min;
    /** @type {?} */
    DaterangeComponent.prototype.max;
    /** @type {?} */
    DaterangeComponent.prototype.startAt;
    /** @type {?} */
    DaterangeComponent.prototype.startLabel;
    /** @type {?} */
    DaterangeComponent.prototype.endLabel;
    /** @type {?} */
    DaterangeComponent.prototype.startView;
    /** @type {?} */
    DaterangeComponent.prototype.touchUi;
    /** @type {?} */
    DaterangeComponent.prototype.startDateChanged;
    /** @type {?} */
    DaterangeComponent.prototype.endDateChanged;
    /** @type {?} */
    DaterangeComponent.prototype.startDatepicker;
    /** @type {?} */
    DaterangeComponent.prototype.endDatepicker;
    /** @type {?} */
    DaterangeComponent.prototype.onModelChange;
    /** @type {?} */
    DaterangeComponent.prototype.onTouch;
    /** @type {?} */
    DaterangeComponent.prototype._value;
    /** @type {?} */
    DaterangeComponent.prototype.focused;
    /** @type {?} */
    DaterangeComponent.prototype.changeDetectorRef;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZXJhbmdlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BjYWl1L2xpYnJhcnkvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy9kYXRlcGlja2VyL2RhdGVyYW5nZS9kYXRlcmFuZ2UuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDMUksT0FBTyxFQUF3QixpQkFBaUIsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRXpFLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQzlELE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUNqRCxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFFOUMsTUFBTSxDQUFDLHVCQUFNLGtCQUFrQixHQUFRO0lBQ3JDLE9BQU8sRUFBRSxpQkFBaUI7SUFDMUIsV0FBVyxFQUFFLFVBQVUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxrQkFBa0IsQ0FBQztJQUNqRCxLQUFLLEVBQUUsSUFBSTtDQUNaLENBQUM7QUFtQkYsTUFBTTs7OztJQW1CSixZQUFvQixpQkFBb0M7UUFBcEMsc0JBQWlCLEdBQWpCLGlCQUFpQixDQUFtQjtzQkFqQnRDLEtBQUs7MEJBSUQsWUFBWTt3QkFDZCxVQUFVO2dDQUdELElBQUksWUFBWSxFQUFROzhCQUMxQixJQUFJLFlBQVksRUFBUTtzQkFLL0IsSUFBSSxTQUFTLEVBQUU7dUJBQ2QsSUFBSSxTQUFTLEVBQUU7S0FFeUI7Ozs7SUFFN0QsSUFBSSxLQUFLO1FBQ1AsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7S0FDcEI7Ozs7O0lBRUQsSUFDSSxLQUFLLENBQUMsR0FBYztRQUN0QixJ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Z0I7S0FDdEI7Ozs7O0lBRUQsT0FBTyxDQUFDLEtBQWdCO1FBQ3RCLElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO1FBQ3JCLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1lBQ2pCLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztTQUNoQjtLQUNGOzs7WUE3SUYsU0FBUyxTQUFDO2dCQUNULFFBQVEsRUFBRSxjQUFjO2dCQUN4QixRQUFRLEVBQUU7Ozs7Ozs7Ozs7Q0FVWDtnQkFDQyxNQUFNLEVBQUUsQ0FBQywyVEFBMlQsQ0FBQztnQkFDclUsZUFBZSxFQUFFLHVCQUF1QixDQUFDLE1BQU07Z0JBQy9DLFNBQVMsRUFBRSxDQUFDLGtCQUFrQixDQUFDO2FBQ2hDOzs7O1lBN0JnRyxpQkFBaUI7OztxQkFnQy9HLEtBQUs7a0JBQ0wsS0FBSztrQkFDTCxLQUFLO3NCQUNMLEtBQUs7eUJBQ0wsS0FBSzt1QkFDTCxLQUFLO3dCQUNMLEtBQUs7c0JBQ0wsS0FBSzsrQkFDTCxNQUFNOzZCQUNOLE1BQU07OEJBQ04sU0FBUyxTQUFDLFdBQVc7NEJBQ3JCLFNBQVMsU0FBQyxTQUFTO29CQVluQixLQUFLIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENvbXBvbmVudCwgZm9yd2FyZFJlZiwgSW5wdXQsIFZpZXdDaGlsZCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIENoYW5nZURldGVjdG9yUmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBOR19WQUxVRV9BQ0NFU1NPUiB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcclxuXHJcbmltcG9ydCB7IERhdGVwaWNrZXJDb21wb25lbnQgfSBmcm9tICcuLi9kYXRlcGlja2VyLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IERhdGVSYW5nZSB9IGZyb20gJy4uLy4uLy4uL3NoYXJlZC9kYXRlJztcclxuaW1wb3J0IHsgYnVpbGQgfSBmcm9tICcuLi8uLi8uLi9zaGFyZWQvdXRpbHMnO1xyXG5cclxuZXhwb3J0IGNvbnN0IERBVEVSQU5HRV9BQ0NFU1NPUjogYW55ID0ge1xyXG4gIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxyXG4gIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IERhdGVyYW5nZUNvbXBvbmVudCksXHJcbiAgbXVsdGk6IHRydWVcclxufTtcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnaXUtZGF0ZXJhbmdlJyxcclxuICB0ZW1wbGF0ZTogYDxkaXYgY2xhc3M9XCJkYXRlcmFuZ2VcIj5cclxuICA8ZGl2IGNsYXNzPVwic3RhcnQtZGF0ZVwiIFtjbGFzcy5kYXRlXT1cIiFpbmxpbmVcIiBbY2xhc3MuaW5saW5lLWRhdGVdPVwiaW5saW5lXCI+XHJcbiAgICA8bGFiZWwgY2xhc3M9XCJsYmwtZGF0ZSBpdS1wcmltYXJ5XCI+e3sgc3RhcnRMYWJlbCB9fTo8L2xhYmVsPlxyXG4gICAgPGl1LWRhdGVwaWNrZXIgI3N0YXJ0RGF0ZSAoc2VsZWN0ZWRDaGFuZ2VkKT1cImNoYW5nZVN0YXJ0RGF0ZSgkZXZlbnQpXCIgW3ZhbHVlXT1cInN0YXJ0RGF0ZVZhbHVlXCI+PC9pdS1kYXRlcGlja2VyPlxyXG4gIDwvZGl2PlxyXG4gIDxkaXYgY2xhc3M9XCJlbmQtZGF0ZVwiIFtjbGFzcy5kYXRlXT1cIiFpbmxpbmVcIiBbY2xhc3MuaW5saW5lLWRhdGVdPVwiaW5saW5lXCI+XHJcbiAgICA8bGFiZWwgY2xhc3M9XCJsYmwtZGF0ZSBpdS1wcmltYXJ5XCI+e3sgZW5kTGFiZWwgfX06PC9sYWJlbD5cclxuICAgIDxpdS1kYXRlcGlja2VyICNlbmREYXRlIChzZWxlY3RlZENoYW5nZWQpPVwiY2hhbmdlRW5kRGF0ZSgkZXZlbnQpXCIgW3ZhbHVlXT1cImVuZERhdGVWYWx1ZVwiPjwvaXUtZGF0ZXBpY2tlcj5cclxuICA8L2Rpdj5cclxuPC9kaXY+XHJcbmAsXHJcbiAgc3R5bGVzOiBbYC5kYXRlcmFuZ2V7ZGlzcGxheTppbmxpbmUtYmxvY2s7bGluZS1oZWlnaHQ6MThweDtwYWRkaW5nOjAgMTBweDtib3JkZXItcmFkaXVzOjNweH0uZGF0ZXJhbmdlIC5kYXRle2Rpc3BsYXk6ZmxleDtwYWRkaW5nOjZweH0uZGF0ZXJhbmdlIC5pbmxpbmUtZGF0ZXtkaXNwbGF5OmlubGluZS1mbGV4O3BhZGRpbmc6MH0uZGF0ZXJhbmdlIC5pbmxpbmUtZGF0ZS5lbmQtZGF0ZXttYXJnaW4tbGVmdDozMnB4fS5kYXRlcmFuZ2UgLmxibC1kYXRle3dpZHRoOjc2cHg7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjE0cHg7cGFkZGluZy10b3A6MjJweH1gXSxcclxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcclxuICBwcm92aWRlcnM6IFtEQVRFUkFOR0VfQUNDRVNTT1JdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBEYXRlcmFuZ2VDb21wb25lbnQgaW1wbGVtZW50cyBDb250cm9sVmFsdWVBY2Nlc3NvciB7XHJcblxyXG4gIEBJbnB1dCgpIGlubGluZSA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpIG1pbjogRGF0ZTtcclxuICBASW5wdXQoKSBtYXg6IERhdGU7XHJcbiAgQElucHV0KCkgc3RhcnRBdDogRGF0ZTtcclxuICBASW5wdXQoKSBzdGFydExhYmVsID0gJ1N0YXJ0IERhdGUnO1xyXG4gIEBJbnB1dCgpIGVuZExhYmVsID0gJ0VuZCBEYXRlJztcclxuICBASW5wdXQoKSBzdGFydFZpZXc7XHJcbiAgQElucHV0KCkgdG91Y2hVaTtcclxuICBAT3V0cHV0KCkgc3RhcnREYXRlQ2hhbmdlZCA9IG5ldyBFdmVudEVtaXR0ZXI8RGF0ZT4oKTtcclxuICBAT3V0cHV0KCkgZW5kRGF0ZUNoYW5nZWQgPSBuZXcgRXZlbnRFbWl0dGVyPERhdGU+KCk7XHJcbiAgQFZpZXdDaGlsZCgnc3RhcnREYXRlJykgc3RhcnREYXRlcGlja2VyOiBEYXRlcGlja2VyQ29tcG9uZW50O1xyXG4gIEBWaWV3Q2hpbGQoJ2VuZERhdGUnKSBlbmREYXRlcGlja2VyOiBEYXRlcGlja2VyQ29tcG9uZW50O1xyXG4gIHByaXZhdGUgb25Nb2RlbENoYW5nZTogRnVuY3Rpb247XHJcbiAgcHJpdmF0ZSBvblRvdWNoOiBGdW5jdGlvbjtcclxuICBfdmFsdWU6IERhdGVSYW5nZSA9IG5ldyBEYXRlUmFuZ2UoKTtcclxuICBmb2N1c2VkOiBEYXRlUmFuZ2UgPSBuZXcgRGF0ZVJhbmdlKCk7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgY2hhbmdlRGV0ZWN0b3JSZWY6IENoYW5nZURldGVjdG9yUmVmKSB7IH1cclxuXHJcbiAgZ2V0IHZhbHVlKCk6IERhdGVSYW5nZSB7XHJcbiAgICByZXR1cm4gdGhpcy5fdmFsdWU7XHJcbiAgfVxyXG5cclxuICBASW5wdXQoKVxyXG4gIHNldCB2YWx1ZSh2YWw6IERhdGVSYW5nZSkge1xyXG4gICAgdGhpcy5fdmFsdWUgPSB2YWw7XHJcbiAgICBpZiAodGhpcyAmJiB0aGlzLmNoYW5nZURldGVjdG9yUmVmICYmICF0aGlzLmNoYW5nZURldGVjdG9yUmVmWydkZXN0cm95ZWQnXSkge1xyXG4gICAgICB0aGlzLmNoYW5nZURldGVjdG9yUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldCBzdGFydERhdGVJZCgpIHtcclxuICAgIHJldHVybiB0aGlzLnN0YXJ0RGF0ZXBpY2tlci5pZDtcclxuICB9XHJcblxyXG4gIGdldCBzdGFydERhdGVPcGVuZWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5zdGFydERhdGVwaWNrZXIub3BlbmVkO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGVuZERhdGVJZCgpIHtcclxuICAgIHJldHVybiB0aGlzLmVuZERhdGVwaWNrZXIuaWQ7XHJcbiAgfVxyXG5cclxuICBnZXQgZW5kRGF0ZU9wZW5lZCgpIHtcclxuICAgIHJldHVybiB0aGlzLmVuZERhdGVwaWNrZXIub3BlbmVkO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHN0YXJ0RGF0ZVZhbHVlKCk6IERhdGUge1xyXG4gICAgcmV0dXJuIHRoaXMudmFsdWUuc3RhcnREYXRlO1xyXG4gIH1cclxuXHJcbiAgc2V0IHN0YXJ0RGF0ZVZhbHVlKHZhbHVlOiBEYXRlKSB7XHJcbiAgICB0aGlzLmNoYW5nZVN0YXJ0RGF0ZSh2YWx1ZSk7XHJcbiAgfVxyXG5cclxuICBnZXQgZW5kRGF0ZVZhbHVlKCk6IERhdGUge1xyXG4gICAgcmV0dXJuIHRoaXMudmFsdWUuZW5kRGF0ZTtcclxuICB9XHJcblxyXG4gIHNldCBlbmREYXRlVmFsdWUodmFsdWU6IERhdGUpIHtcclxuICAgIHRoaXMuY2hhbmdlRW5kRGF0ZSh2YWx1ZSk7XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VTdGFydERhdGUoZGF0ZTogRGF0ZSkge1xyXG4gICAgdGhpcy5vbkNoYW5nZShidWlsZChEYXRlUmFuZ2UsIHtcclxuICAgICAgZW5kRGF0ZTogdGhpcy52YWx1ZS5lbmREYXRlLFxyXG4gICAgICBzdGFydERhdGU6IGRhdGVcclxuICAgIH0pKTtcclxuICAgIHRoaXMuc3RhcnREYXRlQ2hhbmdlZC5lbWl0KGRhdGUpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2VTdGFydERhdGUoKSB7XHJcbiAgICB0aGlzLnN0YXJ0RGF0ZXBpY2tlci5jbG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgb3BlblN0YXRlRGF0ZSgpIHtcclxuICAgIHRoaXMuc3RhcnREYXRlcGlja2VyLm9wZW4oKTtcclxuICB9XHJcblxyXG4gIGNoYW5nZUVuZERhdGUoZGF0ZTogRGF0ZSkge1xyXG4gICAgdGhpcy5vbkNoYW5nZShidWlsZChEYXRlUmFuZ2UsIHtcclxuICAgICAgZW5kRGF0ZTogZGF0ZSxcclxuICAgICAgc3RhcnREYXRlOiB0aGlzLnZhbHVlLnN0YXJ0RGF0ZVxyXG4gICAgfSkpO1xyXG4gICAgdGhpcy5lbmREYXRlQ2hhbmdlZC5lbWl0KGRhdGUpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2VFbmREYXRlKCkge1xyXG4gICAgdGhpcy5lbmREYXRlcGlja2VyLmNsb3NlKCk7XHJcbiAgfVxyXG5cclxuICBvcGVuRW5kRGF0ZSgpIHtcclxuICAgIHRoaXMuZW5kRGF0ZXBpY2tlci5vcGVuKCk7XHJcbiAgfVxyXG5cclxuICByZWdpc3Rlck9uQ2hhbmdlKGZuOiBGdW5jdGlvbikge1xyXG4gICAgdGhpcy5vbk1vZGVsQ2hhbmdlID0gZm47XHJcbiAgfVxyXG5cclxuICByZWdpc3Rlck9uVG91Y2hlZChmbjogRnVuY3Rpb24pIHtcclxuICAgIHRoaXMub25Ub3VjaCA9IGZuO1xyXG4gIH1cclxuXHJcbiAgd3JpdGVWYWx1ZSh2YWx1ZTogRGF0ZVJhbmdlKSB7XHJcbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgfVxyXG5cclxuICBvbkNoYW5nZSh2YWx1ZTogRGF0ZVJhbmdlKSB7XHJcbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICBpZiAodGhpcy5vbk1vZGVsQ2hhbmdlKSB7XHJcbiAgICAgIHRoaXMub25Nb2RlbENoYW5nZSh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbkJsdXIodmFsdWU6IERhdGVSYW5nZSkge1xyXG4gIH1cclxuXHJcbiAgb25Gb2N1cyh2YWx1ZTogRGF0ZVJhbmdlKSB7XHJcbiAgICB0aGlzLmZvY3VzZWQgPSB2YWx1ZTtcclxuICAgIGlmICh0aGlzLm9uVG91Y2gpIHtcclxuICAgICAgdGhpcy5vblRvdWNoKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufVxyXG4iXX0=
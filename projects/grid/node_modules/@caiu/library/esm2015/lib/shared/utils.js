/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { Metadata } from './models';
/**
 * @param {?} derived
 * @param {?} baseCtors
 * @return {?}
 */
export function applyDecorators(derived, baseCtors) {
    baseCtors.forEach(baseCtor => {
        Object.getOwnPropertyNames(baseCtor.prototype).forEach(name => {
            derived[name] = baseCtor.prototype[name];
        });
    });
}
/**
 * @param {?} derivedCtor The clas Constructor
 * @param {?} baseCtors
 * @return {?}
 */
export function applyMixins(derivedCtor, baseCtors) {
    baseCtors.forEach(baseCtor => {
        Object.getOwnPropertyNames(baseCtor.prototype).forEach(name => {
            derivedCtor.prototype[name] = baseCtor.prototype[name];
        });
    });
}
/**
 * Find distinct elements in the union of 2 arrays.
 * @param {?} array1
 * @param {?} array2
 * @return {?}
 */
export function arrayUnion(array1, array2) {
    const /** @type {?} */ a = [...array1, ...array2];
    for (let /** @type {?} */ i = 0; i < a.length; ++i) {
        for (let /** @type {?} */ j = i + 1; j < a.length; ++j) {
            if (a[i] === a[j]) {
                a.splice(j--, 1);
            }
        }
    }
    return a;
}
/**
 * @param {?} target
 * @param {?} props
 * @return {?}
 */
export function assignProps(target, props) {
    Object.keys(props).forEach(key => {
        if (target[key]) {
            target[key] = props[key];
        }
    });
}
/**
 * @template T
 * @param {?} ctor
 * @param {...?} args
 * @return {?}
 */
export function build(ctor, ...args) {
    const /** @type {?} */ instance = new ctor();
    return args.reduce((acc, next) => {
        let /** @type {?} */ ret;
        try {
            ret = Object.assign(acc, next);
        }
        catch (/** @type {?} */ e) {
            console.warn(e);
            ret = acc;
        }
        finally {
            return ret;
        }
    }, instance);
}
/**
 * @param {?} a
 * @param {?} b
 * @return {?}
 */
export function compareDates(a, b) {
    return new Date(b).getTime() - new Date(a).getTime();
}
/**
 * @param {?} a
 * @param {?} b
 * @return {?}
 */
export function compareNumbers(a, b) {
    return a - b;
}
/**
 * @param {?} a
 * @param {?} b
 * @return {?}
 */
export function compareStrings(a, b) {
    const /** @type {?} */ x = a.toLowerCase();
    const /** @type {?} */ y = b.toLowerCase();
    if (x < y) {
        return -1;
    }
    else if (x > y) {
        return 1;
    }
    return 0;
}
/**
 * @param {?} arr
 * @param {?=} key
 * @return {?}
 */
export function distinct(arr, key = '') {
    return key ? arr.reduce((acc, x) => acc.findIndex(y => y[key] === x[key]) === -1 ? [...acc, x] : acc, [])
        : arr.reduce((acc, x) => acc.indexOf(x) === -1 ? [...acc, x] : acc, []);
}
/**
 * @param {?} x1
 * @param {?} x2
 * @return {?}
 */
export function equals(x1, x2) {
    // check whether x1 and x2 have the same type
    if (typeof (x1) !== typeof (x2)) {
        return false;
    }
    // check whether x1 and x2 are both null or both undefined
    if ((x1 === null && x2 === null) || (x1 === undefined && x2 === undefined)) {
        return true;
    }
    // account for non-matching null and undefined values
    if (((x1 === null || x1 === undefined) && x2 !== null && x2 !== undefined)
        || ((x2 === null || x2 === undefined) && x1 !== null && x1 !== undefined)) {
        return false;
    }
    // compare two arrays
    if (Array.isArray(x1) && Array.isArray(x2) && x1.length === x2.length) {
        return x1.findIndex((x, index) => !equals(x, x2[index])) === -1 ? true : false;
    }
    // compare two objects
    if (x1 && typeof (x1) === 'object' && typeof (x2) === 'object'
        && Object.keys(x1).length === Object.keys(x2).length
        && Object.keys(x2).length === arrayUnion(Object.keys(x1), Object.keys(x2)).length) {
        return Object.keys(x1).findIndex(key => !equals(x1[key], x2[key])) === -1;
    }
    // compare two primitives with the same type
    return x1 === x2;
}
/**
 * Extends an object with the *enumerable* and *own* properties of one or more source objects,
 * similar to Object.assign.
 *
 * @param {?} dest The object which will have properties copied to it.
 * @param {...?} sources The source objects from which properties will be copied.
 * @return {?}
 */
export function extendObject(dest, ...sources) {
    if (dest == null) {
        throw TypeError('Cannot convert undefined or null to object');
    }
    for (const /** @type {?} */ source of sources) {
        if (source != null) {
            for (const /** @type {?} */ key in source) {
                if (source.hasOwnProperty(key)) {
                    dest[key] = source[key];
                }
            }
        }
    }
    return dest;
}
/**
 * @param {?} value
 * @return {?}
 */
export function falsy(value) {
    return value === null || value === 0 || value === '' || value === undefined;
}
/**
 * Remove problematic or undesired store properties.
 * @param {?} obj
 * @return {?}
 */
export function filterState(obj) {
    return removeCycles(removeProps(obj));
}
/**
 * @param {?} ctor
 * @return {?}
 */
export function findMetadata(ctor) {
    const /** @type {?} */ instance = new ctor();
    return instance && instance.metadata ? instance.metadata : new Metadata();
}
/**
 * @return {?}
 */
export function findSchoolYear() {
    const /** @type {?} */ date = new Date();
    const /** @type {?} */ year = date.getFullYear();
    const /** @type {?} */ month = date.getMonth();
    return month >= 7 ? `${year}-${year + 1}` : `${year - 1}-${year}`;
}
/**
 * @param {?} obj
 * @param {?} parents
 * @return {?}
 */
export function flattenKeys(obj, parents) {
    return Object.keys(obj).reduce((acc, key) => {
        const /** @type {?} */ pathToRoot = [...parents, key];
        const /** @type {?} */ val = obj[key];
        if (!Array.isArray(val) && Object.keys(val).length > 0) {
            return [...acc, ...flattenKeys(val, pathToRoot)];
        }
        return [...acc, ...pathToRoot];
    }, []);
}
/**
 * @param {?=} number
 * @return {?}
 */
export function formatPhoneNumber(number = '') {
    if (!number) {
        return '000-000-0000';
    }
    const /** @type {?} */ l = number.length;
    return number && (l === 7 || l === 10) ?
        l === 7 ? format7DigitPhoneNumber(number)
            : format10DigitPhoneNumber(number)
        : '000-000-0000';
}
/**
 * @param {?=} number
 * @return {?}
 */
export function format7DigitPhoneNumber(number = '0000000') {
    const /** @type {?} */ first3 = number.substring(0, 3);
    const /** @type {?} */ last4 = number.substring(3, 7);
    return `${first3} -${last4} `;
}
/**
 * @param {?=} number
 * @return {?}
 */
export function format10DigitPhoneNumber(number = '0000000000') {
    const /** @type {?} */ first3 = number.substring(0, 3);
    const /** @type {?} */ last7 = format7DigitPhoneNumber(number.substring(3, 10));
    return `${first3} -${last7} `;
}
/**
 * @param {?} total
 * @return {?}
 */
export function formatPrice(total) {
    const /** @type {?} */ dollars = total.toFixed(2).replace(/./g, function (c, i, a) {
        return i && c !== '.' && ((a.length - i) % 3 === 0) ? ',' + c : c;
    });
    return `$${dollars}`;
}
/**
 * @param {?} type
 * @return {?}
 */
export function getTypeNameForDebugging(type) {
    return type['name'] || typeof type;
}
/**
 * @param {?} obj
 * @return {?}
 */
export function getAllProps(obj) {
    const /** @type {?} */ mapped = obj['metadata'] && obj['metadata']['include'] && Array.isArray(obj['metadata']['include']) ?
        obj['metadata']['include'].reduce((acc, key) => Object.assign({}, acc, { [key]: obj[key] }), {}) : obj;
    if (obj['metadata'] && obj['metadata']['exclude'] && Array.isArray(obj['metadata']['exclude'])) {
        obj['metadata']['exclude'].forEach(key => {
            delete mapped[key];
        });
    }
    return [...Object.keys(mapped), ...getGetters(mapped)];
}
/**
 * @param {?} obj
 * @return {?}
 */
export function getGetters(obj) {
    return Object.keys(obj.constructor.prototype).filter(name => {
        return typeof Object.getOwnPropertyDescriptor(obj.constructor.prototype, name)['get'] === 'function';
    });
}
/**
 * @param {?} model
 * @return {?}
 */
export function getKeyValues(model) {
    const /** @type {?} */ keys = getAllProps(model);
    return model['metadata'] && model['metadata']['include'] ?
        toArray(model['metadata']['include']).reduce((acc, key) => Object.assign({}, acc, { [key]: model[key] }), {})
        : keys.reduce((acc, key) => Object.assign({}, acc, { [key]: model[key] }), {});
}
/**
 * @param {?} obj
 * @return {?}
 */
export function getSetters(obj) {
    return Object.keys(obj.prototype).filter(name => {
        return typeof Object.getOwnPropertyDescriptor(obj.prototype, name)['set'] === 'function';
    });
}
/**
 * @param {?} el
 * @param {?} styleProp
 * @return {?}
 */
export function getStyle(el, styleProp) {
    let /** @type {?} */ value;
    const /** @type {?} */ defaultView = el.ownerDocument.defaultView;
    // W3C standard way:
    if (defaultView && defaultView.getComputedStyle) {
        // sanitize property name to css notation (hypen separated words eg. font-Size)
        styleProp = styleProp.replace(/([A-Z])/g, '-$1').toLowerCase();
        return defaultView.getComputedStyle(el, null).getPropertyValue(styleProp);
    }
    else if (el['currentStyle']) {
        // IE
        // sanitize property name to camelCase
        styleProp = styleProp.replace(/\-(\w)/g, function (str, letter) {
            return letter.toUpperCase();
        });
        value = el['currentStyle'][styleProp];
        return value;
    }
    return '';
}
/**
 * @param {?} model
 * @return {?}
 */
export function getValue(model) {
    if (model === null || typeof (model) === 'string' || typeof (model) === 'string' || model instanceof Date) {
        return model;
    }
    const /** @type {?} */ keys = getAllProps(model);
    const /** @type {?} */ props = keys.filter(key => key !== 'metadata' && !ignoreKey(model, key))
        .map(key => {
        const /** @type {?} */ obj = {};
        obj[key] = model[key] && typeof model[key] === 'object' ?
            (Array.isArray(model[key]) ?
                (model[key].length > 0 ?
                    model[key].map(x => (typeof x === 'object' ? getValue(x) : x)) : [])
                : getValue(model[key])) : model[key];
        return obj;
    });
    return props.reduce((acc, val) => {
        return Object.assign({}, acc, val);
    }, {});
}
/**
 * @return {?}
 */
export function guid() {
    /**
     * @return {?}
     */
    function s4() {
        return Math.floor((1 + Math.random()) * 0x10000)
            .toString(16)
            .substring(1);
    }
    return s4() + s4() + '-' + s4() + '-' + s4() + '-' +
        s4() + '-' + s4() + s4() + s4();
}
/**
 * @param {?} changes
 * @param {?} key
 * @param {?} props
 * @return {?}
 */
export function hasChanged(changes, key, props) {
    const /** @type {?} */ currentValue = changes[key] && changes[key].currentValue ? changes[key].currentValue : {};
    const /** @type {?} */ previousValue = changes[key] && changes[key].previousValue ? changes[key].previousValue : {};
    return props.reduce((acc, prop) => {
        return acc ? true : currentValue[prop] !== previousValue[prop];
    }, false);
}
/**
 * @param {?} changes
 * @param {?} key
 * @return {?}
 */
export function idChanged(changes, key) {
    const /** @type {?} */ newId = changes[key].currentValue ? changes[key].currentValue['id'] || 0 : 0;
    const /** @type {?} */ oldId = changes[key].previousValue ? changes[key].previousValue['id'] || 0 : 0;
    return newId !== oldId;
}
/**
 * @param {?} model
 * @param {?} key
 * @return {?}
 */
export function ignoreKey(model, key) {
    if (model['metadata'] && model['metadata']['ignore']) {
        return inArray(model['metadata']['ignore'], key);
    }
    return false;
}
/**
 * @param {?} arr
 * @param {?} val
 * @return {?}
 */
export function inArray(arr, val) {
    return arr.filter(item => item === val).length > 0;
}
/**
 * @param {?} arr
 * @param {?} val
 * @param {?} key
 * @return {?}
 */
export function inArrayByKey(arr, val, key) {
    return arr.findIndex(item => item[key] === val) !== -1;
}
/**
 * @param {?} n
 * @return {?}
 */
export function integerArray(n) {
    return Array.from(Array(n).keys());
}
/**
 * @param {?} dateFrom
 * @param {?} dateTo
 * @param {?} dateCheck
 * @return {?}
 */
export function isBetweenDates(dateFrom, dateTo, dateCheck) {
    const /** @type {?} */ d1 = dateFrom.toLocaleDateString().split('/');
    const /** @type {?} */ d2 = dateTo.toLocaleDateString().split('/');
    const /** @type {?} */ c = dateCheck.toLocaleDateString().split('/');
    const /** @type {?} */ from = new Date(d1[2], toInt(d1[1]) - 1, d1[0]); // -1 because months are from 0 to 11
    const /** @type {?} */ to = new Date(d2[2], toInt(d2[1]) - 1, d2[0]);
    const /** @type {?} */ check = new Date(c[2], toInt(c[1]) - 1, c[0]);
    return (check >= from && check <= to);
}
/**
 * Detects cycles in an object.
 * @param {?} obj
 * @return {?}
 */
export function isCyclic(obj) {
    const /** @type {?} */ seenObjects = [];
    const /** @type {?} */ detect = (x) => {
        if (x && typeof x === 'object') {
            if (seenObjects.indexOf(x) !== -1) {
                return true;
            }
            seenObjects.push(x);
            for (const /** @type {?} */ key in x) {
                if (x.hasOwnProperty(key) && detect(x[key])) {
                    return true;
                }
            }
        }
        return false;
    };
    return detect(obj);
}
/**
 * @param {?} fromState The last state object from the store
 * @param {?} dState A partial class containing all properties that have changed wrt fromState
 * @return {?} The current/updated state of the application (toState)
 */
export function nextState(fromState, dState) {
    const /** @type {?} */ toState = Object.assign({}, fromState, dState);
    return toState;
}
/**
 * @param {?} n
 * @return {?}
 */
export function positiveIntegerArray(n) {
    return integerArray(n).map(x => x + 1);
}
/**
 * Remove store props that contain cycles.
 * @param {?} obj
 * @return {?}
 */
export function removeCycles(obj) {
    if (obj && typeof obj === 'object') {
        for (const /** @type {?} */ key in obj) {
            if (obj.hasOwnProperty(key) && isCyclic(obj[key])) {
                delete obj[key];
            }
        }
    }
    return obj;
}
/**
 * Remove any props that should not appear in the store.
 * @param {?} obj
 * @return {?}
 */
export function removeProps(obj) {
    return obj;
}
/**
 * @param {?} model
 * @return {?}
 */
export function serialize(model) {
    if (Array.isArray(model)) {
        return model.map(x => serialize(x));
    }
    if (model.serialize && typeof model.serialize === 'function') {
        return serialize(model.serialize());
    }
    if (model === null || typeof (model) === 'number' || typeof (model) === 'string' || model instanceof Date) {
        return model;
    }
    const /** @type {?} */ keys = getAllProps(model);
    if (keys.length === 0) {
        return model;
    }
    return keys.reduce((acc, key) => {
        let /** @type {?} */ val = null;
        if (model[key] !== null && typeof (model[key]) === 'object' && !(model[key] instanceof Date)) {
            if (model[key].serialize && typeof model[key].serialize === 'function') {
                val = model[key].serialize();
            }
            else {
                val = serialize(model[key]);
            }
        }
        else {
            val = model[key];
        }
        return Object.assign({}, acc, {
            [key]: val
        });
    }, {});
}
/**
 * @param {?} token
 * @return {?}
 */
export function stringify(token) {
    if (typeof token === 'string') {
        return token;
    }
    if (token == null) {
        return '' + token;
    }
    if (token.overriddenName) {
        return `${token.overriddenName}`;
    }
    if (token.name) {
        return `${token.name}`;
    }
    const /** @type {?} */ res = token.toString();
    const /** @type {?} */ newLineIndex = res.indexOf('\n');
    return newLineIndex === -1 ? res : res.substring(0, newLineIndex);
}
/**
 * @param {?} str
 * @return {?}
 */
export function str2CharCode(str) {
    return str.charCodeAt(0);
}
/**
 * @param {?} str
 * @return {?}
 */
export function str2Id(str) {
    const /** @type {?} */ charCodes = str ? str.split('').reduce((acc, x) => `${acc}${str2CharCode(x)}`, '') : '';
    return toInt(charCodes);
}
/**
 * @param {?} str
 * @return {?}
 */
export function str2int(str) {
    return parseInt(str, 10);
}
/**
 * @param {?} strArray
 * @return {?}
 */
export function strArray2Id(strArray) {
    const /** @type {?} */ str = strArray.reduce((acc, x) => `${acc}${x}`, '');
    return str2Id(str);
}
/**
 * @param {?} errorName
 * @param {?} errorMessage
 * @return {?}
 */
export function throwException(errorName, errorMessage) {
    throw {
        name: errorName,
        level: 'Show Stopper',
        message: errorMessage,
        htmlMessage: 'Error detected. Please contact the <a href=\'mailto:agendamanager@caiu.com\'>system administrator</a>.',
        toString: function () { return errorName + ': ' + errorMessage; }
    };
}
/**
 * @return {?}
 */
export function throwNotImplementedException() {
    throwException('Not Implemented', 'Not Implemented');
}
/**
 * @param {?} val
 * @return {?}
 */
export function toArray(val) {
    return val ? (Array.isArray(val) ? val : [val]) : [];
}
/**
 * @param {?} val
 * @return {?}
 */
export function toInt(val) {
    return val && val.toString ? str2int(val.toString()) : 0;
}
/**
 * @param {?} action
 * @return {?}
 */
export function toPayload(action) {
    return action ? action.payload : null;
}
/**
 * @param {?} n
 * @return {?}
 */
export function toPx(n) {
    return `${n}px`;
}
/**
 * @param {?} value
 * @return {?}
 */
export function truthy(value) {
    return !falsy(value);
}
/**
 * @param {?} obj
 * @param {?} type
 * @return {?}
 */
export function tryCast(obj, type) {
    const /** @type {?} */ retObj = new type();
    for (const /** @type {?} */ key in obj) {
        if (typeof (retObj[key]) !== 'undefined') {
            retObj[key] = obj[key];
        }
    }
    return retObj;
}
/**
 * @param {?} changes
 * @param {?=} key
 * @return {?}
 */
export function valueChanged(changes, key = '') {
    return key ? changes[key].currentValue !== changes[key].previousValue
        : Object.keys(changes).reduce((acc, currentKey) => {
            return acc ? true : changes[currentKey].currentValue !== changes[currentKey].previousValue;
        }, false);
}
/**
 * @param {?} value
 * @param {?} formValue
 * @return {?}
 */
export function valueEquals(value, formValue) {
    return equals(getValue(value), formValue);
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AY2FpdS9saWJyYXJ5LyIsInNvdXJjZXMiOlsibGliL3NoYXJlZC91dGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBRUEsT0FBTyxFQUFFLFFBQVEsRUFBNEMsTUFBTSxVQUFVLENBQUM7Ozs7OztBQVE5RSxNQUFNLDBCQUEwQixPQUFZLEVBQUUsU0FBZ0I7SUFDMUQsU0FBUyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRTtRQUN6QixNQUFNLENBQUMsbUJBQW1CLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRTtZQUMxRCxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsUUFBUSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUM1QyxDQUFDLENBQUM7S0FDTixDQUFDLENBQUM7Q0FDTjs7Ozs7O0FBT0QsTUFBTSxzQkFBc0IsV0FBZ0IsRUFBRSxTQUFnQjtJQUMxRCxTQUFTLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxFQUFFO1FBQ3pCLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQzFELFdBQVcsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEdBQUcsUUFBUSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUMxRCxDQUFDLENBQUM7S0FDTixDQUFDLENBQUM7Q0FDTjs7Ozs7OztBQU9ELE1BQU0scUJBQXFCLE1BQU0sRUFBRSxNQUFNO0lBQ3JDLHVCQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsTUFBTSxFQUFFLEdBQUcsTUFBTSxDQUFDLENBQUM7SUFDakMsR0FBRyxDQUFDLENBQUMscUJBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDO1FBQ2hD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Q0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQ3JFLENBQUMsQ0FBQztJQUNILE1BQU0sQ0FBQyxJQUFJLE9BQU8sRUFBRSxDQUFDO0NBQ3hCOzs7OztBQUVELE1BQU0sa0NBQWtDLElBQVM7SUFDN0MsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxPQUFPLElBQUksQ0FBQztDQUN0Qzs7Ozs7QUFFRCxNQUFNLHNCQUFzQixHQUFRO0lBQ2hDLHVCQUFNLE1BQU0sR0FBRyxHQUFHLENBQUMsVUFBVSxDQUFDLElBQUksR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2RyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7SUFFM0csRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxTQUFTLENBQUMsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM3RixHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFO1lBQ3JDLE9BQU8sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQ3RCLENBQUMsQ0FBQztLQUNOO0lB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QUcsR0FBRyxFQUFFO0lBQ3pELE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxZQUFZLEtBQUssT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLGFBQWE7UUFDakUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxFQUFFLFVBQVUsRUFBRSxFQUFFO1lBQzlDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDLFlBQVksS0FBSyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUMsYUFBYSxDQUFDO1NBQzlGLEVBQUUsS0FBSyxDQUFDLENBQUM7Q0FDakI7Ozs7OztBQUVELE1BQU0sc0JBQXNCLEtBQUssRUFBRSxTQUFTO0lBQ3hDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0NBQzdDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2ltcGxlQ2hhbmdlcyB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5cclxuaW1wb3J0IHsgTWV0YWRhdGEsIERpY3Rpb25hcnksIFR5cGVDb25zdHJ1Y3RvciwgSGFzTWV0YWRhdGEgfSBmcm9tICcuL21vZGVscyc7XHJcbmltcG9ydCB7IEFjdGlvbiB9IGZyb20gJy4uL3N0b3JlL21vZGVscyc7XHJcblxyXG4vKipcclxuICogQHBhcmFtIGRlcml2ZWRDdG9yIFRoZSBjbGFzIENvbnN0cnVjdG9yXHJcbiAqIEBwYXJhbSBiYXNlQ3RvciBUaGUgbWl4aW5zIHRvIGFwcGx5XHJcbiAqIEV4YW1wbGUgVXNhZ2U6IGFwcGx5TWl4aW5zKFVuaXZlcnNpdHlQcm9mZXNzb3IsIFtFbXBsb3llZSwgUmVzZWFyY2hlcl0pXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlEZWNvcmF0b3JzKGRlcml2ZWQ6IGFueSwgYmFzZUN0b3JzOiBhbnlbXSkge1xyXG4gICAgYmFzZUN0b3JzLmZvckVhY2goYmFzZUN0b3IgPT4ge1xyXG4gICAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGJhc2VDdG9yLnByb3RvdHlwZSkuZm9yRWFjaChuYW1lID0+IHtcclxuICAgICAgICAgICAgZGVyaXZlZFtuYW1lXSA9IGJhc2VDdG9yLnByb3RvdHlwZVtuYW1lXTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogQHBhcmFtIGRlcml2ZWRDdG9yIFRoZSBjbGFzIENvbnN0cnVjdG9yXHJcbiAqIEBwYXJhbSBiYXNlQ3RvciBUaGUgbWl4aW5zIHRvIGFwcGx5XHJcbiAqIEV4YW1wbGUgVXNhZ2U6IGFwcGx5TWl4aW5zKFVuaXZlcnNpdHlQcm9mZXNzb3IsIFtFbXBsb3llZSwgUmVzZWFyY2hlcl0pXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlNaXhpbnMoZGVyaXZlZEN0b3I6IGFueSwgYmFzZUN0b3JzOiBhbnlbXSkge1xyXG4gICAgYmFzZUN0b3JzLmZvckVhY2goYmFzZUN0b3IgPT4ge1xyXG4gICAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGJhc2VDdG9yLnByb3RvdHlwZSkuZm9yRWFjaChuYW1lID0+IHtcclxuICAgICAgICAgICAgZGVyaXZlZEN0b3IucHJvdG90eXBlW25hbWVdID0gYmFzZUN0b3IucHJvdG90eXBlW25hbWVdO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBGaW5kIGRpc3RpbmN0IGVsZW1lbnRzIGluIHRoZSB1bmlvbiBvZiAyIGFycmF5cy5cclxuICogQHBhcmFtIGFycmF5MVxyXG4gKiBAcGFyYW0gYXJyYXkyXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYXJyYXlVbmlvbihhcnJheTEsIGFycmF5Mikge1xyXG4gICAgY29uc3QgYSA9IFsuLi5hcnJheTEsIC4uLmFycmF5Ml07XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICBmb3IgKGxldCBqID0gaSArIDE7IGogPCBhLmxlbmd0aDsgKytqKSB7XHJcbiAgICAgICAgICAgIGlmIChhW2ldID09PSBhW2pdKSB7XHJcbiAgICAgICAgICAgICAgICBhLnNwbGljZShqLS0sIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBhO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYXNzaWduUHJvcHModGFyZ2V0OiBhbnksIHByb3BzOiBEaWN0aW9uYXJ5PGFueT4pIHtcclxuICAgIE9iamVjdC5rZXlzKHByb3BzKS5mb3JFYWNoKGtleSA9PiB7XHJcbiAgICAgICAgaWYgKHRhcmdldFtrZXldKSB7XHJcbiAgICAgICAgICAgIHRhcmdldFtrZXldID0gcHJvcHNba2V5XTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkPFQ+KGN0b3I6IFR5cGVDb25zdHJ1Y3RvcjxUPiwgLi4uYXJncyk6IFQge1xyXG4gICAgY29uc3QgaW5zdGFuY2UgPSBuZXcgY3RvcigpO1xyXG4gICAgcmV0dXJuIGFyZ3MucmVkdWNlKChhY2MsIG5leHQpID0+IHtcclxuICAgICAgICBsZXQgcmV0O1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldCA9IE9iamVjdC5hc3NpZ24oYWNjLCBuZXh0KTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihlKTtcclxuICAgICAgICAgICAgcmV0ID0gYWNjO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHtcclxuICAgICAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgICB9XHJcbiAgICB9LCBpbnN0YW5jZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjb21wYXJlRGF0ZXMoYTogRGF0ZSwgYjogRGF0ZSkge1xyXG4gICAgcmV0dXJuIG5ldyBEYXRlKGIpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEpLmdldFRpbWUoKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbXBhcmVOdW1iZXJzKGE6IG51bWJlciwgYjogbnVtYmVyKSB7XHJcbiAgICByZXR1cm4gYSAtIGI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjb21wYXJlU3RyaW5ncyhhOiBzdHJpbmcsIGI6IHN0cmluZykge1xyXG4gICAgY29uc3QgeCA9IGEudG9Mb3dlckNhc2UoKTtcclxuICAgIGNvbnN0IHkgPSBiLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBpZiAoeCA8IHkpIHtcclxuICAgICAgICByZXR1cm4gLTE7XHJcbiAgICB9IGVsc2UgaWYgKHggPiB5KSB7XHJcbiAgICAgICAgcmV0dXJuIDE7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gMDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRpc3RpbmN0KGFycjogYW55W10sIGtleSA9ICcnKTogYW55W10ge1xyXG4gICAgcmV0dXJuIGtleSA/IGFyci5yZWR1Y2UoKGFjYywgeCkgPT4gYWNjLmZpbmRJbmRleCh5ID0+IHlba2V5XSA9PT0geFtrZXldKSA9PT0gLTEgPyBbLi4uYWNjLCB4XSA6IGFjYywgW10pXHJcbiAgICAgICAgOiBhcnIucmVkdWNlKChhY2MsIHgpID0+IGFjYy5pbmRleE9mKHgpID09PSAtMSA/IFsuLi5hY2MsIHhdIDogYWNjLCBbXSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBlcXVhbHMoeDE6IGFueSwgeDI6IGFueSk6IGJvb2xlYW4ge1xyXG5cclxuICAgIC8vIGNoZWNrIHdoZXRoZXIgeDEgYW5kIHgyIGhhdmUgdGhlIHNhbWUgdHlwZVxyXG4gICAgaWYgKHR5cGVvZiAoeDEpICE9PSB0eXBlb2YgKHgyKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBjaGVjayB3aGV0aGVyIHgxIGFuZCB4MiBhcmUgYm90aCBudWxsIG9yIGJvdGggdW5kZWZpbmVkXHJcbiAgICBpZiAoKHgxID09PSBudWxsICYmIHgyID09PSBudWxsKSB8fCAoeDEgPT09IHVuZGVmaW5lZCAmJiB4MiA9PT0gdW5kZWZpbmVkKSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGFjY291bnQgZm9yIG5vbi1tYXRjaGluZyBudWxsIGFuZCB1bmRlZmluZWQgdmFsdWVzXHJcbiAgICBpZiAoKCh4MSA9PT0gbnVsbCB8fCB4MSA9PT0gdW5kZWZpbmVkKSAmJiB4MiAhPT0gbnVsbCAmJiB4MiAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgIHx8ICgoeDIgPT09IG51bGwgfHwgeDIgPT09IHVuZGVmaW5lZCkgJiYgeDEgIT09IG51bGwgJiYgeDEgIT09IHVuZGVmaW5lZCkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY29tcGFyZSB0d28gYXJyYXlzXHJcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh4MSkgJiYgQXJyYXkuaXNBcnJheSh4MikgJiYgeDEubGVuZ3RoID09PSB4Mi5sZW5ndGgpIHtcclxuXHJcbiAgICAgICAgcmV0dXJuIHgxLmZpbmRJbmRleCgoeCwgaW5kZXgpID0+ICFlcXVhbHMoeCwgeDJbaW5kZXhdKSkgPT09IC0xID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNvbXBhcmUgdHdvIG9iamVjdHNcclxuICAgIGlmICh4MSAmJiB0eXBlb2YgKHgxKSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mICh4MikgPT09ICdvYmplY3QnXHJcbiAgICAgICAgJiYgT2JqZWN0LmtleXMoeDEpLmxlbmd0aCA9PT0gT2JqZWN0LmtleXMoeDIpLmxlbmd0aFxyXG4gICAgICAgICYmIE9iamVjdC5rZXlzKHgyKS5sZW5ndGggPT09IGFycmF5VW5pb24oT2JqZWN0LmtleXMoeDEpLCBPYmplY3Qua2V5cyh4MikpLmxlbmd0aCkge1xyXG5cclxuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoeDEpLmZpbmRJbmRleChrZXkgPT4gIWVxdWFscyh4MVtrZXldLCB4MltrZXldKSkgPT09IC0xO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNvbXBhcmUgdHdvIHByaW1pdGl2ZXMgd2l0aCB0aGUgc2FtZSB0eXBlXHJcbiAgICByZXR1cm4geDEgPT09IHgyO1xyXG59XHJcblxyXG4vKipcclxuICogRXh0ZW5kcyBhbiBvYmplY3Qgd2l0aCB0aGUgKmVudW1lcmFibGUqIGFuZCAqb3duKiBwcm9wZXJ0aWVzIG9mIG9uZSBvciBtb3JlIHNvdXJjZSBvYmplY3RzLFxyXG4gKiBzaW1pbGFyIHRvIE9iamVjdC5hc3NpZ24uXHJcbiAqXHJcbiAqIEBwYXJhbSBkZXN0IFRoZSBvYmplY3Qgd2hpY2ggd2lsbCBoYXZlIHByb3BlcnRpZXMgY29waWVkIHRvIGl0LlxyXG4gKiBAcGFyYW0gc291cmNlcyBUaGUgc291cmNlIG9iamVjdHMgZnJvbSB3aGljaCBwcm9wZXJ0aWVzIHdpbGwgYmUgY29waWVkLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZE9iamVjdChkZXN0OiBhbnksIC4uLnNvdXJjZXM6IGFueVtdKTogYW55IHtcclxuICAgIGlmIChkZXN0ID09IG51bGwpIHtcclxuICAgICAgICB0aHJvdyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdCcpO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAoY29uc3Qgc291cmNlIG9mIHNvdXJjZXMpIHtcclxuICAgICAgICBpZiAoc291cmNlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc291cmNlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZXN0W2tleV0gPSBzb3VyY2Vba2V5XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZGVzdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGZhbHN5KHZhbHVlOiBhbnkpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gMCB8fCB2YWx1ZSA9PT0gJycgfHwgdmFsdWUgPT09IHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAgICogUmVtb3ZlIHByb2JsZW1hdGljIG9yIHVuZGVzaXJlZCBzdG9yZSBwcm9wZXJ0aWVzLlxyXG4gICAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyU3RhdGUob2JqOiBhbnkpOiBhbnkge1xyXG4gICAgcmV0dXJuIHJlbW92ZUN5Y2xlcyhyZW1vdmVQcm9wcyhvYmopKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGZpbmRNZXRhZGF0YShjdG9yOiBUeXBlQ29uc3RydWN0b3I8SGFzTWV0YWRhdGEgfCBhbnk+KSB7XHJcbiAgICBjb25zdCBpbnN0YW5jZSA9IG5ldyBjdG9yKCk7XHJcbiAgICByZXR1cm4gaW5zdGFuY2UgJiYgaW5zdGFuY2UubWV0YWRhdGEgPyBpbnN0YW5jZS5tZXRhZGF0YSA6IG5ldyBNZXRhZGF0YSgpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZmluZFNjaG9vbFllYXIoKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgIGNvbnN0IG1vbnRoID0gZGF0ZS5nZXRNb250aCgpO1xyXG4gICAgcmV0dXJuIG1vbnRoID49IDcgPyBgJHt5ZWFyfS0ke3llYXIgKyAxfWAgOiBgJHt5ZWFyIC0gMX0tJHt5ZWFyfWA7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZmxhdHRlbktleXMob2JqOiBPYmplY3QsIHBhcmVudHM6IHN0cmluZ1tdKTogYW55W10ge1xyXG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikucmVkdWNlKChhY2MsIGtleSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHBhdGhUb1Jvb3QgPSBbLi4ucGFyZW50cywga2V5XTtcclxuICAgICAgICBjb25zdCB2YWwgPSBvYmpba2V5XTtcclxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsKSAmJiBPYmplY3Qua2V5cyh2YWwpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFsuLi5hY2MsIC4uLmZsYXR0ZW5LZXlzKHZhbCwgcGF0aFRvUm9vdCldO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gWy4uLmFjYywgLi4ucGF0aFRvUm9vdF07XHJcbiAgICB9LCBbXSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRQaG9uZU51bWJlcihudW1iZXIgPSAnJyk6IHN0cmluZyB7XHJcbiAgICBpZiAoIW51bWJlcikge1xyXG4gICAgICAgIHJldHVybiAnMDAwLTAwMC0wMDAwJztcclxuICAgIH1cclxuICAgIGNvbnN0IGwgPSBudW1iZXIubGVuZ3RoO1xyXG4gICAgcmV0dXJuIG51bWJlciAmJiAobCA9PT0gNyB8fCBsID09PSAxMCkgP1xyXG4gICAgICAgIGwgPT09IDcgPyBmb3JtYXQ3RGlnaXRQaG9uZU51bWJlcihudW1iZXIpXHJcbiAgICAgICAgICAgIDogZm9ybWF0MTBEaWdpdFBob25lTnVtYmVyKG51bWJlcilcclxuICAgICAgICA6ICcwMDAtMDAwLTAwMDAnO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0N0RpZ2l0UGhvbmVOdW1iZXIobnVtYmVyID0gJzAwMDAwMDAnKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IGZpcnN0MyA9IG51bWJlci5zdWJzdHJpbmcoMCwgMyk7XHJcbiAgICBjb25zdCBsYXN0NCA9IG51bWJlci5zdWJzdHJpbmcoMywgNyk7XHJcbiAgICByZXR1cm4gYCR7Zmlyc3QzfSAtJHtsYXN0NH0gYDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdDEwRGlnaXRQaG9uZU51bWJlcihudW1iZXIgPSAnMDAwMDAwMDAwMCcpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgZmlyc3QzID0gbnVtYmVyLnN1YnN0cmluZygwLCAzKTtcclxuICAgIGNvbnN0IGxhc3Q3ID0gZm9ybWF0N0RpZ2l0UGhvbmVOdW1iZXIobnVtYmVyLnN1YnN0cmluZygzLCAxMCkpO1xyXG4gICAgcmV0dXJuIGAke2ZpcnN0M30gLSR7bGFzdDd9IGA7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRQcmljZSh0b3RhbDogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IGRvbGxhcnMgPSB0b3RhbC50b0ZpeGVkKDIpLnJlcGxhY2UoLy4vZywgZnVuY3Rpb24gKGMsIGksIGEpIHtcclxuICAgICAgICByZXR1cm4gaSAmJiBjICE9PSAnLicgJiYgKChhLmxlbmd0aCAtIGkpICUgMyA9PT0gMCkgPyAnLCcgKyBjIDogYztcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGAkJHtkb2xsYXJzfWA7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRUeXBlTmFtZUZvckRlYnVnZ2luZyh0eXBlOiBhbnkpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHR5cGVbJ25hbWUnXSB8fCB0eXBlb2YgdHlwZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEFsbFByb3BzKG9iajogYW55KTogc3RyaW5nW10ge1xyXG4gICAgY29uc3QgbWFwcGVkID0gb2JqWydtZXRhZGF0YSddICYmIG9ialsnbWV0YWRhdGEnXVsnaW5jbHVkZSddICYmIEFycmF5LmlzQXJyYXkob2JqWydtZXRhZGF0YSddWydpbmNsdWRlJ10pID9cclxuICAgICAgICBvYmpbJ21ldGFkYXRhJ11bJ2luY2x1ZGUnXS5yZWR1Y2UoKGFjYywga2V5KSA9PiBPYmplY3QuYXNzaWduKHt9LCBhY2MsIHsgW2tleV06IG9ialtrZXldIH0pLCB7fSkgOiBvYmo7XHJcblxyXG4gICAgaWYgKG9ialsnbWV0YWRhdGEnXSAmJiBvYmpbJ21ldGFkYXRhJ11bJ2V4Y2x1ZGUnXSAmJiBBcnJheS5pc0FycmF5KG9ialsnbWV0YWRhdGEnXVsnZXhjbHVkZSddKSkge1xyXG4gICAgICAgIG9ialsnbWV0YWRhdGEnXVsnZXhjbHVkZSddLmZvckVhY2goa2V5ID0+IHtcclxuICAgICAgICAgICAgZGVsZXRlIG1hcHBlZFtrZXldO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBbLi4uT2JqZWN0LmtleXMobWFwcGVkKSwgLi4uZ2V0R2V0dGVycyhtYXBwZWQpXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEdldHRlcnMob2JqOiBhbnkpOiBzdHJpbmdbXSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqLmNvbnN0cnVjdG9yLnByb3RvdHlwZSkuZmlsdGVyKG5hbWUgPT4ge1xyXG4gICAgICAgIHJldHVybiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmouY29uc3RydWN0b3IucHJvdG90eXBlLCBuYW1lKVsnZ2V0J10gPT09ICdmdW5jdGlvbic7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEtleVZhbHVlcyhtb2RlbDogYW55KTogYW55IHtcclxuICAgIGNvbnN0IGtleXMgPSBnZXRBbGxQcm9wcyhtb2RlbCk7XHJcbiAgICByZXR1cm4gbW9kZWxbJ21ldGFkYXRhJ10gJiYgbW9kZWxbJ21ldGFkYXRhJ11bJ2luY2x1ZGUnXSA/XHJcbiAgICAgICAgdG9BcnJheShtb2RlbFsnbWV0YWRhdGEnXVsnaW5jbHVkZSddKS5yZWR1Y2UoKGFjYywga2V5KSA9PiBPYmplY3QuYXNzaWduKHt9LCBhY2MsIHsgW2tleV06IG1vZGVsW2tleV0gfSksIHt9KVxyXG4gICAgICAgIDoga2V5cy5yZWR1Y2UoKGFjYywga2V5KSA9PiBPYmplY3QuYXNzaWduKHt9LCBhY2MsIHsgW2tleV06IG1vZGVsW2tleV0gfSksIHt9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFNldHRlcnMob2JqOiBhbnkpOiBzdHJpbmdbXSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqLnByb3RvdHlwZSkuZmlsdGVyKG5hbWUgPT4ge1xyXG4gICAgICAgIHJldHVybiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmoucHJvdG90eXBlLCBuYW1lKVsnc2V0J10gPT09ICdmdW5jdGlvbic7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy8gR2lzdCBhZGFwdGVkIGZyb206IGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2Ntcy8zNjkxMzNcclxuZXhwb3J0IGZ1bmN0aW9uIGdldFN0eWxlKGVsOiBFbGVtZW50LCBzdHlsZVByb3A6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBsZXQgdmFsdWU7XHJcbiAgICBjb25zdCBkZWZhdWx0VmlldyA9IGVsLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7XHJcbiAgICAvLyBXM0Mgc3RhbmRhcmQgd2F5OlxyXG4gICAgaWYgKGRlZmF1bHRWaWV3ICYmIGRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUpIHtcclxuICAgICAgICAvLyBzYW5pdGl6ZSBwcm9wZXJ0eSBuYW1lIHRvIGNzcyBub3RhdGlvbiAoaHlwZW4gc2VwYXJhdGVkIHdvcmRzIGVnLiBmb250LVNpemUpXHJcbiAgICAgICAgc3R5bGVQcm9wID0gc3R5bGVQcm9wLnJlcGxhY2UoLyhbQS1aXSkvZywgJy0kMScpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoZWwsIG51bGwpLmdldFByb3BlcnR5VmFsdWUoc3R5bGVQcm9wKTtcclxuICAgIH0gZWxzZSBpZiAoZWxbJ2N1cnJlbnRTdHlsZSddKSB7IC8vIElFXHJcbiAgICAgICAgLy8gc2FuaXRpemUgcHJvcGVydHkgbmFtZSB0byBjYW1lbENhc2VcclxuICAgICAgICBzdHlsZVByb3AgPSBzdHlsZVByb3AucmVwbGFjZSgvXFwtKFxcdykvZywgZnVuY3Rpb24gKHN0ciwgbGV0dGVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBsZXR0ZXIudG9VcHBlckNhc2UoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YWx1ZSA9IGVsWydjdXJyZW50U3R5bGUnXVtzdHlsZVByb3BdO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gJyc7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRWYWx1ZShtb2RlbDogYW55KTogYW55IHtcclxuICAgIGlmIChtb2RlbCA9PT0gbnVsbCB8fCB0eXBlb2YgKG1vZGVsKSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIChtb2RlbCkgPT09ICdzdHJpbmcnIHx8IG1vZGVsIGluc3RhbmNlb2YgRGF0ZSkge1xyXG4gICAgICAgIHJldHVybiBtb2RlbDtcclxuICAgIH1cclxuICAgIGNvbnN0IGtleXMgPSBnZXRBbGxQcm9wcyhtb2RlbCk7XHJcbiAgICBjb25zdCBwcm9wcyA9IGtleXMuZmlsdGVyKGtleSA9PiBrZXkgIT09ICdtZXRhZGF0YScgJiYgIWlnbm9yZUtleShtb2RlbCwga2V5KSlcclxuICAgICAgICAubWFwKGtleSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IHt9O1xyXG4gICAgICAgICAgICBvYmpba2V5XSA9IG1vZGVsW2tleV0gJiYgdHlwZW9mIG1vZGVsW2tleV0gPT09ICdvYmplY3QnID9cclxuICAgICAgICAgICAgICAgIChBcnJheS5pc0FycmF5KG1vZGVsW2tleV0pID9cclxuICAgICAgICAgICAgICAgICAgICAobW9kZWxba2V5XS5sZW5ndGggPiAwID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWxba2V5XS5tYXAoeCA9PiAodHlwZW9mIHggPT09ICdvYmplY3QnID8gZ2V0VmFsdWUoeCkgOiB4KSkgOiBbXSlcclxuICAgICAgICAgICAgICAgICAgICA6IGdldFZhbHVlKG1vZGVsW2tleV0pKSA6IG1vZGVsW2tleV07XHJcbiAgICAgICAgICAgIHJldHVybiBvYmo7XHJcbiAgICAgICAgfSk7XHJcbiAgICByZXR1cm4gcHJvcHMucmVkdWNlKChhY2MsIHZhbCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBhY2MsIHZhbCk7XHJcbiAgICB9LCB7fSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBndWlkKCkge1xyXG4gICAgZnVuY3Rpb24gczQoKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKDEgKyBNYXRoLnJhbmRvbSgpKSAqIDB4MTAwMDApXHJcbiAgICAgICAgICAgIC50b1N0cmluZygxNilcclxuICAgICAgICAgICAgLnN1YnN0cmluZygxKTtcclxuICAgIH1cclxuICAgIHJldHVybiBzNCgpICsgczQoKSArICctJyArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICtcclxuICAgICAgICBzNCgpICsgJy0nICsgczQoKSArIHM0KCkgKyBzNCgpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGFzQ2hhbmdlZChjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzLCBrZXk6IHN0cmluZywgcHJvcHM6IHN0cmluZ1tdKSB7XHJcbiAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBjaGFuZ2VzW2tleV0gJiYgY2hhbmdlc1trZXldLmN1cnJlbnRWYWx1ZSA/IGNoYW5nZXNba2V5XS5jdXJyZW50VmFsdWUgOiB7fTtcclxuICAgIGNvbnN0IHByZXZpb3VzVmFsdWUgPSBjaGFuZ2VzW2tleV0gJiYgY2hhbmdlc1trZXldLnByZXZpb3VzVmFsdWUgPyBjaGFuZ2VzW2tleV0ucHJldmlvdXNWYWx1ZSA6IHt9O1xyXG4gICAgcmV0dXJuIHByb3BzLnJlZHVjZSgoYWNjLCBwcm9wKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGFjYyA/IHRydWUgOiBjdXJyZW50VmFsdWVbcHJvcF0gIT09IHByZXZpb3VzVmFsdWVbcHJvcF07XHJcbiAgICB9LCBmYWxzZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpZENoYW5nZWQoY2hhbmdlczogU2ltcGxlQ2hhbmdlcywga2V5OiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IG5ld0lkID0gY2hhbmdlc1trZXldLmN1cnJlbnRWYWx1ZSA/IGNoYW5nZXNba2V5XS5jdXJyZW50VmFsdWVbJ2lkJ10gfHwgMCA6IDA7XHJcbiAgICBjb25zdCBvbGRJZCA9IGNoYW5nZXNba2V5XS5wcmV2aW91c1ZhbHVlID8gY2hhbmdlc1trZXldLnByZXZpb3VzVmFsdWVbJ2lkJ10gfHwgMCA6IDA7XHJcbiAgICByZXR1cm4gbmV3SWQgIT09IG9sZElkO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaWdub3JlS2V5KG1vZGVsOiBhbnksIGtleTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICBpZiAobW9kZWxbJ21ldGFkYXRhJ10gJiYgbW9kZWxbJ21ldGFkYXRhJ11bJ2lnbm9yZSddKSB7XHJcbiAgICAgICAgcmV0dXJuIGluQXJyYXkobW9kZWxbJ21ldGFkYXRhJ11bJ2lnbm9yZSddLCBrZXkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW5BcnJheShhcnI6IGFueVtdLCB2YWw6IGFueSkge1xyXG4gICAgcmV0dXJuIGFyci5maWx0ZXIoaXRlbSA9PiBpdGVtID09PSB2YWwpLmxlbmd0aCA+IDA7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpbkFycmF5QnlLZXkoYXJyOiBhbnlbXSwgdmFsOiBhbnksIGtleTogc3RyaW5nIHwgbnVtYmVyKSB7XHJcbiAgICByZXR1cm4gYXJyLmZpbmRJbmRleChpdGVtID0+IGl0ZW1ba2V5XSA9PT0gdmFsKSAhPT0gLTE7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpbnRlZ2VyQXJyYXkobjogbnVtYmVyKTogbnVtYmVyW10ge1xyXG4gICAgcmV0dXJuIEFycmF5LmZyb20oQXJyYXkobikua2V5cygpKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzQmV0d2VlbkRhdGVzKGRhdGVGcm9tLCBkYXRlVG8sIGRhdGVDaGVjaykge1xyXG4gICAgY29uc3QgZDEgPSBkYXRlRnJvbS50b0xvY2FsZURhdGVTdHJpbmcoKS5zcGxpdCgnLycpO1xyXG4gICAgY29uc3QgZDIgPSBkYXRlVG8udG9Mb2NhbGVEYXRlU3RyaW5nKCkuc3BsaXQoJy8nKTtcclxuICAgIGNvbnN0IGMgPSBkYXRlQ2hlY2sudG9Mb2NhbGVEYXRlU3RyaW5nKCkuc3BsaXQoJy8nKTtcclxuXHJcbiAgICBjb25zdCBmcm9tID0gbmV3IERhdGUoZDFbMl0sIHRvSW50KGQxWzFdKSAtIDEsIGQxWzBdKTsgIC8vIC0xIGJlY2F1c2UgbW9udGhzIGFyZSBmcm9tIDAgdG8gMTFcclxuICAgIGNvbnN0IHRvID0gbmV3IERhdGUoZDJbMl0sIHRvSW50KGQyWzFdKSAtIDEsIGQyWzBdKTtcclxuICAgIGNvbnN0IGNoZWNrID0gbmV3IERhdGUoY1syXSwgdG9JbnQoY1sxXSkgLSAxLCBjWzBdKTtcclxuXHJcbiAgICByZXR1cm4gKGNoZWNrID49IGZyb20gJiYgY2hlY2sgPD0gdG8pO1xyXG59XHJcblxyXG4vKipcclxuICogRGV0ZWN0cyBjeWNsZXMgaW4gYW4gb2JqZWN0LlxyXG4gKiBAcGFyYW0gb2JqXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNDeWNsaWMob2JqOiBhbnkpIHtcclxuICAgIGNvbnN0IHNlZW5PYmplY3RzOiBhbnlbXSA9IFtdO1xyXG5cclxuICAgIGNvbnN0IGRldGVjdCA9ICh4OiBhbnkpID0+IHtcclxuICAgICAgICBpZiAoeCAmJiB0eXBlb2YgeCA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgaWYgKHNlZW5PYmplY3RzLmluZGV4T2YoeCkgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZWVuT2JqZWN0cy5wdXNoKHgpO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB4KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoeC5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIGRldGVjdCh4W2tleV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gZGV0ZWN0KG9iaik7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAcGFyYW0gZnJvbVN0YXRlIFRoZSBsYXN0IHN0YXRlIG9iamVjdCBmcm9tIHRoZSBzdG9yZVxyXG4gKiBAcGFyYW0gZFN0YXRlIEEgcGFydGlhbCBjbGFzcyBjb250YWluaW5nIGFsbCBwcm9wZXJ0aWVzIHRoYXQgaGF2ZSBjaGFuZ2VkIHdydCBmcm9tU3RhdGVcclxuICogQHJldHVybiBUaGUgY3VycmVudC91cGRhdGVkIHN0YXRlIG9mIHRoZSBhcHBsaWNhdGlvbiAodG9TdGF0ZSlcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBuZXh0U3RhdGUoZnJvbVN0YXRlOiBhbnksIGRTdGF0ZTogYW55KTogYW55IHtcclxuICAgIGNvbnN0IHRvU3RhdGU6IGFueSA9IE9iamVjdC5hc3NpZ24oe30sIGZyb21TdGF0ZSwgZFN0YXRlKTtcclxuICAgIHJldHVybiB0b1N0YXRlO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcG9zaXRpdmVJbnRlZ2VyQXJyYXkobjogbnVtYmVyKTogbnVtYmVyW10ge1xyXG4gICAgcmV0dXJuIGludGVnZXJBcnJheShuKS5tYXAoeCA9PiB4ICsgMSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZW1vdmUgc3RvcmUgcHJvcHMgdGhhdCBjb250YWluIGN5Y2xlcy5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVDeWNsZXMob2JqOiBhbnkpOiBhbnkge1xyXG4gICAgaWYgKG9iaiAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xyXG4gICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGtleSkgJiYgaXNDeWNsaWMob2JqW2tleV0pKSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgb2JqW2tleV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb2JqO1xyXG59XHJcblxyXG4vKipcclxuICogUmVtb3ZlIGFueSBwcm9wcyB0aGF0IHNob3VsZCBub3QgYXBwZWFyIGluIHRoZSBzdG9yZS5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVQcm9wcyhvYmo6IGFueSk6IGFueSB7XHJcbiAgICByZXR1cm4gb2JqO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplKG1vZGVsOiBhbnkpIHtcclxuICAgIGlmIChBcnJheS5pc0FycmF5KG1vZGVsKSkge1xyXG4gICAgICAgIHJldHVybiBtb2RlbC5tYXAoeCA9PiBzZXJpYWxpemUoeCkpO1xyXG4gICAgfVxyXG4gICAgaWYgKG1vZGVsLnNlcmlhbGl6ZSAmJiB0eXBlb2YgbW9kZWwuc2VyaWFsaXplID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlcmlhbGl6ZShtb2RlbC5zZXJpYWxpemUoKSk7XHJcbiAgICB9XHJcbiAgICBpZiAobW9kZWwgPT09IG51bGwgfHwgdHlwZW9mIChtb2RlbCkgPT09ICdudW1iZXInIHx8IHR5cGVvZiAobW9kZWwpID09PSAnc3RyaW5nJyB8fCBtb2RlbCBpbnN0YW5jZW9mIERhdGUpIHtcclxuICAgICAgICByZXR1cm4gbW9kZWw7XHJcbiAgICB9XHJcbiAgICBjb25zdCBrZXlzID0gZ2V0QWxsUHJvcHMobW9kZWwpO1xyXG4gICAgaWYgKGtleXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIG1vZGVsO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGtleXMucmVkdWNlKChhY2MsIGtleSkgPT4ge1xyXG4gICAgICAgIGxldCB2YWwgPSBudWxsO1xyXG4gICAgICAgIGlmIChtb2RlbFtrZXldICE9PSBudWxsICYmIHR5cGVvZiAobW9kZWxba2V5XSkgPT09ICdvYmplY3QnICYmICEobW9kZWxba2V5XSBpbnN0YW5jZW9mIERhdGUpKSB7XHJcbiAgICAgICAgICAgIGlmIChtb2RlbFtrZXldLnNlcmlhbGl6ZSAmJiB0eXBlb2YgbW9kZWxba2V5XS5zZXJpYWxpemUgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIHZhbCA9IG1vZGVsW2tleV0uc2VyaWFsaXplKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YWwgPSBzZXJpYWxpemUobW9kZWxba2V5XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YWwgPSBtb2RlbFtrZXldO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgYWNjLCB7XHJcbiAgICAgICAgICAgIFtrZXldOiB2YWxcclxuICAgICAgICB9KTtcclxuICAgIH0sIHt9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ2lmeSh0b2tlbjogYW55KTogc3RyaW5nIHtcclxuICAgIGlmICh0eXBlb2YgdG9rZW4gPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHRva2VuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0b2tlbiA9PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuICcnICsgdG9rZW47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRva2VuLm92ZXJyaWRkZW5OYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIGAke3Rva2VuLm92ZXJyaWRkZW5OYW1lfWA7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRva2VuLm5hbWUpIHtcclxuICAgICAgICByZXR1cm4gYCR7dG9rZW4ubmFtZX1gO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHJlcyA9IHRva2VuLnRvU3RyaW5nKCk7XHJcbiAgICBjb25zdCBuZXdMaW5lSW5kZXggPSByZXMuaW5kZXhPZignXFxuJyk7XHJcbiAgICByZXR1cm4gbmV3TGluZUluZGV4ID09PSAtMSA/IHJlcyA6IHJlcy5zdWJzdHJpbmcoMCwgbmV3TGluZUluZGV4KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHN0cjJDaGFyQ29kZShzdHI6IHN0cmluZyk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gc3RyLmNoYXJDb2RlQXQoMCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzdHIySWQoc3RyOiBzdHJpbmcpOiBudW1iZXIge1xyXG4gICAgY29uc3QgY2hhckNvZGVzID0gc3RyID8gc3RyLnNwbGl0KCcnKS5yZWR1Y2UoKGFjYywgeCkgPT4gYCR7YWNjfSR7c3RyMkNoYXJDb2RlKHgpfWAsICcnKSA6ICcnO1xyXG4gICAgcmV0dXJuIHRvSW50KGNoYXJDb2Rlcyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzdHIyaW50KHN0cjogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgIHJldHVybiBwYXJzZUludChzdHIsIDEwKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHN0ckFycmF5MklkKHN0ckFycmF5OiBzdHJpbmdbXSkge1xyXG4gICAgY29uc3Qgc3RyID0gc3RyQXJyYXkucmVkdWNlKChhY2MsIHgpID0+IGAke2FjY30ke3h9YCwgJycpO1xyXG4gICAgcmV0dXJuIHN0cjJJZChzdHIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdGhyb3dFeGNlcHRpb24oZXJyb3JOYW1lOiBzdHJpbmcsIGVycm9yTWVzc2FnZTogc3RyaW5nKSB7XHJcbiAgICB0aHJvdyB7XHJcbiAgICAgICAgbmFtZTogZXJyb3JOYW1lLFxyXG4gICAgICAgIGxldmVsOiAnU2hvdyBTdG9wcGVyJyxcclxuICAgICAgICBtZXNzYWdlOiBlcnJvck1lc3NhZ2UsXHJcbiAgICAgICAgaHRtbE1lc3NhZ2U6ICdFcnJvciBkZXRlY3RlZC4gUGxlYXNlIGNvbnRhY3QgdGhlIDxhIGhyZWY9XFwnbWFpbHRvOmFnZW5kYW1hbmFnZXJAY2FpdS5jb21cXCc+c3lzdGVtIGFkbWluaXN0cmF0b3I8L2E+LicsXHJcbiAgICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVycm9yTmFtZSArICc6ICcgKyBlcnJvck1lc3NhZ2U7IH1cclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB0aHJvd05vdEltcGxlbWVudGVkRXhjZXB0aW9uKCkge1xyXG4gICAgdGhyb3dFeGNlcHRpb24oJ05vdCBJbXBsZW1lbnRlZCcsICdOb3QgSW1wbGVtZW50ZWQnKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRvQXJyYXkodmFsOiBhbnkpOiBhbnlbXSB7XHJcbiAgICByZXR1cm4gdmFsID8gKEFycmF5LmlzQXJyYXkodmFsKSA/IHZhbCA6IFt2YWxdKSA6IFtdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdG9JbnQodmFsOiBzdHJpbmcgfCBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHZhbCAmJiB2YWwudG9TdHJpbmcgPyBzdHIyaW50KHZhbC50b1N0cmluZygpKSA6IDA7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB0b1BheWxvYWQoYWN0aW9uOiBBY3Rpb24pOiBhbnkge1xyXG4gICAgcmV0dXJuIGFjdGlvbiA/IGFjdGlvbi5wYXlsb2FkIDogbnVsbDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRvUHgobjogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBgJHtufXB4YDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRydXRoeSh2YWx1ZTogYW55KTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gIWZhbHN5KHZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRyeUNhc3Qob2JqOiBhbnksIHR5cGU6IGFueSk6IGFueSB7XHJcbiAgICBjb25zdCByZXRPYmogPSBuZXcgdHlwZSgpO1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiAocmV0T2JqW2tleV0pICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICByZXRPYmpba2V5XSA9IG9ialtrZXldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXRPYmo7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWx1ZUNoYW5nZWQoY2hhbmdlczogU2ltcGxlQ2hhbmdlcywga2V5ID0gJycpIHtcclxuICAgIHJldHVybiBrZXkgPyBjaGFuZ2VzW2tleV0uY3VycmVudFZhbHVlICE9PSBjaGFuZ2VzW2tleV0ucHJldmlvdXNWYWx1ZVxyXG4gICAgICAgIDogT2JqZWN0LmtleXMoY2hhbmdlcykucmVkdWNlKChhY2MsIGN1cnJlbnRLZXkpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGFjYyA/IHRydWUgOiBjaGFuZ2VzW2N1cnJlbnRLZXldLmN1cnJlbnRWYWx1ZSAhPT0gY2hhbmdlc1tjdXJyZW50S2V5XS5wcmV2aW91c1ZhbHVlO1xyXG4gICAgICAgIH0sIGZhbHNlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbHVlRXF1YWxzKHZhbHVlLCBmb3JtVmFsdWUpIHtcclxuICAgIHJldHVybiBlcXVhbHMoZ2V0VmFsdWUodmFsdWUpLCBmb3JtVmFsdWUpO1xyXG59XHJcbiJdfQ==
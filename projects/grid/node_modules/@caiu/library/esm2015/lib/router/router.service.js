/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { Injectable, EventEmitter } from '@angular/core';
import { Router, ActivatedRoute, NavigationCancel, NavigationEnd, NavigationError, NavigationStart, RoutesRecognized } from '@angular/router';
import { Store } from '@ngrx/store';
import { from } from 'rxjs';
import { RouterActions } from './actions';
import * as i0 from "@angular/core";
import * as i1 from "@angular/router";
import * as i2 from "@ngrx/store";
export class RouterService {
    /**
     * @param {?} _router
     * @param {?} _route
     * @param {?} store
     */
    constructor(_router, _route, store) {
        this._router = _router;
        this._route = _route;
        this.store = store;
        this.navigationCancel = new EventEmitter();
        this.navigationEnd = new EventEmitter();
        this.navigationError = new EventEmitter();
        this.navigationStart = new EventEmitter();
        this.routesRecognized = new EventEmitter();
        _router.events.subscribe((e) => {
            if (e instanceof NavigationCancel) {
                this.onNavigationCancel(e);
            }
            else if (e instanceof NavigationEnd) {
                this.onNavigationEnd(e);
            }
            else if (e instanceof NavigationError) {
                this.onNavigationError(e);
            }
            else if (e instanceof NavigationStart) {
                this.onNavigationStart(e);
            }
            else if (e instanceof RoutesRecognized) {
                this.onRoutesRecognized(e);
            }
        });
    }
    /**
     * @param {?} e
     * @return {?}
     */
    onNavigationCancel(e) {
        this.store.dispatch(RouterActions.navCancel(e));
    }
    /**
     * @param {?} e
     * @return {?}
     */
    onNavigationEnd(e) {
        this.store.dispatch(RouterActions.navEnd(e));
    }
    /**
     * @param {?} e
     * @return {?}
     */
    onNavigationError(e) {
        this.store.dispatch(RouterActions.navError(e));
    }
    /**
     * @param {?} e
     * @return {?}
     */
    onNavigationStart(e) {
        this.store.dispatch(RouterActions.navStart(e));
    }
    /**
     * @param {?} e
     * @return {?}
     */
    onRoutesRecognized(e) {
        this.store.dispatch(RouterActions.routesRecognized(e));
    }
    /**
     * @return {?}
     */
    get activatedRoute() {
        return this._route;
    }
    /**
     * @return {?}
     */
    get routeData$() {
        return this.activatedRoute.data;
    }
    /**
     * @return {?}
     */
    get routeParams$() {
        return this.activatedRoute.params;
    }
    /**
     * @return {?}
     */
    get router() {
        return this._router;
    }
    /**
     * @return {?}
     */
    get url$() {
        return this.store.select(s => s.router.url);
    }
    /**
     * @param {?} commands
     * @param {?=} extras
     * @return {?}
     */
    navigate(commands, extras) {
        const /** @type {?} */ promise = this.router.navigate(commands, extras);
        return from(promise);
    }
    /**
     * @param {?} url
     * @param {?=} extras
     * @return {?}
     */
    navigateByUrl(url, extras) {
        const /** @type {?} */ promise = this.router.navigateByUrl(url, extras);
        return from(promise);
    }
}
RouterService.decorators = [
    { type: Injectable, args: [{
                providedIn: 'root'
            },] },
];
/** @nocollapse */
RouterService.ctorParameters = () => [
    { type: Router },
    { type: ActivatedRoute },
    { type: Store }
];
/** @nocollapse */ RouterService.ngInjectableDef = i0.defineInjectable({ factory: function RouterService_Factory() { return new RouterService(i0.inject(i1.Router), i0.inject(i1.ActivatedRoute), i0.inject(i2.Store)); }, token: RouterService, providedIn: "root" });
function RouterService_tsickle_Closure_declarations() {
    /** @type {?} */
    RouterService.prototype.navigationCancel;
    /** @type {?} */
    RouterService.prototype.navigationEnd;
    /** @type {?} */
    RouterService.prototype.navigationError;
    /** @type {?} */
    RouterService.prototype.navigationStart;
    /** @type {?} */
    RouterService.prototype.routesRecognized;
    /** @type {?} */
    RouterService.prototype._router;
    /** @type {?} */
    RouterService.prototype._route;
    /** @type {?} */
    RouterService.prototype.store;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm91dGVyLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AY2FpdS9saWJyYXJ5LyIsInNvdXJjZXMiOlsibGliL3JvdXRlci9yb3V0ZXIuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxZQUFZLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDekQsT0FBTyxFQUNMLE1BQU0sRUFDTixjQUFjLEVBRWQsZ0JBQWdCLEVBQ2hCLGFBQWEsRUFDYixlQUFlLEVBQ2YsZUFBZSxFQUNmLGdCQUFnQixFQUlqQixNQUFNLGlCQUFpQixDQUFDO0FBQ3pCLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFDcEMsT0FBTyxFQUFjLElBQUksRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUV4QyxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sV0FBVyxDQUFDOzs7O0FBSzFDLE1BQU07Ozs7OztJQVFKLFlBQ1UsU0FDQSxRQUNBO1FBRkEsWUFBTyxHQUFQLE9BQU87UUFDUCxXQUFNLEdBQU4sTUFBTTtRQUNOLFVBQUssR0FBTCxLQUFLO2dDQVRJLElBQUksWUFBWSxFQUFvQjs2QkFDdkMsSUFBSSxZQUFZLEVBQWlCOytCQUMvQixJQUFJLFlBQVksRUFBbUI7K0JBQ25DLElBQUksWUFBWSxFQUFtQjtnQ0FDbEMsSUFBSSxZQUFZLEVBQW9CO1FBTXJELE9BQU8sQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBUSxFQUFFLEVBQUU7WUFDcEMsRUFBRSxDQUFDLENBQUMsQ0FBQyxZQUFZLGdCQUFnQixDQUFDLENBQUMsQ0FBQztnQkFDbEMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQzVCO1lBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsWUFBWSxhQUFhLENBQUMsQ0FBQyxDQUFDO2dCQUN0QyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQ3pCO1lBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsWUFBWSxlQUFlLENBQUMsQ0FBQyxDQUFDO2dCQUN4QyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDM0I7WUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxZQUFZLGVBQWUsQ0FBQyxDQUFDLENBQUM7Z0JBQ3hDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUMzQjtZQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLFlBQVksZ0JBQWdCLENBQUMsQ0FBQyxDQUFDO2dCQUN6QyxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDNUI7U0FDRixDQUFDLENBQUM7S0FDSjs7Ozs7SUFFRCxrQkFBa0IsQ0FBQyxDQUFtQjtRQUNwQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDakQ7Ozs7O0lBRUQsZUFBZSxDQUFDLENBQWdCO1FBQzlCLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUM5Qzs7Ozs7SUFFRCxpQkFBaUIsQ0FBQyxDQUFrQjtRQUNsQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDaEQ7Ozs7O0lBRUQsaUJBQWlCLENBQUMsQ0FBa0I7UUFDbEMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQ2hEOzs7OztJQUVELGtCQUFrQixDQUFDLENBQW1CO1FBQ3BDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQ3hEOzs7O0lBRUQsSUFBSSxjQUFjO1FBQ2hCLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO0tBQ3BCOzs7O0lBRUQsSUFBSSxVQUFVO1FBQ1osTUFBTSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDO0tBQ2pDOzs7O0lBRUQsSUFBSSxZQUFZO1FBQ2QsTUFBTSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDO0tBQ25DOzs7O0lBRUQsSUFBSSxNQUFNO1FBQ1IsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7S0FDckI7Ozs7SUFFRCxJQUFJLElBQUk7UUFDTixNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0tBQzdDOzs7Ozs7SUFFRCxRQUFRLENBQUMsUUFBZSxFQUFFLE1BQXlCO1FBQ2pELHVCQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDdkQsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztLQUN0Qjs7Ozs7O0lBRUQsYUFBYSxDQUFDLEdBQVcsRUFBRSxNQUF5QjtRQUNsRCx1QkFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQ3ZELE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7S0FDdEI7OztZQTlFRixVQUFVLFNBQUM7Z0JBQ1YsVUFBVSxFQUFFLE1BQU07YUFDbkI7Ozs7WUFuQkMsTUFBTTtZQUNOLGNBQWM7WUFXUCxLQUFLIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSwgRXZlbnRFbWl0dGVyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge1xuICBSb3V0ZXIsXG4gIEFjdGl2YXRlZFJvdXRlLFxuICBFdmVudCxcbiAgTmF2aWdhdGlvbkNhbmNlbCxcbiAgTmF2aWdhdGlvbkVuZCxcbiAgTmF2aWdhdGlvbkVycm9yLFxuICBOYXZpZ2F0aW9uU3RhcnQsXG4gIFJvdXRlc1JlY29nbml6ZWQsXG4gIFBhcmFtcyxcbiAgRGF0YSxcbiAgTmF2aWdhdGlvbkV4dHJhc1xufSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHsgU3RvcmUgfSBmcm9tICdAbmdyeC9zdG9yZSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBmcm9tIH0gZnJvbSAncnhqcyc7XG5cbmltcG9ydCB7IFJvdXRlckFjdGlvbnMgfSBmcm9tICcuL2FjdGlvbnMnO1xuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBSb3V0ZXJTZXJ2aWNlIHtcblxuICBuYXZpZ2F0aW9uQ2FuY2VsID0gbmV3IEV2ZW50RW1pdHRlcjxOYXZpZ2F0aW9uQ2FuY2VsPigpO1xuICBuYXZpZ2F0aW9uRW5kID0gbmV3IEV2ZW50RW1pdHRlcjxOYXZpZ2F0aW9uRW5kPigpO1xuICBuYXZpZ2F0aW9uRXJyb3IgPSBuZXcgRXZlbnRFbWl0dGVyPE5hdmlnYXRpb25FcnJvcj4oKTtcbiAgbmF2aWdhdGlvblN0YXJ0ID0gbmV3IEV2ZW50RW1pdHRlcjxOYXZpZ2F0aW9uU3RhcnQ+KCk7XG4gIHJvdXRlc1JlY29nbml6ZWQgPSBuZXcgRXZlbnRFbWl0dGVyPFJvdXRlc1JlY29nbml6ZWQ+KCk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfcm91dGVyOiBSb3V0ZXIsXG4gICAgcHJpdmF0ZSBfcm91dGU6IEFjdGl2YXRlZFJvdXRlLFxuICAgIHByaXZhdGUgc3RvcmU6IFN0b3JlPGFueT4pIHtcbiAgICBfcm91dGVyLmV2ZW50cy5zdWJzY3JpYmUoKGU6IEV2ZW50KSA9PiB7XG4gICAgICBpZiAoZSBpbnN0YW5jZW9mIE5hdmlnYXRpb25DYW5jZWwpIHtcbiAgICAgICAgdGhpcy5vbk5hdmlnYXRpb25DYW5jZWwoZSk7XG4gICAgICB9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBOYXZpZ2F0aW9uRW5kKSB7XG4gICAgICAgIHRoaXMub25OYXZpZ2F0aW9uRW5kKGUpO1xuICAgICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2YgTmF2aWdhdGlvbkVycm9yKSB7XG4gICAgICAgIHRoaXMub25OYXZpZ2F0aW9uRXJyb3IoZSk7XG4gICAgICB9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBOYXZpZ2F0aW9uU3RhcnQpIHtcbiAgICAgICAgdGhpcy5vbk5hdmlnYXRpb25TdGFydChlKTtcbiAgICAgIH0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIFJvdXRlc1JlY29nbml6ZWQpIHtcbiAgICAgICAgdGhpcy5vblJvdXRlc1JlY29nbml6ZWQoZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBvbk5hdmlnYXRpb25DYW5jZWwoZTogTmF2aWdhdGlvbkNhbmNlbCk6IHZvaWQge1xuICAgIHRoaXMuc3RvcmUuZGlzcGF0Y2goUm91dGVyQWN0aW9ucy5uYXZDYW5jZWwoZSkpO1xuICB9XG5cbiAgb25OYXZpZ2F0aW9uRW5kKGU6IE5hdmlnYXRpb25FbmQpOiB2b2lkIHtcbiAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKFJvdXRlckFjdGlvbnMubmF2RW5kKGUpKTtcbiAgfVxuXG4gIG9uTmF2aWdhdGlvbkVycm9yKGU6IE5hdmlnYXRpb25FcnJvcik6IHZvaWQge1xuICAgIHRoaXMuc3RvcmUuZGlzcGF0Y2goUm91dGVyQWN0aW9ucy5uYXZFcnJvcihlKSk7XG4gIH1cblxuICBvbk5hdmlnYXRpb25TdGFydChlOiBOYXZpZ2F0aW9uU3RhcnQpOiB2b2lkIHtcbiAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKFJvdXRlckFjdGlvbnMubmF2U3RhcnQoZSkpO1xuICB9XG5cbiAgb25Sb3V0ZXNSZWNvZ25pemVkKGU6IFJvdXRlc1JlY29nbml6ZWQpOiB2b2lkIHtcbiAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKFJvdXRlckFjdGlvbnMucm91dGVzUmVjb2duaXplZChlKSk7XG4gIH1cblxuICBnZXQgYWN0aXZhdGVkUm91dGUoKTogQWN0aXZhdGVkUm91dGUge1xuICAgIHJldHVybiB0aGlzLl9yb3V0ZTtcbiAgfVxuXG4gIGdldCByb3V0ZURhdGEkKCk6IE9ic2VydmFibGU8RGF0YT4ge1xuICAgIHJldHVybiB0aGlzLmFjdGl2YXRlZFJvdXRlLmRhdGE7XG4gIH1cblxuICBnZXQgcm91dGVQYXJhbXMkKCk6IE9ic2VydmFibGU8UGFyYW1zPiB7XG4gICAgcmV0dXJuIHRoaXMuYWN0aXZhdGVkUm91dGUucGFyYW1zO1xuICB9XG5cbiAgZ2V0IHJvdXRlcigpOiBSb3V0ZXIge1xuICAgIHJldHVybiB0aGlzLl9yb3V0ZXI7XG4gIH1cblxuICBnZXQgdXJsJCgpOiBPYnNlcnZhYmxlPHN0cmluZz4ge1xuICAgIHJldHVybiB0aGlzLnN0b3JlLnNlbGVjdChzID0+IHMucm91dGVyLnVybCk7XG4gIH1cblxuICBuYXZpZ2F0ZShjb21tYW5kczogYW55W10sIGV4dHJhcz86IE5hdmlnYXRpb25FeHRyYXMpOiBPYnNlcnZhYmxlPGJvb2xlYW4+IHtcbiAgICBjb25zdCBwcm9taXNlID0gdGhpcy5yb3V0ZXIubmF2aWdhdGUoY29tbWFuZHMsIGV4dHJhcyk7XG4gICAgcmV0dXJuIGZyb20ocHJvbWlzZSk7XG4gIH1cblxuICBuYXZpZ2F0ZUJ5VXJsKHVybDogc3RyaW5nLCBleHRyYXM/OiBOYXZpZ2F0aW9uRXh0cmFzKTogT2JzZXJ2YWJsZTxib29sZWFuPiB7XG4gICAgY29uc3QgcHJvbWlzZSA9IHRoaXMucm91dGVyLm5hdmlnYXRlQnlVcmwodXJsLCBleHRyYXMpO1xuICAgIHJldHVybiBmcm9tKHByb21pc2UpO1xuICB9XG5cbn0iXX0=